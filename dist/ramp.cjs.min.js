"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("manifesto.js"),r=require("mime-db"),n=require("sanitize-html"),a=require("react-error-boundary"),i=require("video.js"),u=require("react-dom"),o=require("mammoth");function l(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function c(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var s=l(e),f=l(r),d=l(n),p=l(i),v=l(u),m=l(o),h="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function y(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function g(e,t,r){return e(r={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&r.path)}},r.exports),r.exports}var b=g((function(e){e.exports=function(e){if(Array.isArray(e))return e},e.exports.__esModule=!0,e.exports.default=e.exports})),_=g((function(e){e.exports=function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,i,u,o=[],l=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=i.call(r)).done)&&(o.push(n.value),o.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(u=r.return(),Object(u)!==u))return}finally{if(c)throw a}}return o}},e.exports.__esModule=!0,e.exports.default=e.exports})),x=g((function(e){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.__esModule=!0,e.exports.default=e.exports})),w=g((function(e){e.exports=function(e,t){if(e){if("string"==typeof e)return x(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?x(e,t):void 0}},e.exports.__esModule=!0,e.exports.default=e.exports})),k=g((function(e){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports})),E=y(g((function(e){e.exports=function(e,t){return b(e)||_(e,t)||w(e,t)||k()},e.exports.__esModule=!0,e.exports.default=e.exports}))),T=g((function(e){function t(r){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})),S=y(T),C=g((function(e){var t=T.default;e.exports=function(e,r){if("object"!==t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var a=n.call(e,r||"default");if("object"!==t(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports})),j=g((function(e){var t=T.default;e.exports=function(e){var r=C(e,"string");return"symbol"===t(r)?r:String(r)},e.exports.__esModule=!0,e.exports.default=e.exports})),I=y(g((function(e){e.exports=function(e,t,r){return(t=j(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.__esModule=!0,e.exports.default=e.exports})));function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var R=s.default.createContext(),O=s.default.createContext(),A={manifest:null,canvasIndex:0,currentNavItem:null,canvasDuration:0,canvasIsEmpty:!1,targets:[],hasMultiItems:!1,srcIndex:0,startTime:0,autoAdvance:!1,playlist:{markers:[],isEditing:!1,isPlaylist:!1,hasAnnotationService:!1,annotationServiceId:""},structures:[],canvasSegments:[],hasStructure:!1};function L(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"updateManifest":return M(M({},e),{},{manifest:M({},t.manifest)});case"switchCanvas":var r=e.canvasSegments.length>0&&e.canvasSegments.filter((function(e){return e.canvasIndex==t.canvasIndex+1&&!e.isCanvas}));return M(M({},e),{},{canvasIndex:t.canvasIndex,hasStructure:r.length>0});case"switchItem":return M(M({},e),{},{currentNavItem:t.item});case"canvasDuration":return M(M({},e),{},{canvasDuration:t.canvasDuration});case"canvasTargets":return M(M({},e),{},{targets:t.canvasTargets});case"hasMultipleItems":return M(M({},e),{},{hasMultiItems:t.isMultiSource});case"setSrcIndex":return M(M({},e),{},{srcIndex:t.srcIndex});case"setItemStartTime":return M(M({},e),{},{startTime:t.startTime});case"setAutoAdvance":return M(M({},e),{},{autoAdvance:t.autoAdvance});case"setPlaylistMarkers":if(t.markers)return M(M({},e),{},{playlist:M(M({},e.playlist),{},{markers:t.markers})});if(t.updatedMarkers)return M(M({},e),{},{playlist:M(M({},e.playlist),{},{markers:e.playlist.markers.map((function(r){return r.canvasIndex===e.canvasIndex&&(r.canvasMarkers=t.updatedMarkers),r}))})});case"setIsEditing":return M(M({},e),{},{playlist:M(M({},e.playlist),{},{isEditing:t.isEditing})});case"setIsPlaylist":return M(M({},e),{},{playlist:M(M({},e.playlist),{},{isPlaylist:t.isPlaylist})});case"setCanvasIsEmpty":return M(M({},e),{},{canvasIsEmpty:t.isEmpty});case"setAnnotationService":return M(M({},e),{},{playlist:M(M({},e.playlist),{},{annotationServiceId:t.annotationService,hasAnnotationService:!!t.annotationService})});case"setStructures":return M(M({},e),{},{structures:t.structures});case"setCanvasSegments":var n=t.timespans.filter((function(t){return t.canvasIndex==e.canvasIndex+1&&!t.isCanvas}));return M(M({},e),{},{canvasSegments:t.timespans,hasStructure:n.length>0});default:throw new Error("Unhandled action type: ".concat(t.type))}}function N(e){var t=e.initialState,r=void 0===t?A:t,n=e.children,a=s.default.useReducer(L,r),i=E(a,2),u=i[0],o=i[1];return s.default.createElement(R.Provider,{value:u},s.default.createElement(O.Provider,{value:o},n))}function D(){var e=s.default.useContext(R);if(void 0===e)throw new Error("useManifestState must be used within a ManifestProvider");return e}function B(){var e=s.default.useContext(O);if(void 0===e)throw new Error("useManifestDispatch must be used within a ManifestProvider");return e}function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var q=s.default.createContext(),W=s.default.createContext(),V={player:null,clickedUrl:"",isClicked:!1,isPlaying:!1,startTime:null,endTime:null,isEnded:!1,currentTime:null,playerFocusElement:""};function z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"updatePlayer":return U(U({},e),{},{player:t.player});case"navClick":return U(U({},e),{},{clickedUrl:t.clickedUrl,isClicked:!0});case"resetClick":return U(U({},e),{},{isClicked:!1});case"setTimeFragment":return U(U({},e),{},{startTime:t.startTime,endTime:t.endTime});case"setPlayingStatus":return U(U({},e),{},{isPlaying:t.isPlaying});case"setCaptionStatus":return U(U({},e),{},{captionOn:t.captionOn});case"setIsEnded":return U(U({},e),{},{isEnded:t.isEnded});case"setCurrentTime":return U(U({},e),{},{currentTime:t.currentTime});case"setPlayerFocusElement":return U(U({},e),{},{playerFocusElement:t.element?t.element:""});default:throw new Error("Unhandled action type: ".concat(t.type))}}function H(e){var t=e.initialState,r=void 0===t?V:t,n=e.children,a=s.default.useReducer(z,r),i=E(a,2),u=i[0],o=i[1];return s.default.createElement(q.Provider,{value:u},s.default.createElement(W.Provider,{value:o},n))}function $(){var e=s.default.useContext(q);if(void 0===e)throw new Error("usePlayerState must be used within the PlayerProvider");return e}function G(){var e=s.default.useContext(W);if(void 0===e)throw new Error("usePlayerDispatch must be used within the PlayerProvider");return e}var J=y(g((function(e){function t(e,t,r,n,a,i,u){try{var o=e[i](u),l=o.value}catch(e){return void r(e)}o.done?t(l):Promise.resolve(l).then(n,a)}e.exports=function(e){return function(){var r=this,n=arguments;return new Promise((function(a,i){var u=e.apply(r,n);function o(e){t(u,a,i,o,l,"next",e)}function l(e){t(u,a,i,o,l,"throw",e)}o(void 0)}))}},e.exports.__esModule=!0,e.exports.default=e.exports}))),Z=g((function(e){var t=T.default;function r(){e.exports=r=function(){return n},e.exports.__esModule=!0,e.exports.default=e.exports;var n={},a=Object.prototype,i=a.hasOwnProperty,u=Object.defineProperty||function(e,t,r){e[t]=r.value},o="function"==typeof Symbol?Symbol:{},l=o.iterator||"@@iterator",c=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function f(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{f({},"")}catch(e){f=function(e,t,r){return e[t]=r}}function d(e,t,r,n){var a=t&&t.prototype instanceof m?t:m,i=Object.create(a.prototype),o=new j(n||[]);return u(i,"_invoke",{value:E(e,r,o)}),i}function p(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}n.wrap=d;var v={};function m(){}function h(){}function y(){}var g={};f(g,l,(function(){return this}));var b=Object.getPrototypeOf,_=b&&b(b(I([])));_&&_!==a&&i.call(_,l)&&(g=_);var x=y.prototype=m.prototype=Object.create(g);function w(e){["next","throw","return"].forEach((function(t){f(e,t,(function(e){return this._invoke(t,e)}))}))}function k(e,r){function n(a,u,o,l){var c=p(e[a],e,u);if("throw"!==c.type){var s=c.arg,f=s.value;return f&&"object"==t(f)&&i.call(f,"__await")?r.resolve(f.__await).then((function(e){n("next",e,o,l)}),(function(e){n("throw",e,o,l)})):r.resolve(f).then((function(e){s.value=e,o(s)}),(function(e){return n("throw",e,o,l)}))}l(c.arg)}var a;u(this,"_invoke",{value:function(e,t){function i(){return new r((function(r,a){n(e,t,r,a)}))}return a=a?a.then(i,i):i()}})}function E(e,t,r){var n="suspendedStart";return function(a,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===a)throw i;return P()}for(r.method=a,r.arg=i;;){var u=r.delegate;if(u){var o=T(u,r);if(o){if(o===v)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=p(e,t,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===v)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function T(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,T(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),v;var a=p(n,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,v;var i=a.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,v):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function I(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(i.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=y,u(x,"constructor",{value:y,configurable:!0}),u(y,"constructor",{value:h,configurable:!0}),h.displayName=f(y,s,"GeneratorFunction"),n.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},n.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,f(e,s,"GeneratorFunction")),e.prototype=Object.create(x),e},n.awrap=function(e){return{__await:e}},w(k.prototype),f(k.prototype,c,(function(){return this})),n.AsyncIterator=k,n.async=function(e,t,r,a,i){void 0===i&&(i=Promise);var u=new k(d(e,t,r,a),i);return n.isGeneratorFunction(t)?u:u.next().then((function(e){return e.done?e.value:u.next()}))},w(x),f(x,s,"Generator"),f(x,l,(function(){return this})),f(x,"toString",(function(){return"[object Generator]"})),n.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},n.values=I,j.prototype={constructor:j,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return u.type="throw",u.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n],u=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var o=i.call(a,"catchLoc"),l=i.call(a,"finallyLoc");if(o&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(o){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var u=a?a.completion:{};return u.type=e,u.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(u)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),C(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var a=n.arg;C(r)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:I(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),v}},n}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports})),K=Z(),Y=K;try{regeneratorRuntime=K}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=K:Function("r","regeneratorRuntime = r")(K)}function X(){}function Q(){}Q.resetWarningCache=X;var ee=function(){function e(e,t,r,n,a,i){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==i){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}function t(){return e}e.isRequired=e;var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Q,resetWarningCache:X};return r.PropTypes=r,r},te=g((function(e){e.exports=ee()})),re={transcript:1,caption:2,both:3},ne="Error encountered. Please check your Manifest.",ae=ne,ie="No media resource(s). Please check your Manifest.",ue=ie,oe=1e4,le=oe;function ce(e){ue=e||ie}function se(e){var r=t.parseManifest(e).getSequences();if(null!=r&&null!=r[0])return r;throw new Error(ae)}function fe(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(isNaN(e))return"";var n=Math.floor(e/3600),a=Math.floor(e%3600/60),i=e-60*a-3600*n,u="",o=n<10?"0".concat(n):"".concat(n);u=t||n>0?u+"".concat(o,":"):u;var l=a<10?"0".concat(a):"".concat(a);u+="".concat(l,":");var c=r?i.toFixed(3):parseInt(i);return c=i<10?"0".concat(c):"".concat(c),u+="".concat(c)}function de(e){var t=e.split(":").reverse(),r=E(t,3),n=r[0],a=r[1],i=r[2];return(null!=i?3600*parseInt(i):0)+(null!=a?60*parseInt(a):0)+(""===n?0:parseFloat(n.replace(",",".")))}function pe(e){if(!e.ok)throw new Error(ae);return e}function ve(e,t){return void 0!==e&&(void 0===t||!(e.start>t.end&&e.end>t.end))}function me(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=""===r?t.split(".").reverse()[0]:r;(a.length>4||a.length<3||a===t)&&(a=e.split(".").reverse()[0]);var i=a.length>4||a.length<3?"":a,u=t.endsWith(i)?t.split(".".concat(i))[0]:t;n&&(u="".concat(u," (machine generated)"));var o=""!=i?"".concat(u,".").concat(i):u;if(e.endsWith("transcripts")||e.endsWith("captions"))fetch(e).then((function(e){e.blob().then((function(e){var t=window.URL.createObjectURL(e),r=document.createElement("a");r.href=t,r.download="".concat(o),r.click()}))})).catch((function(e){console.log(e)}));else{var l=document.createElement("a");l.setAttribute("href",e),l.setAttribute("download","".concat(o)),l.style.display="none",document.body.appendChild(l),l.click(),document.body.removeChild(l)}}function he(e,t){if(void 0===e);else{var r=e.split("#t=")[1];if(void 0!==r){var n=r.split(",");return null==n[1]&&(n[1]=t),{start:Number(n[0]),end:Number(n[1])}}}}function ye(e,r){var n=[];if(!e)return n;var a=null;if(e.length&&(a=new t.AnnotationPage(e[0],{})),!a)return n;var i=a.getItems();if(void 0===i)return n;for(var u=0;u<i.length;u++){var o=i[u],l=new t.Annotation(o,{});l.getMotivation()==r&&n.push(l)}return n}function ge(e){var t=e.manifest,r=e.canvasIndex,n=e.key,a=e.motivation,i=[];try{var u=se(t)[0].getCanvases()[r];return u&&(i=ye(u.__jsonld[n],a)),i}catch(e){throw e}}function be(e,t,r){var n,a=[],i=[],u=!1;if(!e||0===e.length)return{error:"No resources found in Manifest",canvasTargets:i,resources:a,isMultiSource:u};if(e.length>1)u=!0,e.map((function(e,n){var u=_e(e.getBody()[0],r);if("painting"===r){var o=function(e,t,r){var n=he(e.getTarget(),t);if(null!=n||!n)return n.id=e.id,isNaN(n.end)&&(n.end=t),n.end=Number((n.end-n.start).toFixed(2)),n.duration=n.end,n.altStart=n.start,n.start=0,n.sIndex=r,n}(e,t,n);i.push(o)}u.length>0&&u[0].src&&a.push(u[0])}));else{if(!((null===(n=e[0].getBody())||void 0===n?void 0:n.length)>0))return{resources:a,error:"No resources found"};e[0].getBody().map((function(e){var t=_e(e,r);t.length>0&&t[0].src&&a.push(t[0])}))}return{canvasTargets:i,isMultiSource:u,resources:a}}function _e(e,t){var r=[],n=re.both,a=void 0;if(1===e.getLabel().length?a=e.getLabel().getValue():e.getLabel().length>1&&(a=ke(e.getLabel()[0]._value)),"supplementing"===t&&(n=we(e.id)),n!=re.transcript){var i={src:e.id,key:e.id,type:e.getProperty("format"),kind:e.getProperty("type"),label:a||"auto",value:e.getProperty("value")?e.getProperty("value"):""};"supplementing"===t&&(i.srclang=e.getProperty("language")||"eng",i.kind=e.getProperty("format").toLowerCase().includes("text/vtt")?"subtitles":"metadata"),r.push(i)}return r}function xe(e){var t=/(\(machine(\s|\-)generated\))/gi;return{isMachineGen:t.test(e),labelText:e.replace(t,"").trim()}}function we(e){var t=e.split("/").reverse()[0];return"transcripts"===t?re.transcript:"captions"===t?re.caption:re.both}function ke(e){var t=function(e){return e.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&apos;/g,"'")};if(e&&"object"===S(e)){var r=Object.keys(e);if(r&&r.length>0){var n=r[0];return e[n].length>0?t(e[n][0]):""}}else if("string"==typeof e)return t(e);return"Label could not be parsed"}function Ee(e){return/^(([0-1][0-9])|([2][0-3])):([0-5][0-9])(:[0-5][0-9](?:[.]\d{1,3})?)?$/.test(e)}function Te(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=e.offsetTop-t.current.offsetTop;if(r)t.current.scrollTop=n;else{var a=t.current.clientHeight-e.clientHeight;t.current.scrollTop=n>a?n-t.current.clientHeight/2:a/2>n?0:n/2}}function Se(e,t,r){var n=null==t?void 0:t.player(),a=document.activeElement,i=a.className.includes("vjs")||a.className.includes("videojs"),u=e.which,o=e.ctrlKey||e.metaKey||e.altKey||e.shiftKey;if((!a||-1===["input","textarea"].indexOf(a.tagName.toLowerCase())&&("tab"!==a.role||37!==u&&39!==u)||i)&&!o&&!r&&null!=n){switch(u){case 32:case 75:e.preventDefault(),n.paused()?n.play():n.pause();break;case 70:e.preventDefault(),n.isAudio()||(n.isFullscreen()?n.exitFullscreen():n.requestFullscreen());break;case 77:e.preventDefault();var l=n.volume(),c=n.lastVolume_();if(0===l){var s=c<.1?.1:c;n.volume(s),n.muted(!1)}else n.muted(!n.muted());break;case 37:e.preventDefault(),n.currentTime(n.currentTime()-5);break;case 39:e.preventDefault(),n.currentTime(n.currentTime()+5);break;case 38:e.preventDefault(),n.muted()&&n.muted(!1),n.volume(n.volume()+.1);break;case 40:e.preventDefault(),n.volume(n.volume()-.1);break;default:return}e.stopPropagation()}}function Ce(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return je(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return je(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){o=!0,i=e},f:function(){try{u||null==r.return||r.return()}finally{if(o)throw i}}}}function je(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Pe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ie(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Me={allowedTags:["a","b","br","i","img","p","small","span","sub","sup"],allowedAttributes:{a:["href"],img:["src","alt"]},allowedSchemesByTag:{a:["http","https","mailto"]}};function Re(e){var r=[];try{var n=se(e)[0].getCanvases();if(void 0===n)throw console.error("iiif-parser -> canvasesInManifest() -> no canvases were found in Manifest"),new Error(ae);return n.map((function(e){var n=void 0,a=e.getProperty("summary");a&&(n=t.PropertyValue.parse(a).getValue());var i=void 0,u=e.getProperty("homepage");u&&(null==u?void 0:u.length)>0&&(i=u[0].id);try{var o,l=e.getContent()[0].getBody().map((function(e){return e.id})),c=Number(e.getDuration());(null==l?void 0:l.length)>0&&(o=he(l[0],c)),r.push({canvasId:e.id,range:void 0===o?{start:0,end:c}:o,isEmpty:0===l.length,summary:n,homepage:i||""})}catch(t){r.push({canvasId:e.id,range:void 0,isEmpty:!0,summary:n,homepage:i||""})}})),r}catch(e){throw e}}function Oe(e){var t,r=e.manifest,n=e.canvasIndex,a=e.srcIndex,i=void 0===a?0:a,u=[],o=[];if(void 0===n||n<0)return{error:"Error fetching content",canvas:null,sources:[],tracks:[],canvasTargets:[]};var l=Re(r);if(0==(null==l?void 0:l.length))return{sources:[],tracks:o,error:ue,canvas:null,canvasTargets:[]};try{if(void 0===(u=se(r)[0].getCanvasByIndex(n)))throw console.error("iiif-parser -> getMediaInfo() -> canvas undefined  -> ",n),new Error(ae);var c=Number(u.getDuration()),s=Ae({manifest:r,canvasIndex:n,key:"items",motivation:"painting",duration:c}),f=s.resources,d=s.canvasTargets,p=s.isMultiSource,v=s.error;t=function(e,t,r){var n=!1;if(0===e.length)return[];if(t)e[r].selected=!0;else{var a,i=Ce(e);try{for(i.s();!(a=i.n()).done;){var u=a.value;"auto"!=u.label||n||(n=!0,u.selected=!0)}}catch(e){i.e(e)}finally{i.f()}n||(e[0].selected=!0)}return e}(f,p,i);var m=Ae({manifest:r,canvasIndex:n,key:"annotations",motivation:"supplementing",duration:c}),h={sources:t,tracks:o=m?m.resources:[],canvasTargets:d,isMultiSource:p,error:v,canvas:{duration:c,height:u.getHeight(),width:u.getWidth()}};if(h.error)return Pe({},h);var y=function(e){var t=e.filter((function(t,r){return e.indexOf(t)===r})),r=1===t.length?t[0].toLowerCase():"video";return r}(h.sources.map((function(e){return e.kind})));return Pe(Pe({},h),{},{error:null,mediaType:y})}catch(v){throw v}}function Ae(e){var t=e.manifest,r=e.canvasIndex,n=e.key,a=e.motivation,i=e.duration;return be(ge({manifest:t,canvasIndex:r,key:n,motivation:a}),i,a)}function Le(e){if(void 0!==e)return e.split("#t=")[0]}function Ne(e,t){var r,n,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{var i=se(e);if((null==i?void 0:i.length)>0){var u=i[0].getCanvasByIndex(t).__jsonld.placeholderCanvas;if(!u)return a?null:(console.error("iiif-parser -> getPlaceholderCanvas() -> placeholderCanvas property not defined"),"This item cannot be played.");var o=ye(u.items,"painting");if(o.length>0){var l=o[0].getBody()[0];return a?r="image"==l.getType()?l.id:null:(r=l.getLabel().getValue()?ke(l.getLabel().getValue()):"This item cannot be played.",n=u.duration,le=n||oe),r}}}catch(e){throw e}}function De(e,t,r){var n=f.default[e],a=n?n.extensions[0]:e,i="",u="";Object.keys(t).length>1?(i=t[Object.keys(t)[0]][0],u=t.none[0]):u=i=ke(t);var o=i.includes("(machine generated)");return{id:r,label:"".concat(i," (.").concat(a,")"),filename:u,fileExt:a,isMachineGen:o}}function Be(e){try{var r=[],n=[],a=t.parseManifest(e).getRenderings(),i=se(e)[0].getCanvases();return null!=a&&null!=a&&a.map((function(e){var t=De(e.getFormat(),e.getProperty("label"),e.id);r.push(t)})),null!=i&&null!=i&&i.map((function(e,t){var r=e.__jsonld.rendering,a=[];r&&r.map((function(e){var t=De(e.format,e.label,e.id);a.push(t)}));var i=e.getLabel().getValue()||"Section "+(t+1);n.push({label:ke(i),files:a})})),{manifest:r,canvas:n}}catch(e){throw e}}function Fe(e,t){var r=[];return(null==e?void 0:e.length)>0?(e.map((function(e){var t,n=null===(t=e.getValue())||void 0===t?void 0:t.replace(/\n/g,"<br />"),a=d.default(n,Pe({},Me));r.push({label:e.getLabel(),value:a})})),r):(console.log("iiif-parser -> parseMetadata() -> no metadata in ",t),r)}function Ue(e,t){var r,n=[],a=e.getRequiredStatement();null!=a&&(null===(r=a.value)||void 0===r?void 0:r.length)>0&&(n=Fe([a],t));var i=e.getProperty("rights")||void 0;if(null!=i){var u=/^(https?:\/\/[^\s]+)|(www\.[^\s]+)/.test(i);n.push({label:"License",value:u?"<a href=".concat(i,">").concat(i,"</a>"):i})}return n}function qe(e){var r,n=null===(r=t.parseManifest(e).getProperty("behavior"))||void 0===r?void 0:r.includes("auto-advance");return void 0!==n&&n}function We(e){var r=Re(e),n=[],a=0,i=function e(t,i,u){var o,l=ke(t.getLabel().getValue()),c=t.getCanvasIds(),s=0,f=0,d=t.getDuration();if(null!=d){var p=d.start;s=d.end-p}var v=i==t.parentRange,m=!1,h=!1,y=void 0,g=void 0;if(c.length>0&&(null==r?void 0:r.length)>0){var b=r.filter((function(e){return e.canvasId===Le(c[0])}))[0];if(h=b.isEmpty,y=b.summary,g=b.homepage,m=!0,null!=b.range){var _=b.range,x=_.start,w=_.end;f=w-x,v&&(s=w-x)}}var k={label:l,summary:y,isTitle:0===c.length,rangeId:t.id,id:c.length>0?v?"".concat(c[0].split(",")[0],","):c[0]:void 0,isEmpty:h,isCanvas:v,itemIndex:v?u:void 0,canvasIndex:u,items:(null===(o=t.getRanges())||void 0===o?void 0:o.length)>0?t.getRanges().map((function(t){return e(t,i,u)})):[],duration:fe(s),isClickable:m,homepage:g,canvasDuration:f};return c.length>0&&(a++,v||(k.itemIndex=a),n.push(k)),k},u=t.parseManifest(e).getAllRanges();if(0===(null==u?void 0:u.length))return{structures:[],timespans:[]};var o=u[0],l=[],c=o.getRanges();return(null==c?void 0:c.length)>0&&c.map((function(e,t){"no-nav"!=e.getBehavior()&&(a=0,l.push(i(e,o,t+1)))})),{structures:l,timespans:n}}function Ve(e){if(!e)return null;var t=e.getTarget().split("#t="),r=E(t,2),n=r[0],a=r[1],i=e.getBody();return(null==i?void 0:i.length)>0&&"TextualBody"===i[0].getProperty("type")?{id:e.id,time:parseFloat(a),timeStr:fe(parseFloat(a),!0,!0),canvasId:n,value:i[0].getProperty("value")?i[0].getProperty("value"):""}:null}function ze(e){var r=e.manifestUrl,n=e.customErrorMessage,i=e.emptyManifestMessage,u=e.startCanvasId,o=e.startCanvasTime,l=e.children,c=e.manifest,f=s.default.useState(c),d=E(f,2),p=d[0],v=d[1],m=B(),h=G(),y=a.useErrorBoundary().showBoundary;return s.default.useEffect(J(Y.mark((function e(){var t;return Y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(ae=n||ne,ce(i),!p){e.next=6;break}m({manifest:p,type:"updateManifest"}),e.next=15;break;case 6:return t={},e.prev=7,e.next=10,fetch(r,t).then((function(e){if(200!=e.status&&201!=e.status)throw new Error("Failed to fetch Manifest. Please check again.");return e.json()})).then((function(e){v(e),m({manifest:e,type:"updateManifest"})})).catch((function(e){throw console.log("Error fetching manifest, ",e),new Error("Failed to fetch Manifest. Please check again.")}));case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(7),y(e.t0);case 15:case"end":return e.stop()}}),e,null,[[7,12]])}))),[]),s.default.useEffect((function(){if(p){m({autoAdvance:qe(p),type:"setAutoAdvance"});var e=function(e){try{return ke(e.label).includes("[Playlist]")}catch(e){return console.error("Cannot parse manfiest, ",e),!1}}(p);m({isPlaylist:e,type:"setIsPlaylist"});var r=function(e){var r=t.parseManifest(e).getService();return r&&"AnnotationService0"===r.getProperty("type")?r.id:null}(p);m({annotationService:r,type:"setAnnotationService"});var n=function(e,r,n){var a=t.parseManifest(e).getProperty("start"),i={};if(!a&&void 0===r&&void 0===n)return{type:"C",canvas:0,time:0};null!=r||null!=n?(i={id:r,selector:{type:"PointSelector",t:void 0===n?0:n},type:void 0===n?"Canvas":"SpecificResource"},null!=n&&(i.source=r)):a&&(i=t.parseManifest(e).getProperty("start"));var u=Re(e),o=function(e,t){var a,i=t;if(null!=u&&(null==u?void 0:u.length)>0){if(void 0===(a=void 0===e?0:u.findIndex((function(t){return t.canvasId===e})))||a<0)return console.error("iiif-parser -> getCustomStart() -> given canvas ID was not in Manifest, ",r),{currentIndex:0,startTime:0};var o=u[a];if(null!=o.range){var l=o.range,c=l.start,s=l.end;t>=c&&t<=s||(console.error("iiif-parser -> getCustomStart() -> given canvas start time is not within Canvas duration, ",n),i=0)}return{currentIndex:a,startTime:i}}return console.error("iiif-parser -> getCustomStart() -> no Canvases in given Manifest"),{currentIndex:0,startTime:0}};if(null!=i)switch(i.type){case"Canvas":var l=o(i.id,0);return{type:"C",canvas:l.currentIndex,time:l.startTime};case"SpecificResource":var c=i.selector.t;return{type:"SR",canvas:(l=o(i.source,c)).currentIndex,time:l.startTime}}}(p,u,o);"SR"==n.type&&h({currentTime:n.time,type:"setCurrentTime"}),m({canvasIndex:n.canvas,type:"switchCanvas"})}}),[p]),p?s.default.createElement(s.default.Fragment,null,l):s.default.createElement("p",null,"...Loading")}function He(e){var t=e.error,r=e.resetErrorBoundary;return s.default.createElement("div",{role:"alert",className:"ramp--error-message__alert"},s.default.createElement("span",{className:"ramp--error-message__message",dangerouslySetInnerHTML:{__html:t.message}}),s.default.createElement("button",{className:"ramp--error-message__reset-button",onClick:r},"Try again"))}ze.propTypes={manifest:te.object,customErrorMessage:te.string,emptyManifestMessage:te.string,manifestUrl:te.string,startCanvasId:te.string,startCanvasTime:te.number,children:te.node};var $e=function(e){e.message;var t=e.children;return s.default.createElement(a.ErrorBoundary,{FallbackComponent:He,onReset:function(e){}},t)};function Ge(e){var t=e.manifestUrl,r=e.manifest,n=e.customErrorMessage,a=e.emptyManifestMessage,i=e.startCanvasId,u=e.startCanvasTime,o=e.children;return t||r?s.default.createElement(N,null,s.default.createElement(H,null,s.default.createElement($e,null,s.default.createElement(ze,{manifestUrl:t,manifest:r,customErrorMessage:n,emptyManifestMessage:a,startCanvasId:i,startCanvasTime:u},o)))):s.default.createElement("p",null,"Please provide a valid manifest.")}$e.propTypes={message:te.string,children:te.object},Ge.propTypes={manifestUrl:te.string,manifest:te.object,customErrorMessage:te.string,emptyManifestMessage:te.string,startCanvasId:te.string,startCanvasTime:te.number},Ge.defaultProps={},g((function(e,t){!function(e){var t=r(e);function r(e){return e&&e.__esModule?e:{default:e}}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a={markerStyle:{width:"7px","border-radius":"30%","background-color":"red"},markerTip:{display:!0,text:function(e){return"Break: "+e.text},time:function(e){return e.time}},breakOverlay:{display:!1,displayTime:3,text:function(e){return"Break overlay: "+e.overlayText},style:{width:"100%",height:"20%","background-color":"rgba(0,0,0,0.7)",color:"white","font-size":"17px"}},onMarkerClick:function(e){},onMarkerReached:function(e,t){},markers:[]};function i(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?r:3&r|8).toString(16)}))}function u(e){var t,r={top:0,bottom:0,left:0,width:0,height:0,right:0};try{t=e.getBoundingClientRect()}catch(e){t=r}return t}var o=-1;function l(e){if(!t.default.mergeOptions){var r=function(e){return!!e&&"object"===(void 0===e?"undefined":n(e))&&"[object Object]"===toString.call(e)&&e.constructor===Object},l=function e(t,n){var a={};return[t,n].forEach((function(t){t&&Object.keys(t).forEach((function(n){var i=t[n];r(i)?(r(a[n])||(a[n]={}),a[n]=e(a[n],i)):a[n]=i}))})),a};t.default.mergeOptions=l}t.default.dom.createEl||(t.default.dom.createEl=function(e,r,n){var a=t.default.Player.prototype.dom.createEl(e,r);return n&&Object.keys(n).forEach((function(e){a.setAttribute(e,n[e])})),a});var c=t.default.mergeOptions(a,e),s={},f=[],d=o,p=this,v=null,m=null,h=o;function y(){f.sort((function(e,t){return c.markerTip.time(e)-c.markerTip.time(t)}))}function g(e){e.forEach((function(e){e.key=i(),p.el().querySelector(".vjs-progress-holder").appendChild(x(e)),s[e.key]=e,f.push(e)})),y()}function b(e){return c.markerTip.time(e)/p.duration()*100}function _(e,t){t.className="vjs-marker "+(e.class||""),Object.keys(c.markerStyle).forEach((function(e){t.style[e]=c.markerStyle[e]}));var r=e.time/p.duration();if((r<0||r>1)&&(t.style.display="none"),t.style.left=b(e)+"%",e.duration)t.style.width=e.duration/p.duration()*100+"%",t.style.marginLeft="0px";else{var n=u(t);t.style.marginLeft=n.width/2+"px"}}function x(e){var r=t.default.dom.createEl("div",{},{"data-marker-key":e.key,"data-marker-time":c.markerTip.time(e)});return _(e,r),r.addEventListener("click",(function(t){var r=!1;if("function"==typeof c.onMarkerClick&&(r=!1===c.onMarkerClick(e)),!r){var n=this.getAttribute("data-marker-key");p.currentTime(c.markerTip.time(s[n]))}})),c.markerTip.display&&E(r),r}function w(e){f.forEach((function(t){var r=p.el().querySelector(".vjs-marker[data-marker-key='"+t.key+"']"),n=c.markerTip.time(t);(e||r.getAttribute("data-marker-time")!==n)&&(_(t,r),r.setAttribute("data-marker-time",n))})),y()}function k(e){m&&(h=o,m.style.visibility="hidden"),d=o;var t=[];e.forEach((function(e){var r=f[e];if(r){delete s[r.key],t.push(e);var n=p.el().querySelector(".vjs-marker[data-marker-key='"+r.key+"']");n&&n.parentNode.removeChild(n)}})),t.reverse(),t.forEach((function(e){f.splice(e,1)})),y()}function E(e){e.addEventListener("mouseover",(function(){var t=s[e.getAttribute("data-marker-key")];if(v){c.markerTip.html?v.querySelector(".vjs-tip-inner").innerHTML=c.markerTip.html(t):v.querySelector(".vjs-tip-inner").innerText=c.markerTip.text(t),v.style.left=b(t)+"%";var r=u(v),n=u(e);v.style.marginLeft=-parseFloat(r.width/2)+parseFloat(n.width/4)+"px",v.style.visibility="visible"}})),e.addEventListener("mouseout",(function(){v&&(v.style.visibility="hidden")}))}function T(){v=t.default.dom.createEl("div",{className:"vjs-tip",innerHTML:"<div class='vjs-tip-arrow'></div><div class='vjs-tip-inner'></div>"}),p.el().querySelector(".vjs-progress-holder").appendChild(v)}function S(){if(c.breakOverlay.display&&!(d<0)){var e=p.currentTime(),t=f[d],r=c.markerTip.time(t);e>=r&&e<=r+c.breakOverlay.displayTime?(h!==d&&(h=d,m&&(m.querySelector(".vjs-break-overlay-text").innerHTML=c.breakOverlay.text(t))),m&&(m.style.visibility="visible")):(h=o,m&&(m.style.visibility="hidden"))}}function C(){m=t.default.dom.createEl("div",{className:"vjs-break-overlay",innerHTML:"<div class='vjs-break-overlay-text'></div>"}),Object.keys(c.breakOverlay.style).forEach((function(e){m&&(m.style[e]=c.breakOverlay.style[e])})),p.el().appendChild(m),h=o}function j(){I(),S(),e.onTimeUpdateAfterMarkerUpdate&&e.onTimeUpdateAfterMarkerUpdate()}function I(){if(f.length){var t=function(e){return e<f.length-1?c.markerTip.time(f[e+1]):p.duration()},r=p.currentTime(),n=o;if(d!==o){var a=t(d);if(r>=c.markerTip.time(f[d])&&r<a)return;if(d===f.length-1&&r===p.duration())return}if(r<c.markerTip.time(f[0]))n=o;else for(var i=0;i<f.length;i++)if(a=t(i),r>=c.markerTip.time(f[i])&&r<a){n=i;break}n!==d&&(n!==o&&e.onMarkerReached&&e.onMarkerReached(f[n],n),d=n)}}function P(){c.markerTip.display&&T(),p.markers.removeAll(),g(c.markers),c.breakOverlay.display&&C(),j(),p.on("timeupdate",j),p.off("loadedmetadata")}p.on("loadedmetadata",(function(){P()})),p.markers={getMarkers:function(){return f},next:function(){for(var e=p.currentTime(),t=0;t<f.length;t++){var r=c.markerTip.time(f[t]);if(r>e){p.currentTime(r);break}}},prev:function(){for(var e=p.currentTime(),t=f.length-1;t>=0;t--){var r=c.markerTip.time(f[t]);if(r+.5<e)return void p.currentTime(r)}},add:function(e){g(e)},remove:function(e){k(e)},removeAll:function(){for(var e=[],t=0;t<f.length;t++)e.push(t);k(e)},updateTime:function(e){w(e)},reset:function(e){p.markers.removeAll(),g(e)},destroy:function(){p.markers.removeAll(),m&&m.remove(),v&&v.remove(),p.off("timeupdate",S),delete p.markers}}}t.default.registerPlugin("markers",l)}(p.default)}));var Je,Ze,Ke=!1,Ye=!1,Xe=!1,Qe=!1,et=!1,tt=!1,rt=!1,nt=!1,at=!1,it=!1,ut=!1,ot=!1,lt=!1,ct=window.navigator&&window.navigator.userAgentData;if(ct&&ct.platform&&ct.brands&&(Ye="Android"===ct.platform,Xe=Boolean(ct.brands.find((function(e){return"Microsoft Edge"===e.brand}))),Qe=Boolean(ct.brands.find((function(e){return"Chromium"===e.brand}))),et=!Xe&&Qe,(ct.brands.find((function(e){return"Chromium"===e.brand}))||{}).version,ct.platform,at=navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&!window.matchMedia("(pointer: fine").matches,nt=ct.mobile||Ye||at),!Qe){var st=window.navigator&&window.navigator.userAgent||"";Ke=/iPod/i.test(st),(Ze=st.match(/OS (\d+)_/i))&&Ze[1]&&Ze[1],Ye=/Android/i.test(st),function(){var e=st.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!e)return null;var t=e[1]&&parseFloat(e[1]),r=e[2]&&parseFloat(e[2]);t&&r&&parseFloat(e[1]+"."+e[2])}(),/Firefox/i.test(st),Xe=/Edg/i.test(st),Qe=/Chrome/i.test(st)||/CriOS/i.test(st),et=!Xe&&Qe,function(){var e=st.match(/(Chrome|CriOS)\/(\d+)/);e&&e[2]&&parseFloat(e[2])}(),Je=/MSIE\s(\d+)\.\d/.exec(st),!(Je&&parseFloat(Je[1]))&&/Trident\/7.0/i.test(st)&&/rv:11.0/.test(st)&&11,ot=/Tizen/i.test(st),lt=/Web0S/i.test(st),tt=/Safari/i.test(st)&&!et&&!Ye&&!Xe&&!ot&&!lt,/Windows/i.test(st),it=/iPhone/i.test(st)&&!rt,ut=it||rt||Ke,at=navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&!window.matchMedia("(pointer: fine").matches,rt=at&&!Ye&&!it,nt=Ye||ut||it||at||/Mobi/i.test(st)}var ft=function(t,r){var n=e.useState((function(){return function(e,t){try{return JSON.parse(localStorage.getItem(e))||t}catch(e){return t}}(t,r)})),a=E(n,2),i=a[0],u=a[1];return e.useEffect((function(){try{localStorage.setItem(t,JSON.stringify(i))}catch(e){}}),[t,i]),[i,u]},dt=y(g((function(e){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.__esModule=!0,e.exports.default=e.exports}))),pt=y(g((function(e){function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,j(n.key),n)}}e.exports=function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e},e.exports.__esModule=!0,e.exports.default=e.exports}))),vt=g((function(e){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.__esModule=!0,e.exports.default=e.exports})),mt=y(vt),ht=g((function(e){function t(r,n){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},e.exports.__esModule=!0,e.exports.default=e.exports,t(r,n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})),yt=y(g((function(e){e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ht(e,t)},e.exports.__esModule=!0,e.exports.default=e.exports}))),gt=g((function(e){var t=T.default;e.exports=function(e,r){if(r&&("object"===t(r)||"function"==typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return vt(e)},e.exports.__esModule=!0,e.exports.default=e.exports})),bt=y(gt),_t=g((function(e){function t(r){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.__esModule=!0,e.exports.default=e.exports,t(r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})),xt=y(_t);function wt(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return kt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kt(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){o=!0,i=e},f:function(){try{u||null==r.return||r.return()}finally{if(o)throw i}}}}function kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Et(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=xt(e);if(t){var a=xt(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return bt(this,r)}}var Tt=p.default.getComponent("Component"),St=function(e){yt(r,Tt);var t=Et(r);function r(e,n){var a;return dt(this,r),(a=t.call(this,e,n)).addClass("vjs-custom-progress-bar"),a.setAttribute("data-testid","videojs-custom-progressbar"),a.setAttribute("tabindex",0),a.mount=a.mount.bind(mt(a)),a.handleTimeUpdate=a.handleTimeUpdate.bind(mt(a)),a.initProgressBar=a.initProgressBar.bind(mt(a)),a.player=e,a.options=n,a.currentTime=n.currentTime,a.times=n.targets[n.srcIndex],e.on("loadstart",(function(){var e;a.options.currentTime=a.player.currentTime(),a.options.srcIndex=a.player.srcIndex||0,a.options.targets=(null===(e=a.player.targets)||void 0===e?void 0:e.length)>0?a.player.targets:a.options.targets,a.mount()})),e.on("canplay",(function(){a.options.duration=a.player.duration(),a.initProgressBar()})),a}return pt(r,[{key:"initProgressBar",value:function(){var e,t=this.options,r=t.targets,n=t.duration,a=r[t.srcIndex],i=a.start,u=a.end,o=i,l=u,c=r.length>1,s=r.reduce((function(e,t){return e+t.duration}),0);if(c)e=Math.min(100,Math.max(0,(u-i)/s*100));else{var f=100*o/n,d=100*(n-l)/n;e=100-f-d;var p=document.getElementById("left-block"),v=document.getElementById("right-block"),m=document.getElementsByClassName("vjs-custom-progress-inactive");p&&(p.style.width=f+"%"),v&&(v.style.width=d+"%");var h,y=wt(m);try{for(y.s();!(h=y.n()).done;){var g=h.value,b=100*r[g.dataset.srcindex].duration/n;g.style.width=b+"%"}}catch(e){y.e(e)}finally{y.f()}}document.getElementById("slider-range")&&(document.getElementById("slider-range").style.width=e+"%")}},{key:"handleTimeUpdate",value:function(e){var t=this.player,r=this.options,n=this.el_,a=r.srcIndex,i=r.targets,u=i[a],o=u.start,l=u.end;if(n&&t){var c=i.filter((function(e,t){return t>a}));e<o&&t.currentTime(o),e>=l&&!t.paused()&&!t.isDisposed()&&(0==c.length&&r.nextItemClicked(0,i[0].start),t.pause(),t.trigger("ended"),t.one("play",(function(){var e=t.currentTime();e<l?t.currentTime(e):t.currentTime(o)})));var s,f=wt(document.getElementsByClassName("vjs-custom-progress-inactive"));try{for(f.s();!(s=f.n()).done;){var d=s.value;d.dataset.srcindex<a&&d.style.setProperty("background","#2A5459")}}catch(e){f.e(e)}finally{f.f()}var p=e-o,v=Math.min(100,Math.max(0,100*p/(l-o)));document.documentElement.style.setProperty("--range-progress","calc(".concat(v,"%)"))}}},{key:"mount",value:function(){v.default.render(s.default.createElement(Ct,{player:this.player,handleTimeUpdate:this.handleTimeUpdate,initCurrentTime:this.options.currentTime,times:this.times,srcIndex:this.options.srcIndex,targets:this.options.targets,nextItemClicked:this.options.nextItemClicked}),this.el())}}]),r}();function Ct(e){var t,r=e.player,n=e.handleTimeUpdate,a=e.initCurrentTime,i=e.times,u=e.srcIndex,o=e.targets,l=e.nextItemClicked,c=s.default.useState(a),f=E(c,2),d=f[0],p=f[1],v=s.default.useState(r.currentTime()),m=E(v,2),h=m[0],y=m[1],g=s.default.useRef(),b=s.default.useRef(),_=s.default.useRef(),x=s.default.useState([]),w=E(x,2),k=w[0],T=w[1],S=s.default.useState([]),C=E(S,2),j=C[0],I=C[1],P=s.default.useState(i),M=E(P,2),R=M[0],O=M[1],A=s.default.useState(0),L=E(A,2),N=L[0],D=L[1],B=s.default.useState(o),F=E(B,2),U=F[0],q=F[1],W=o.length>1,V=s.default.useRef(a),z=s.default.useRef(d),H=function(e){z.current=e,p(e)};s.default.useEffect((function(){var e;(null===(e=r.targets)||void 0===e?void 0:e.length)>0&&q(r.targets),g.current&&_.current&&(g.current.style.top=-g.current.offsetHeight-6*_.current.offsetHeight+"px");var t=U.filter((function(e,t){return t>u})),n=U.filter((function(e,t){return t<u}));I(t),T(n)}),[]),s.default.useEffect((function(){q(o),O(o[u]),D(u);var e=U.filter((function(e,t){return t>u})),a=U.filter((function(e,t){return t<u}));I(e),T(a);var i=r.currentTime();H(i),y(i+R.altStart),t=setInterval((function(){$()}),100);var l,c=_.current.offsetWidth/(R.end-R.start),s=z.current*c,f=wt(document.getElementsByClassName("vjs-custom-progress-inactive"));try{for(f.s();!(l=f.n()).done;){var d=l.value;d.dataset.srcindex<u&&(s+=d.offsetWidth)}}catch(e){f.e(e)}finally{f.f()}(rt||nt)&&(g.current.style.display="none"),g.current.style.left=s-g.current.offsetWidth/2+"px",n(V.current)}),[r.src(),o]);var $=function(){if(!r.isDisposed()&&!r.ended()&&null!=r){var e,t,a=r.hasClass("vjs-ios-native-fs");V.current>0&&0==r.currentTime()?(e=V.current,r.currentTime(V.current)):e=r.currentTime(),a||H(e),n(e),t=0,V.current=t}};r.on("dispose",(function(){clearInterval(t)})),r.on("fullscreenchange",(function(e){r.isFullscreen()||H(r.currentTime())}));var G=function(e){var t=h;N>0&&(t-=o[N].altStart);var n=R.start,a=R.end;t>=n&&t<=a&&(r.currentTime(t),H(t))},J=function(e,t){var r=u;t&&(r=e.target.dataset.srcindex);var n=function(e,t){var r=e.nativeEvent.offsetX;if(r&&null!=r){var n=r/e.target.clientWidth*(e.target.max-e.target.min);return null!=t&&(n+=U[t].altStart),n}}(e,r);D(r),y(n),g.current.innerHTML=K(n);var a=e.nativeEvent.offsetX-g.current.offsetWidth/2;b.current&&(a+=b.current.offsetWidth);var i,o=wt(document.querySelectorAll('input[type=range][class^="vjs-custom-progress"]'));try{for(o.s();!(i=o.n()).done;){var l=i.value;l.dataset.srcindex<r&&(a+=l.offsetWidth)}}catch(e){o.e(e)}finally{o.f()}"touch"!=e.pointerType&&(g.current.style.left=a+"px")},Z=function(e){var t=parseInt(e.target.dataset.srcindex),r=h;t>0&&(r-=U[t-1].duration),l(t,r)},K=function(e){var t=R.start,r=R.end;return W||e>=t&&e<=r?fe(e):e>=r?fe(r):e<=t?fe(t):void 0},Y=function(e){J(e,!1)},X=function(e){var t=[];return e.map((function(e){var r,n=Math.min(100,Math.max(0,e.duration/(r=U.reduce((function(e,t){return e+t.duration}),0),isNaN(r)&&(r=U[0].end),r)*100));t.push(s.default.createElement("input",{type:"range","aria-label":"Progress bar","aria-valuemax":e.end,"aria-valuemin":e.start,min:e.start,max:e.end,role:"slider","data-srcindex":e.sIndex,className:"vjs-custom-progress-inactive",onMouseMove:function(e){return J(e,!0)},onClick:Z,key:e.sIndex,tabIndex:0,style:{width:"".concat(n,"%")}}))})),t};return s.default.createElement("div",{className:"vjs-progress-holder vjs-slider vjs-slider-horizontal"},s.default.createElement("span",{className:"tooltiptext",ref:g,"aria-hidden":!0}),s.default.createElement("div",{className:"vjs-custom-progress-container"},k.length>0?X(k):s.default.createElement("div",{className:"block-stripes",role:"presentation",ref:b,id:"left-block",style:{width:"0%"}}),s.default.createElement("input",{type:"range","aria-label":"Progress bar","aria-valuemax":R.end,"aria-valuemin":R.start,"aria-valuenow":d,max:R.end,min:R.start,value:d,role:"slider","data-srcindex":u,className:"vjs-custom-progress",onChange:G,onClick:G,onTouchEnd:Y,onTouchStart:Y,onMouseDown:function(e){return J(e,!1)},onPointerMove:function(e){return J(e,!1)},id:"slider-range",ref:_}),j.length>0?X(j):s.default.createElement("div",{className:"block-stripes",role:"presentation",id:"right-block",style:{width:"0%"}})))}function jt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=xt(e);if(t){var a=xt(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return bt(this,r)}}Tt.registerComponent("VideoJSProgress",St);var It=p.default.getComponent("Component"),Pt=function(e){yt(r,It);var t=jt(r);function r(e,n){var a;return dt(this,r),(a=t.call(this,e,n)).addClass("vjs-time-control"),a.setAttribute("role","presentation"),a.mount=a.mount.bind(mt(a)),a.player=e,a.options=n,e.on("loadstart",(function(){a.mount()})),a.on("dispose",(function(){v.default.unmountComponentAtNode(a.el())})),a}return pt(r,[{key:"mount",value:function(){v.default.render(s.default.createElement(Mt,{player:this.player,options:this.options}),this.el())}}]),r}();function Mt(e){var t,r=e.player,n=e.options,a=n.targets,i=s.default.useState(r.currentTime()),u=E(i,2),o=u[0],l=u[1],c=s.default.useRef(n.currentTime);s.default.useEffect((function(){return t=setInterval((function(){f()}),100),function(){clearInterval(t)}}),[]);var f=function(){if(!r.isDisposed()){var e,t=r.hasClass("vjs-ios-native-fs");e=c.current>0&&0==r.currentTime()?c.current:r.currentTime();var n,i=a[r.srcIndex],u=i.start,o=i.altStart;o!=u&&r.srcIndex>0&&(e+=o),t||l(e),n=0,c.current=n}};return r.on("fullscreenchange",(function(e){r.isFullscreen()||l(r.currentTime())})),s.default.createElement("span",{className:"vjs-current-time-display",role:"presentation"},fe(o))}function Rt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=xt(e);if(t){var a=xt(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return bt(this,r)}}It.registerComponent("VideoJSCurrentTime",Pt);var Ot=p.default.getComponent("MenuButton"),At=p.default.getComponent("MenuItem"),Lt=function(e){yt(r,Ot);var t=Rt(r);function r(e,n){var a;return dt(this,r),(a=t.call(this,e,n)).addClass("vjs-file-download-icon"),a.setAttribute("data-testid","videojs-file-download"),a}return pt(r,[{key:"createItems",value:function(){var e=this.options_,t=this.player_,r=e.files;return(null==r?void 0:r.length)>0?r.map((function(e){var r=new At(t,{label:e.label});return r.handleClick=function(){me(e.id,e.filename,e.fileExt)},r})):[]}}]),r}();p.default.registerComponent("VideoJSFileDownload",Lt);var Nt=g((function(e){function t(){return e.exports=t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},e.exports.__esModule=!0,e.exports.default=e.exports,t.apply(this,arguments)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})),Dt=y(Nt);function Bt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=xt(e);if(t){var a=xt(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return bt(this,r)}}var Ft=p.default.getComponent("Component"),Ut=function(){return s.default.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",transform:"rotate(0)",style:{fill:"white",height:"1.25rem",width:"1.25rem"}},s.default.createElement("g",{strokeWidth:"0",strokeLinecap:"round",strokeLinejoin:"round"},s.default.createElement("path",{d:"M4 20L15.3333 12L4 4V20Z",fill:"#ffffff"}),s.default.createElement("path",{d:"M20 4H17.3333V20H20V4Z",fill:"#ffffff"})))},qt=function(e){yt(r,Ft);var t=Bt(r);function r(e,n){var a;return dt(this,r),(a=t.call(this,e,n)).setAttribute("data-testid","videojs-next-button"),a.mount=a.mount.bind(mt(a)),a.options=n,a.player=e,e.on("loadstart",(function(){a.mount()})),a.on("dispose",(function(){v.default.unmountComponentAtNode(a.el())})),a}return pt(r,[{key:"mount",value:function(){v.default.render(s.default.createElement(Wt,Dt({},this.options,{player:this.player})),this.el())}}]),r}();function Wt(e){var t=e.lastCanvasIndex,r=e.switchPlayer,n=e.playerFocusElement,a=e.player,i=s.default.useRef(),u=s.default.useState(a.canvasIndex||0),o=E(u,2),l=o[0],c=o[1];s.default.useEffect((function(){a&&null!=a&&c(a.canvasIndex)}),[a.src()]),s.default.useEffect((function(){"nextBtn"==n&&i.current.focus()}),[]);var f=function(e){l!=t&&r(l+1,!0,e?"nextBtn":"")};return s.default.createElement("div",{className:"vjs-button vjs-control"},s.default.createElement("button",{className:"vjs-button vjs-next-button",role:"button",ref:i,tabIndex:0,title:"Next",onClick:function(){return f(!1)},onKeyDown:function(e){32!==e.which&&13!==e.which||(e.stopPropagation(),f(!0))}},s.default.createElement(Ut,null)))}function Vt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=xt(e);if(t){var a=xt(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return bt(this,r)}}p.default.registerComponent("VideoJSNextButton",qt);var zt=p.default.getComponent("Component"),Ht=function(){return s.default.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{fill:"white",height:"1.25rem",width:"1.25rem"}},s.default.createElement("g",{strokeWidth:"0",strokeLinecap:"round",strokeLinejoin:"round"},s.default.createElement("path",{d:"M20 4L8.66667 12L20 20V4Z",fill:"#ffffff"}),s.default.createElement("path",{d:"M4 20H6.66667V4H4V20Z",fill:"#ffffff"})))},$t=function(e){yt(r,zt);var t=Vt(r);function r(e,n){var a;return dt(this,r),(a=t.call(this,e,n)).setAttribute("data-testid","videojs-previous-button"),a.mount=a.mount.bind(mt(a)),a.options=n,a.player=e,e.on("loadstart",(function(){a.mount()})),a.on("dispose",(function(){v.default.unmountComponentAtNode(a.el())})),a}return pt(r,[{key:"mount",value:function(){v.default.render(s.default.createElement(Gt,Dt({},this.options,{player:this.player})),this.el())}}]),r}();function Gt(e){var t=e.switchPlayer,r=e.playerFocusElement,n=e.player,a=s.default.useRef(),i=s.default.useState(n.canvasIndex||0),u=E(i,2),o=u[0],l=u[1];s.default.useEffect((function(){n&&null!=n&&l(n.canvasIndex)}),[n.src()]),s.default.useEffect((function(){"previousBtn"==r&&a.current.focus()}),[]);var c=function(e){o>-1&&0!=o?t(o-1,!0,e?"previousBtn":""):0==o&&n.currentTime(0)};return s.default.createElement("div",{className:"vjs-button vjs-control"},s.default.createElement("button",{className:"vjs-button vjs-previous-button",role:"button",ref:a,tabIndex:0,title:0==o?"Replay":"Previous",onClick:function(){return c(!1)},onKeyDown:function(e){32!==e.which&&13!==e.which||(e.stopPropagation(),c(!0))}},s.default.createElement(Ht,null)))}function Jt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=xt(e);if(t){var a=xt(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return bt(this,r)}}zt.registerComponent("VideoJSPreviousButton",$t);var Zt=p.default.getComponent("Component"),Kt=function(e){yt(r,Zt);var t=Jt(r);function r(e,n){var a;return dt(this,r),(a=t.call(this,e,n)).setAttribute("data-testid","videojs-track-scrubber-button"),a.mount=a.mount.bind(mt(a)),a.options=n,a.player=e,a.options.trackScrubberRef.current&&a.el_&&(e.on("loadstart",(function(){a.mount()})),a.on("dispose",(function(){v.default.unmountComponentAtNode(a.el())}))),a}return pt(r,[{key:"mount",value:function(){v.default.render(s.default.createElement(Qt,{player:this.player,trackScrubberRef:this.options.trackScrubberRef,timeToolRef:this.options.timeToolRef,isPlaylist:this.options.isPlaylist}),this.el())}}]),r}(),Yt=function(e){var t=e.scale;return s.default.createElement("svg",{viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",style:{fill:"white",height:"1.25rem",width:"1.25rem",scale:t}},s.default.createElement("g",{strokeWidth:"0",strokeLinecap:"round",strokeLinejoin:"round"},s.default.createElement("path",{fill:"#ffffff",fillRule:"evenodd",d:"M4 9a5 5 0 1110 0A5 5 0 014 9zm5-7a7 7 0 104.2 12.6.999.999  0 00.093.107l3 3a1 1 0 001.414-1.414l-3-3a.999.999 0 00-.107-.093A7 7 0 009 2zM8 6.5a1 1 0 112 0V8h1.5a1  1 0 110 2H10v1.5a1 1 0 11-2 0V10H6.5a1 1 0 010-2H8V6.5z"})))},Xt=function(e){var t=e.scale;return s.default.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{fill:"white",height:"1.25rem",width:"1.25rem",scale:t}},s.default.createElement("g",{strokeWidth:"0",strokeLinecap:"round",strokeLinejoin:"round"},s.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4 11C4 7.13401 7.13401 4 11 4C14.866 4 18 7.13401 18 11C18 14.866  14.866 18 11 18C7.13401 18 4 14.866 4 11ZM11 2C6.02944 2 2 6.02944 2 11C2 15.9706 6.02944 20 11 20C13.125 20 15.078  19.2635 16.6177 18.0319L20.2929 21.7071C20.6834 22.0976 21.3166 22.0976 21.7071 21.7071C22.0976 21.3166 22.0976  20.6834 21.7071 20.2929L18.0319 16.6177C19.2635 15.078 20 13.125 20 11C20 6.02944 15.9706 2 11 2Z",fill:"#ffffff"}),s.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7 11C7 10.4477 7.44772 10 8 10H14C14.5523 10 15 10.4477 15 11C15  11.5523 14.5523 12 14 12H8C7.44772 12 7 11.5523 7 11Z",fill:"#ffffff"})))};function Qt(e){var t,r=e.player,n=e.trackScrubberRef,a=e.timeToolRef,i=e.isPlaylist,u=s.default.useState(!0),o=E(u,2),l=o[0],c=o[1],f=s.default.useState({}),d=E(f,2),p=d[0],v=d[1],m=s.default.useRef(),h=function(e){m.current=e,v(e)};s.default.useEffect((function(){(rt||nt)&&a.current&&(a.current.style.display="none"),t=setInterval((function(){g()}),100),r.canvasIsEmpty&&c(!0)}),[r.src(),r.srcIndex,r.canvasIsEmpty]);var y=function(){n.current&&m.current&&(r.isFullscreen()&&r.exitFullscreen(),c((function(e){return!e})))};s.default.useEffect((function(){if(n.current)if(l)n.current.classList.add("hidden");else{b(),n.current.classList.remove("hidden");var e=!1,t=E(n.current.children,3);t[0];var r=t[1];t[2],r.addEventListener("mouseenter",(function(e){x(e)})),r.addEventListener("pointerup",(function(t){e&&w(t)})),r.addEventListener("pointermove",(function(t){x(t),e=!0})),r.addEventListener("pointerdown",(function(t){1===t.which&&(w(t),e=!1)}))}}),[l]),r.on("fullscreenchange",(function(){r.isFullscreen()&&!l&&c((function(e){return!e}))})),r.on("dispose",(function(){clearInterval(t)}));var g=function(){var e;if(!r.isDisposed()&&!r.ended()){if(r.markers&&(null===(e=r.markers.getMarkers())||void 0===e?void 0:e.length)>0&&!i){var t=r.markers.getMarkers()[0];t.key!=(null==p?void 0:p.key)&&h(t)}else void 0===p.key&&h({duration:r.playableDuration,time:r.altStart,key:"",text:"Complete media file"});var n=r.currentTime();n=r.srcIndex&&r.srcIndex>0?n+r.altStart:n,_(n,r)}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(n.current){var r=E(n.current.children,3),a=r[0];r[1];var i=r[2];document.documentElement.style.setProperty("--range-scrubber","calc(".concat(t,"%)")),i.innerHTML=fe(m.current.duration);var u=!isNaN(e)&&e>0?e:0;a.innerHTML=fe(u)}},_=function(e,t){var r;if(!m.current&&(t.markers&&(null===(r=t.markers.getMarkers())||void 0===r?void 0:r.length)>0)){var n=t.markers.getMarkers()[0];n.key!=(null==p?void 0:p.key)&&h(n)}var a=t.altStart,i=t.srcIndex>0?e-m.current.time+a:e-m.current.time,u=Math.min(100,Math.max(0,100*i/m.current.duration));b(i,u)},x=function(e){if(a.current){var t=k(e);if(isFinite(t)){var r=e.offsetX-a.current.offsetWidth/2;a.current.style.left=r+"px",a.current.innerHTML=fe(t)}}},w=function(e){if(m.current){var t=k(e);if(null!=t){var n=Math.min(100,Math.max(0,t/m.current.duration*100));document.documentElement.style.setProperty("--range-scrubber","calc(".concat(n,"%)"));var a=r.srcIndex&&r.srcIndex>0?t-m.current.time:t+m.current.time;r.currentTime(a)}}},k=function(e){if(m.current){var t=e.offsetX;if(t&&null!=t)return t/e.target.clientWidth*m.current.duration}};return s.default.createElement("div",{className:"vjs-button vjs-control"},s.default.createElement("button",{className:"vjs-button vjs-track-scrubber-button",role:"button",tabIndex:0,title:"Toggle track scrubber",onClick:y,onKeyDown:function(e){32!==e.which&&13!==e.which||(e.preventDefault(),y(),e.stopPropagation())}},l&&s.default.createElement(Yt,{scale:"0.9"}),!l&&s.default.createElement(Xt,{scale:"0.9"})))}function er(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return tr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return tr(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){o=!0,i=e},f:function(){try{u||null==r.return||r.return()}finally{if(o)throw i}}}}function tr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function rr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function nr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rr(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ar(e){var t=e.isVideo,r=e.isPlaylist,n=e.trackScrubberRef,a=e.scrubberTooltipRef,i=e.tracks,u=e.placeholderText,o=e.renderingFiles,l=e.enableFileDownload,f=e.options,d=$(),v=G(),m=D(),h=B(),y=m.canvasDuration,g=m.canvasIndex,b=m.currentNavItem,_=m.hasMultiItems,x=m.srcIndex,w=m.targets,k=m.autoAdvance,T=m.playlist,S=m.structures,C=m.canvasSegments,j=m.hasStructure,I=m.canvasIsEmpty,P=d.isClicked,M=d.isEnded,R=d.isPlaying,O=d.player,A=d.currentTime,L=s.default.useState(g),N=E(L,2),F=N[0],U=N[1],q=s.default.useState(!1),W=E(q,2),V=W[0],z=W[1],H=s.default.useState(""),Z=E(H,2),K=Z[0],X=Z[1],Q=ft("startVolume",1),ee=E(Q,2),te=ee[0],re=ee[1],ne=ft("startQuality",null),ae=E(ne,2),ie=ae[0],ue=ae[1],oe=ft("startMuted",!1),le=E(oe,2),ce=le[0],se=le[1],fe=s.default.useRef(null),de=s.default.useRef(null),pe=s.default.useRef();pe.current=k;var me=s.default.useRef();me.current=x;var ye=s.default.useRef();ye.current=K;var ge=function(e){X(e),ye.current=e},be=s.default.useRef();be.current=A;var _e=s.default.useRef();_e.current=V;var xe=function(e){z(e),_e.current=e},we=s.default.useRef();we.current=b;var ke=s.default.useRef();ke.current=I;var Ee=s.default.useRef();Ee.current=y;var Te=s.default.useRef();Te.current=R;var Ce=s.default.useRef();Ce.current=M;var je=s.default.useRef();je.current=g;var Ie=function(){var e=J(Y.mark((function e(t){var r,n;return Y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e){return Promise.resolve().then((function(){return c(require(e))}))}("../../../../node_modules/video.js/dist/lang/".concat(t,".json"));case 3:return r=e.sent,e.abrupt("return",r);case 7:return e.prev=7,e.t0=e.catch(0),console.error("".concat(t," is not available, defaulting to English")),e.next=12,Promise.resolve().then((function(){return Un}));case 12:return n=e.sent,e.abrupt("return",n);case 14:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),Pe=s.default.useRef();Pe.current=C;var Me=s.default.useRef();Me.current=S;var Re="";Re=Ye?"video-js vjs-big-play-centered android":at&&!ut||rt?"video-js vjs-big-play-centered tablet":"video-js vjs-big-play-centered",s.default.useEffect((function(){return function(){null!=de.current&&(de.current.dispose(),document.removeEventListener("keydown",Se),xe(!1))}}),[]),s.default.useEffect(J(Y.mark((function e(){var t,r,n,a,i,u;return Y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(U(o=g),je.current=o,Be(f.sources),de.current||!((null===(t=f.sources)||void 0===t?void 0:t.length)>0)){e.next=12;break}return e.next=5,Ie(f.language).then((function(e){n=JSON.stringify(e)}));case 5:a=JSON.parse(n),Oe(),p.default.addLanguage(f.language,a),i=de.current=p.default(fe.current,f,(function(){Ne(de.current)})),v({player:i,type:"updatePlayer"}),e.next=13;break;case 12:de.current&&(null===(r=f.sources)||void 0===r?void 0:r.length)>0&&(u=de.current,xe(!1),Ae(u),Le(u),v({player:u,type:"updatePlayer"}));case 13:case"end":return e.stop()}var o}),e)}))),[f.sources,fe]),s.default.useEffect((function(){de.current&&(Te.current&&de.current.pause(),de.current.audioOnlyMode(!1),de.current.canvasIsEmpty=!0,de.current.aspectRatio("16:9"))}),[I]);var Oe=function(){(null==i?void 0:i.length)>0&&fe.current&&i.map((function(e){var t=document.createElement("track");t.setAttribute("key",e.key),t.setAttribute("src",e.src),t.setAttribute("kind",e.kind),t.setAttribute("label",e.label),t.setAttribute("srcLang",e.srclang),fe.current.appendChild(t)}))},Ae=function(e){e.src(f.sources),e.poster(f.poster),e.canvasIndex=je.current,e.srcIndex=x,e.targets=w,e.duration(y),e.canvasIsEmpty=ke.current;for(var r=e.remoteTextTracks(),u=r.length;u--;)e.removeRemoteTextTrack(r[u]);if(i.forEach((function(t){e.addRemoteTextTrack(t,!1)})),null!=e.getChild("controlBar")&&!I){var c=e.getChild("controlBar");if(j||T.isPlaylist){if(!c.getChild("videoJSTrackScrubber")){var s=c.children().findIndex((function(e){return"DurationDisplay"==e.name_}))||6;c.addChild("videoJSTrackScrubber",{trackScrubberRef:n,timeToolRef:a},s+1)}}else c.removeChild("videoJSTrackScrubber");if(t?(e.audioOnlyMode(!1),e.removeClass("vjs-audio"),e.aspectRatio("16:9"),e.addChild("bigPlayButton")):(e.audioOnlyMode(!0),e.addClass("vjs-audio"),e.height(e.controlBar.height()),e.removeChild("bigPlayButton")),!nt){var d=c.children().findIndex((function(e){return"VolumePanel"==e.name_}));c.removeChild("volumePanel"),t?c.addChild("volumePanel",{inline:!1},d):c.addChild("volumePanel",{inline:!0},d),e.trigger("volumechange")}if(l&&(c.removeChild("videoJSFileDownload"),(null==o?void 0:o.length)>0)){var p={title:"Download Files",controlText:"Alternate resource download",files:o};t?c.addChild("videoJSFileDownload",nr({},p),c.children().length-1):c.addChild("videoJSFileDownload",nr({},p))}}},Le=function(e){e.one("loadedmetadata",(function(){if(p.default.log("Player loadedmetadata"),e.duration(Ee.current),Ce.current?e.currentTime(0):e.currentTime(A),Ce.current||Te.current){var r=e.play();void 0!==r&&r.then((function(e){})).catch((function(e){}))}t&&De(e);var n=he(f.sources[0].src,Ee.current);null!=n?(e.playableDuration=n.end-n.start,e.altStart=n.start):(e.playableDuration=Ee.current,e.altStart=w[x].altStart),xe(!0)}))},Ne=function(e){e.on("ready",(function(){p.default.log("Player ready"),(nt||rt)&&e.controlBar.addClass("vjs-mobile-visible"),e.muted(ce),e.volume(te),e.canvasIndex=je.current,e.srcIndex=x,e.markers&&(r?e.markers({markerTip:{display:!0,text:function(e){return e.text}},markerStyle:{"border-radius":0,height:"0.5em",width:"0.5em",transform:"rotate(-45deg)",top:"4px",content:"","border-style":"solid","border-width":"0.25em 0.25em 0 0","background-color":"transparent"},markers:[]}):e.markers({markerTip:{display:!0,text:function(e){return e.text}},markerStyle:{opacity:"0.5","background-color":"#80A590","border-radius":0,height:"16px",top:"-7px"},markers:[]}))})),Le(e),e.on("pause",(function(){ke.current||v({isPlaying:!1,type:"setPlayingStatus"})})),e.on("canplay",(function(){v({isEnded:!1,type:"setIsEnded"})})),e.on("play",(function(){v({isPlaying:!0,type:"setPlayingStatus"})})),e.on("timeupdate",(function(){qe()})),e.on("ended",(function(){v({isEnded:!0,type:"setIsEnded"}),Ue()})),e.on("volumechange",(function(){se(e.muted()),re(e.volume())})),e.on("qualityRequested",(function(e,t){ue(t.label)})),document.addEventListener("keydown",(function(t){Se(t,e,ke.current)}))},De=function(e){var t,r=e.textTracks();if(nt&&!Ye&&r.on("addtrack",(function(){for(var t=0;t<r.length;t++)""===r[t].language&&""===r[t].label&&e.textTracks().removeTrack(r[t]),0==t&&(r[t].mode="showing")})),(null===(t=r.tracks_)||void 0===t?void 0:t.length)>0){var n=r.tracks_.filter((function(e){return"subtitles"===e.kind||"captions"===e.kind}));(null==n?void 0:n.length)>0&&(n[0].mode="showing",Fe(!0))}r.on("change",(function(){for(var e=[],t=0;t<r.length;t++)e.push(r[t].mode);var n=!!e.includes("showing");Fe(n)}))};s.default.useEffect((function(){var e,t=de.current;if((null===(e=T.markers)||void 0===e?void 0:e.length)>0&&_e.current){var r=T.markers.filter((function(e){return e.canvasIndex===g}))[0].canvasMarkers,n=[];r.map((function(e){n.push({time:parseFloat(e.time),text:e.value})})),t.duration(Ee.current),t&&t.markers&&_e.current&&t.markers.reset(n)}}),[de.current,_e.current,T.markers]),s.default.useEffect((function(){null!==de.current&&_e.current&&de.current.currentTime(be.current,v({type:"resetClick"}))}),[P,V]);var Be=function(e){var t=null==e?void 0:e.find((function(e){return 1==e.selected})),r=null==e?void 0:e.find((function(e){return e.label==ie}));r&&(t.selected=!1,r.selected=!0)},Fe=function(e){var t,r=de.current;r.controlBar.subsCapsButton&&null!==(t=r.controlBar.subsCapsButton)&&void 0!==t&&t.children_&&(e?r.controlBar.subsCapsButton.children_[0].addClass("captions-on"):r.controlBar.subsCapsButton.children_[0].removeClass("captions-on"))},Ue=function(){var e;if(pe.current||_)if(de.current&&de.current.markers&&de.current.markers.removeAll(),_)x+1<w.length&&(h({srcIndex:x+1,type:"setSrcIndex"}),v({currentTime:0,type:"setCurrentTime"}));else if((null===(e=Me.current)||void 0===e?void 0:e.length)>0){var t=Me.current[je.current+1];if(t&&null!=t){h({canvasIndex:je.current+1,type:"switchCanvas"}),v({startTime:0,type:"setTimeFragment"}),v({currentTime:0,type:"setCurrentTime"});var r=Pe.current.filter((function(e){return e.canvasIndex===t.canvasIndex&&1===e.itemIndex})),n=null!=t.id?t:r[0],a=0;null!=n&&null!=n.id&&(a=he(n.id,Ee.current).start),0===a?h({item:n,type:"switchItem"}):n.isEmpty&&(h({item:n,type:"switchItem"}),de.current.currentTime(a))}}},qe=function(){var e=de.current;if(null!==e&&_e.current){var t=e.currentTime()||be.current;_&&me.current>0&&(t+=w[me.current].altStart);var r=$e(t);r&&ye.current!=r.id?(ge(r.id),h({item:r,type:"switchItem"}),We(r,e)):null===r&&e.markers&&He()}},We=function(e,t){if(!r&&t.markers){r||t.markers.removeAll();var n=he(e.id,Ee.current),a=n.start,i=n.end;if(v({endTime:i,startTime:a,type:"setTimeFragment"}),a!=i){var u=i>Ee.current?Ee.current:i;t.markers.add([{time:a,duration:u-a,text:e.label}])}}},Ve=null,ze=null,He=function(){we.current&&h({item:null,type:"switchItem"}),ge(null);var e=de.current;e.markers&&(r||e.markers.removeAll())},$e=function(e){var t=e;_&&(t+=w[x].altStart);var r,n=er(Pe.current);try{for(n.s();!(r=n.n()).done;){var a=r.value,i=a.id,u=a.isCanvas;if(a.canvasIndex==je.current+1){if(u)return a;var o=he(i,y),l=ve(o,y);if(t>=o.start&&t<o.end&&l)return a}}}catch(e){n.e(e)}finally{n.f()}return null},Ge={position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center",fontSize:"medium",color:"#fff",backgroundColor:"black",zIndex:101};return ke.current&&!de.current&&(Ge=nr(nr({},Ge),{},{height:"88%",width:"100%",position:"relative"})),s.default.createElement("div",null,s.default.createElement("div",{"data-vjs-player":!0},ke.current&&s.default.createElement("div",{"data-testid":"inaccessible-message-display",style:{position:de.current?"absolute":"relative",top:0,left:0,right:0,bottom:0,display:"flex",justifyContent:"center",alignItems:"center",fontSize:"medium",color:"#fff",backgroundColor:"black",zIndex:101,aspectRatio:de.current?"":"16/9"},dangerouslySetInnerHTML:{__html:u}}),s.default.createElement("video",{"data-testid":"videojs-".concat(t?"video":"audio","-element"),"data-canvasindex":F,ref:fe,className:Re,onTouchStart:function(e){Ve=e.touches[0].clientX,ze=e.touches[0].clientY},onTouchEnd:function(e){e.changedTouches[0].clientX==Ve&&e.changedTouches[0].clientY==ze&&(O.paused()?O.play():O.pause())},style:{display:"".concat(ke.current?"none":"")}})),(j||T.isPlaylist)&&s.default.createElement("div",{className:"vjs-track-scrubber-container hidden",ref:n,id:"track_scrubber"},s.default.createElement("p",{className:"vjs-time track-currenttime",role:"presentation"}),s.default.createElement("span",{type:"range","aria-label":"Track scrubber",role:"slider",tabIndex:0,className:"vjs-track-scrubber",style:{width:"100%"}},s.default.createElement("span",{className:"tooltiptext",ref:a,"aria-hidden":!0,role:"presentation"})),s.default.createElement("p",{className:"vjs-time track-duration",role:"presentation"})))}function ir(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ur(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ir(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ir(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}Zt.registerComponent("VideoJSTrackScrubber",Kt),require("@silvermine/videojs-quality-selector")(p.default),ar.propTypes={isVideo:te.bool,isPlaylist:te.bool,trackScrubberRef:te.object,scrubberTooltipRef:te.object,tracks:te.array,placeholderText:te.string,renderingFiles:te.array,enableFileDownload:te.bool,videoJSOptions:te.object};var or="iiif-media-player",lr=function(e){var t=e.enableFileDownload,r=void 0!==t&&t,n=e.enablePIP,i=void 0!==n&&n,u=e.enablePlaybackRate,o=void 0!==u&&u,l=D(),c=$(),f=G(),d=B(),p=a.useErrorBoundary().showBoundary,v=s.default.useState({error:"",sources:[],tracks:[],poster:null}),m=E(v,2),h=m[0],y=m[1],g=s.default.useState(!0),b=E(g,2),_=b[0],x=b[1],w=s.default.useState(!1),k=E(w,2),T=k[0],S=k[1],C=s.default.useState(ie),j=E(C,2),I=j[0],P=j[1],M=s.default.useState(),R=E(M,2),O=R[0],A=R[1],L=s.default.useState(!1),N=E(L,2),F=N[0],U=N[1],q=s.default.useState(0),W=E(q,2),V=W[0],z=W[1],H=s.default.useState(),J=E(H,2),Z=J[0],K=J[1],Y=s.default.useState(),X=E(Y,2),Q=X[0],ee=X[1],te=s.default.useState(),re=E(te,2),ne=re[0],ae=re[1],ie=l.canvasIndex,ue=l.manifest,oe=l.canvasDuration,ce=l.canvasIsEmpty,fe=l.srcIndex,de=l.targets,pe=l.playlist,ve=l.autoAdvance,me=l.hasStructure,ye=c.playerFocusElement,ge=c.currentTime;c.player;var be=s.default.useRef();be.current=ie;var _e=s.default.useRef();_e.current=ve;var xe=s.default.useRef();xe.current=V;var we=s.default.useRef(),ke=s.default.useRef(),Ee=s.default.useRef(null);s.default.useEffect((function(){if(ue)try{Te(ie,pe.isPlaylist);var e=function(e){try{var t=se(e),r=!1,n=0;return t.length>0&&(r=t[0].isMultiCanvas(),n=t[0].getLastPageIndex()),{isMultiCanvas:r,lastIndex:n>-1?n:0}}catch(e){throw e}}(ue),t=e.isMultiCanvas,r=e.lastIndex;U(t),z(r)}catch(e){p(e)}return function(){S(!1),P(0),f({player:null,type:"updatePlayer"})}}),[ue,ie,fe]),s.default.useEffect((function(){ce&&(!ve&&Ee.current?Pe():Ie())}),[_e.current]);var Te=function(e,t){Pe();try{var n=Oe({manifest:ue,canvasIndex:e,srcIndex:fe}),a=n.isMultiSource,i=n.sources,u=n.tracks,o=n.canvasTargets,l=n.mediaType,c=n.canvas,s=n.error;if(K("video"===l),d({canvasTargets:o,type:"canvasTargets"}),d({isMultiSource:a,type:"hasMultipleItems"}),t&&((null==o?void 0:o.length)>0?f({currentTime:o[0].altStart,type:"setCurrentTime"}):f({currentTime:0,type:"setCurrentTime"})),y(ur(ur({},h),{},{error:s,sources:i,tracks:u})),c?(d({canvasDuration:c.duration,type:"canvasDuration"}),je(c.duration,i,e,a)):(d({type:"setCanvasIsEmpty",isEmpty:!0}),y(ur(ur({},h),{},{error:s}))),A(a||!1),P(e),r){var v,m=Be(ue);ae(m.manifest.concat(null===(v=m.canvas[e])||void 0===v?void 0:v.files))}S(!s)}catch(e){p(e)}},Ce=function(e,t){f({currentTime:t,type:"setCurrentTime"}),d({srcIndex:e,type:"setSrcIndex"})},je=function(e,t,r,n){var a={};if(n)d({type:"setCanvasIsEmpty",isEmpty:!1});else if(0===t.length){f({type:"updatePlayer"});var i=Ne(ue,r);y(ur(ur({},h),{},{error:i})),_e.current&&Ie(),d({type:"setCanvasIsEmpty",isEmpty:!0})}else{var u=(null==t?void 0:t.length)>0?t.filter((function(e){return e.selected}))[0]:null;u&&(null==(a=he(u.src,e))&&(a={start:0,end:e}),a.altStart=a.start,d({canvasTargets:[a],type:"canvasTargets"}),d({type:"setCanvasIsEmpty",isEmpty:!1}))}},Ie=function(){Ee.current=setTimeout((function(){be.current<xe.current&&_e.current&&d({canvasIndex:be.current+1,type:"switchCanvas"})}),le)},Pe=function(){Ee.current&&(clearTimeout(Ee.current),Ee.current=null)},Me=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";be.current!=e&&e<=xe.current&&((!r||r&&_e.current)&&d({canvasIndex:e,type:"switchCanvas"}),Te(e,t),f({element:n,type:"setPlayerFocusElement"}))};return s.default.useEffect((function(){var e;_&&T&&!ce?(e=ce?{sources:[]}:{aspectRatio:Z?"16:9":"1:0",audioOnlyMode:!Z,autoplay:!1,bigPlayButton:Z,id:or,playbackRates:o?[.5,.75,1,1.5,2]:[],inactivityTimeout:nt||at?0:2e3,poster:Z?Ne(ue,ie,!0):null,controls:!0,fluid:!0,language:"en",controlBar:{children:[F?"videoJSPreviousButton":"","playToggle",F?"videoJSNextButton":"","videoJSProgress","videoJSCurrentTime","timeDivider","durationDisplay",me||pe.isPlaylist?"videoJSTrackScrubber":"",h.tracks.length>0&&Z?"subsCapsButton":"",nt?"muteToggle":"volumePanel","qualitySelector",o?"playbackRateMenuButton":"",i?"pictureInPictureToggle":"",r?"videoJSFileDownload":"","fullscreenToggle"],videoJSProgress:{duration:oe,srcIndex:fe,targets:de,currentTime:ge||0,nextItemClicked:Ce,switchPlayer:Me},videoJSCurrentTime:{srcIndex:fe,targets:de,currentTime:ge||0}},sources:O?[h.sources[fe]]:h.sources,html5:{nativeTextTracks:nt&&!Ye},userActions:{hotkeys:tt?void 0:function(e){Se(e,this)}}},nt||ce||(e.controlBar.volumePanel={inline:!Z}),r&&!ce&&(e.controlBar.videoJSFileDownload={title:"Download Files",controlText:"Alternate resource download",files:ne}),F&&!ce&&(e.controlBar.videoJSPreviousButton={canvasIndex:ie,switchPlayer:Me,playerFocusElement:ye},e.controlBar.videoJSNextButton={canvasIndex:ie,lastCanvasIndex:xe.current,switchPlayer:Me,playerFocusElement:ye}),!me&&!pe.isPlaylist||ce||(e.controlBar.videoJSTrackScrubber={trackScrubberRef:we,timeToolRef:ke,isPlaylist:pe.isPlaylist}),x(!1)):e={sources:O?[h.sources[fe]]:h.sources,poster:Z?Ne(ue,ie,!0):null},ee(e)}),[T,I,fe,ce]),T&&null!=Q||ce?s.default.createElement("div",{"data-testid":"media-player",className:"ramp--media_player",role:"presentation"},s.default.createElement(ar,{id:or,isVideo:Z,isPlaylist:pe.isPlaylist,trackScrubberRef:we,scrubberTooltipRef:ke,tracks:h.tracks,placeholderText:h.error,renderingFiles:ne,enableFileDownload:r,options:Q})):null};lr.propTypes={enableFileDownload:te.bool,enablePIP:te.bool,enablePlaybackRate:te.bool};var cr=function(e){var t=e.duration,r=e.label,n=e.itemIndex,a=e.canvasIndex,i=e.sectionRef,u=e.itemId,o=e.handleClick,l=e.structureContainerRef,c=s.default.useRef();c.current=r,s.default.useEffect((function(){a+1!==n||!i.current||null==i.current.isClicked||i.current.isClicked||null==l.current.isScrolling||l.current.isScrolling||Te(i.current,l),i.current.isClicked=!1}),[a]);var f="ramp--structured-nav__section".concat(a+1===n?" active":"");return null!=u?s.default.createElement("div",{className:f,role:"listitem","data-testid":"listitem-section",ref:i,"data-mediafrag":u,"data-label":c.current},s.default.createElement("button",{"data-testid":"listitem-section-button",ref:i,onClick:o},s.default.createElement("span",{className:"ramp--structured-nav__title","aria-label":c.current},"".concat(n,". "),c.current,""!=t&&s.default.createElement("span",{className:"ramp--structured-nav__section-duration"},t)))):s.default.createElement("div",{className:f,"data-testid":"listitem-section",ref:i,"data-label":c.current},s.default.createElement("span",{className:"ramp--structured-nav__section-title",role:"listitem","data-testid":"listitem-section-span","aria-label":c.current},"".concat(n,". "),c.current,""!=t&&s.default.createElement("span",{className:"ramp--structured-nav__section-duration"},t)))};cr.propTypes={itemIndex:te.number.isRequired,canvasIndex:te.number,duration:te.string.isRequired,label:te.string.isRequired,sectionRef:te.object.isRequired,itemId:te.string,handleClick:te.func.isRequired,structureContainerRef:te.object.isRequired};var sr=function(){return s.default.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",style:{height:"0.75rem",width:"0.75rem"},className:"structure-item-locked"},s.default.createElement("g",{strokeWidth:"0",strokeLinecap:"round",strokeLinejoin:"round"},s.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.25 10.0546V8C5.25 4.27208 8.27208  1.25 12 1.25C15.7279 1.25 18.75 4.27208 18.75 8V10.0546C19.8648 10.1379 20.5907  10.348 21.1213 10.8787C22 11.7574 22 13.1716 22 16C22 18.8284 22 20.2426 21.1213  21.1213C20.2426 22 18.8284 22 16 22H8C5.17157 22 3.75736 22 2.87868 21.1213C2  20.2426 2 18.8284 2 16C2 13.1716 2 11.7574 2.87868 10.8787C3.40931 10.348 4.13525  10.1379 5.25 10.0546ZM6.75 8C6.75 5.10051 9.10051 2.75 12 2.75C14.8995 2.75 17.25  5.10051 17.25 8V10.0036C16.867 10 16.4515 10 16 10H8C7.54849 10 7.13301 10 6.75  10.0036V8Z",fill:"#000000"})))},fr=function(e){var t=e.duration,r=e.id,n=e.isTitle,a=e.isCanvas,i=e.isClickable,u=e.isEmpty,o=e.label,l=e.summary,c=e.homepage,f=e.items,d=e.itemIndex,p=e.rangeId,v=e.canvasDuration,m=e.sectionRef,h=e.structureContainerRef,y=G(),g=D(),b=g.canvasIndex,_=g.currentNavItem,x=g.playlist.isPlaylist,w=s.default.useRef();w.current=r;var k=s.default.useRef();k.current=o;var E=s.default.useRef();E.current=l;var T=f&&f.length>0?s.default.createElement(dr,{items:f,sectionRef:m,structureContainerRef:h}):null,S=s.default.useRef(null),C=s.default.useCallback((function(e){e.preventDefault(),e.stopPropagation();var t=he(w.current,v);ve({start:t.start,end:t.end},{end:v})&&(y({clickedUrl:w.current,type:"navClick"}),S.current.isClicked=!0,m.current&&(m.current.isClicked=!0))}));s.default.useEffect((function(){!S.current||(null==_?void 0:_.id)!=w.current||null==S.current.isClicked||S.current.isClicked||null==h.current.isScrolling||h.current.isScrolling||Te(S.current,h),S.current.isClicked=!1}),[_]);return""!=o?s.default.createElement("li",{"data-testid":"list-item",ref:S,className:"ramp--structured-nav__list-item"+"".concat(null==w.current||(null==_?void 0:_.id)!==w.current||!x&&a||(null==_?void 0:_.canvasIndex)!==b+1?"":" active"),"aria-label":k.current,"data-label":k.current,"data-summary":E.current},s.default.createElement(s.default.Fragment,{key:p},a&&!x?s.default.createElement(s.default.Fragment,null,s.default.createElement(cr,{itemIndex:d,canvasIndex:b,duration:t,label:o,sectionRef:m,itemId:w.current,handleClick:C,structureContainerRef:h})):s.default.createElement(s.default.Fragment,null,n?s.default.createElement("span",{className:"ramp--structured-nav__item-title",role:"listitem","aria-label":k.current},k.current):s.default.createElement(s.default.Fragment,{key:r},s.default.createElement("div",{className:"tracker"}),i?s.default.createElement(s.default.Fragment,null,u&&s.default.createElement(sr,null),s.default.createElement("a",{role:"listitem",href:c&&""!=c?c:w.current,onClick:C},"".concat(d,". "),k.current," ",t.length>0?" (".concat(t,")"):"")):s.default.createElement("span",{role:"listitem","aria-label":k.current},k.current)))),T):null};fr.propTypes={duration:te.string.isRequired,id:te.string,isTitle:te.bool.isRequired,isCanvas:te.bool.isRequired,isClickable:te.bool.isRequired,isEmpty:te.bool.isRequired,label:te.string.isRequired,summary:te.string,homepage:te.string,items:te.array.isRequired,itemIndex:te.number,rangeId:te.string.isRequired,canvasDuration:te.number.isRequired,sectionRef:te.object.isRequired,structureContainerRef:te.object.isRequired};var dr=function(e){var t=e.items,r=e.sectionRef,n=e.structureContainerRef,a=s.default.createElement("ul",{"data-testid":"list",className:"ramp--structured-nav__list",role:"presentation"},t.map((function(e,t){if(e)return s.default.createElement(fr,Dt({},e,{sectionRef:r,key:t,structureContainerRef:n}))})));return s.default.createElement(s.default.Fragment,null,a)};function pr(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return vr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vr(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){o=!0,i=e},f:function(){try{u||null==r.return||r.return()}finally{if(o)throw i}}}}function vr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}dr.propTypes={items:te.array.isRequired,sectionRef:te.object.isRequired,structureContainerRef:te.object.isRequired};var mr=function(){var e,t=B(),r=G(),n=$(),i=n.clickedUrl,u=n.isClicked,o=n.isPlaying,l=n.player,c=D(),f=c.canvasDuration,d=c.canvasIndex,p=c.hasMultiItems,v=c.targets,m=c.manifest,h=c.playlist,y=c.canvasIsEmpty,g=c.canvasSegments,b=a.useErrorBoundary().showBoundary,_=s.default.useRef(),x=s.default.useRef(y),w=s.default.useRef(),k=s.default.useRef();s.default.useEffect((function(){if(m)try{var e=We(m),r=e.structures,n=e.timespans;_.current=r,t({structures:r,type:"setStructures"}),t({timespans:n,type:"setCanvasSegments"}),w.current.isScrolling=!1}catch(e){b(e)}}),[m]),s.default.useEffect((function(){y&&h.isPlaylist&&t({item:g[d],type:"switchItem"})}),[y,d]),s.default.useEffect((function(){if(u){var e=g.filter((function(e){return e.id===i}));if((null==e?void 0:e.length)>0){var n=e[0],a=n.isCanvas,c=n.items;(!a||0==c.length&&a)&&t({item:e[0],type:"switchItem"})}var s=function(e,t){try{var r=se(e)[0].getCanvasIndexById(t);return r||0===r?r:(console.log("Canvas not found in Manifest, ",t),0)}catch(e){throw e}}(m,Le(i)),h=he(i,f);if(!h||null==h)return void console.error("StructuredNavigation -> invalid media fragment in structure item -> ",h);var y=h.start;if(p){var b=function(e,t,r){var n,a;return e.map((function(i,u){var o=u>0?e[u].altStart:0;isNaN(c)&&(c=r);var l=i.start,c=i.end,s=o+l,f=o+c;t.start>=s&&t.start<f&&(n=u,a=t.start-o)})),{srcIndex:n,fragmentStart:a}}(v,h,f),w=b.srcIndex;y=b.fragmentStart,t({srcIndex:w,type:"setSrcIndex"})}else d!=s&&s>-1&&(t({canvasIndex:s,type:"switchCanvas"}),x.current=_.current[s].isEmpty);l&&!x.current?(l.currentTime(y),r({startTime:h.start,endTime:h.end,type:"setTimeFragment"}),r({currentTime:y,type:"setCurrentTime"}),o&&l.userActive(!0)):x.current&&r({type:"resetClick"})}}),[u,l]),s.default.useEffect((function(){if(w.current){var e=w.current,t=w.current.parentElement,r=Math.abs(e.scrollHeight-(e.scrollTop+e.clientHeight))<=1;k.current=!r,t&&T.observe(t)}}),[l]);var E=function(e){var t=e.target;t.classList.contains("ramp--structured-nav__border")&&(t=t.firstChild);var r=t.nextSibling,n=Math.abs(t.scrollHeight-(t.scrollTop+t.clientHeight))<=1;t&&n&&t.classList.contains("scrollable")?t.classList.remove("scrollable"):!t||n||t.classList.contains("scrollable")||t.classList.add("scrollable"),r&&n&&r.classList.contains("scrollable")?r.classList.remove("scrollable"):!r||n||r.classList.contains("scrollable")||r.classList.add("scrollable")},T=new ResizeObserver((function(e){var t,r=pr(e);try{for(r.s();!(t=r.n()).done;){var n=t.value;E(n)}}catch(e){r.e(e)}finally{r.f()}}));if(!m)return s.default.createElement("p",null,"No manifest - Please provide a valid manifest.");var S="",C="";k.current?(S="ramp--structured-nav scrollable",C="scrollable"):S="ramp--structured-nav",null!=h&&h.isPlaylist&&(S+=" playlist-items");var j=function(e){w.current.isScrolling=e};return s.default.createElement("div",{className:"ramp--structured-nav__border"},s.default.createElement("div",{"data-testid":"structured-nav",className:S,ref:w,role:"list","aria-label":"Structural content",onScroll:E,onMouseLeave:function(){return j(!1)},onMouseOver:function(){return j(!0)}},(null===(e=_.current)||void 0===e?void 0:e.length)>0?_.current.map((function(e,t){return s.default.createElement(dr,{items:[e],sectionRef:s.default.createRef(),key:t,structureContainerRef:w})})):s.default.createElement("p",{className:"ramp--no-structure"},"There are no structures in the manifest")),s.default.createElement("span",{className:C},"Scroll to see more"))};mr.propTypes={};var hr=g((function(e){e.exports=function(e){if(Array.isArray(e))return x(e)},e.exports.__esModule=!0,e.exports.default=e.exports})),yr=g((function(e){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.__esModule=!0,e.exports.default=e.exports})),gr=g((function(e){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.__esModule=!0,e.exports.default=e.exports})),br=y(g((function(e){e.exports=function(e){return hr(e)||yr(e)||w(e)||gr()},e.exports.__esModule=!0,e.exports.default=e.exports})));g((function(e,t){(function(){var r,n="Expected a function",a="__lodash_hash_undefined__",i="__lodash_placeholder__",u=16,o=32,l=64,c=128,s=256,f=1/0,d=9007199254740991,p=NaN,v=4294967295,m=[["ary",c],["bind",1],["bindKey",2],["curry",8],["curryRight",u],["flip",512],["partial",o],["partialRight",l],["rearg",s]],y="[object Arguments]",g="[object Array]",b="[object Boolean]",_="[object Date]",x="[object Error]",w="[object Function]",k="[object GeneratorFunction]",E="[object Map]",T="[object Number]",S="[object Object]",C="[object Promise]",j="[object RegExp]",I="[object Set]",P="[object String]",M="[object Symbol]",R="[object WeakMap]",O="[object ArrayBuffer]",A="[object DataView]",L="[object Float32Array]",N="[object Float64Array]",D="[object Int8Array]",B="[object Int16Array]",F="[object Int32Array]",U="[object Uint8Array]",q="[object Uint8ClampedArray]",W="[object Uint16Array]",V="[object Uint32Array]",z=/\b__p \+= '';/g,H=/\b(__p \+=) '' \+/g,$=/(__e\(.*?\)|\b__t\)) \+\n'';/g,G=/&(?:amp|lt|gt|quot|#39);/g,J=/[&<>"']/g,Z=RegExp(G.source),K=RegExp(J.source),Y=/<%-([\s\S]+?)%>/g,X=/<%([\s\S]+?)%>/g,Q=/<%=([\s\S]+?)%>/g,ee=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,te=/^\w*$/,re=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ne=/[\\^$.*+?()[\]{}|]/g,ae=RegExp(ne.source),ie=/^\s+/,ue=/\s/,oe=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,le=/\{\n\/\* \[wrapped with (.+)\] \*/,ce=/,? & /,se=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,fe=/[()=,{}\[\]\/\s]/,de=/\\(\\)?/g,pe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,ve=/\w*$/,me=/^[-+]0x[0-9a-f]+$/i,he=/^0b[01]+$/i,ye=/^\[object .+?Constructor\]$/,ge=/^0o[0-7]+$/i,be=/^(?:0|[1-9]\d*)$/,_e=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,xe=/($^)/,we=/['\n\r\u2028\u2029\\]/g,ke="\\ud800-\\udfff",Ee="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Te="\\u2700-\\u27bf",Se="a-z\\xdf-\\xf6\\xf8-\\xff",Ce="A-Z\\xc0-\\xd6\\xd8-\\xde",je="\\ufe0e\\ufe0f",Ie="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Pe="['’]",Me="["+ke+"]",Re="["+Ie+"]",Oe="["+Ee+"]",Ae="\\d+",Le="["+Te+"]",Ne="["+Se+"]",De="[^"+ke+Ie+Ae+Te+Se+Ce+"]",Be="\\ud83c[\\udffb-\\udfff]",Fe="[^"+ke+"]",Ue="(?:\\ud83c[\\udde6-\\uddff]){2}",qe="[\\ud800-\\udbff][\\udc00-\\udfff]",We="["+Ce+"]",Ve="\\u200d",ze="(?:"+Ne+"|"+De+")",He="(?:"+We+"|"+De+")",$e="(?:['’](?:d|ll|m|re|s|t|ve))?",Ge="(?:['’](?:D|LL|M|RE|S|T|VE))?",Je="(?:"+Oe+"|"+Be+")"+"?",Ze="["+je+"]?",Ke=Ze+Je+("(?:"+Ve+"(?:"+[Fe,Ue,qe].join("|")+")"+Ze+Je+")*"),Ye="(?:"+[Le,Ue,qe].join("|")+")"+Ke,Xe="(?:"+[Fe+Oe+"?",Oe,Ue,qe,Me].join("|")+")",Qe=RegExp(Pe,"g"),et=RegExp(Oe,"g"),tt=RegExp(Be+"(?="+Be+")|"+Xe+Ke,"g"),rt=RegExp([We+"?"+Ne+"+"+$e+"(?="+[Re,We,"$"].join("|")+")",He+"+"+Ge+"(?="+[Re,We+ze,"$"].join("|")+")",We+"?"+ze+"+"+$e,We+"+"+Ge,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Ae,Ye].join("|"),"g"),nt=RegExp("["+Ve+ke+Ee+je+"]"),at=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,it=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ut=-1,ot={};ot[L]=ot[N]=ot[D]=ot[B]=ot[F]=ot[U]=ot[q]=ot[W]=ot[V]=!0,ot[y]=ot[g]=ot[O]=ot[b]=ot[A]=ot[_]=ot[x]=ot[w]=ot[E]=ot[T]=ot[S]=ot[j]=ot[I]=ot[P]=ot[R]=!1;var lt={};lt[y]=lt[g]=lt[O]=lt[A]=lt[b]=lt[_]=lt[L]=lt[N]=lt[D]=lt[B]=lt[F]=lt[E]=lt[T]=lt[S]=lt[j]=lt[I]=lt[P]=lt[M]=lt[U]=lt[q]=lt[W]=lt[V]=!0,lt[x]=lt[w]=lt[R]=!1;var ct={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},st=parseFloat,ft=parseInt,dt="object"==typeof h&&h&&h.Object===Object&&h,pt="object"==typeof self&&self&&self.Object===Object&&self,vt=dt||pt||Function("return this")(),mt=t&&!t.nodeType&&t,ht=mt&&e&&!e.nodeType&&e,yt=ht&&ht.exports===mt,gt=yt&&dt.process,bt=function(){try{var e=ht&&ht.require&&ht.require("util").types;return e||gt&&gt.binding&&gt.binding("util")}catch(e){}}(),_t=bt&&bt.isArrayBuffer,xt=bt&&bt.isDate,wt=bt&&bt.isMap,kt=bt&&bt.isRegExp,Et=bt&&bt.isSet,Tt=bt&&bt.isTypedArray;function St(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}function Ct(e,t,r,n){for(var a=-1,i=null==e?0:e.length;++a<i;){var u=e[a];t(n,u,r(u),e)}return n}function jt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n&&!1!==t(e[r],r,e););return e}function It(e,t){for(var r=null==e?0:e.length;r--&&!1!==t(e[r],r,e););return e}function Pt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}function Mt(e,t){for(var r=-1,n=null==e?0:e.length,a=0,i=[];++r<n;){var u=e[r];t(u,r,e)&&(i[a++]=u)}return i}function Rt(e,t){return!!(null==e?0:e.length)&&Wt(e,t,0)>-1}function Ot(e,t,r){for(var n=-1,a=null==e?0:e.length;++n<a;)if(r(t,e[n]))return!0;return!1}function At(e,t){for(var r=-1,n=null==e?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}function Lt(e,t){for(var r=-1,n=t.length,a=e.length;++r<n;)e[a+r]=t[r];return e}function Nt(e,t,r,n){var a=-1,i=null==e?0:e.length;for(n&&i&&(r=e[++a]);++a<i;)r=t(r,e[a],a,e);return r}function Dt(e,t,r,n){var a=null==e?0:e.length;for(n&&a&&(r=e[--a]);a--;)r=t(r,e[a],a,e);return r}function Bt(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var Ft=$t("length");function Ut(e,t,r){var n;return r(e,(function(e,r,a){if(t(e,r,a))return n=r,!1})),n}function qt(e,t,r,n){for(var a=e.length,i=r+(n?1:-1);n?i--:++i<a;)if(t(e[i],i,e))return i;return-1}function Wt(e,t,r){return t==t?function(e,t,r){var n=r-1,a=e.length;for(;++n<a;)if(e[n]===t)return n;return-1}(e,t,r):qt(e,zt,r)}function Vt(e,t,r,n){for(var a=r-1,i=e.length;++a<i;)if(n(e[a],t))return a;return-1}function zt(e){return e!=e}function Ht(e,t){var r=null==e?0:e.length;return r?Zt(e,t)/r:p}function $t(e){return function(t){return null==t?r:t[e]}}function Gt(e){return function(t){return null==e?r:e[t]}}function Jt(e,t,r,n,a){return a(e,(function(e,a,i){r=n?(n=!1,e):t(r,e,a,i)})),r}function Zt(e,t){for(var n,a=-1,i=e.length;++a<i;){var u=t(e[a]);u!==r&&(n=n===r?u:n+u)}return n}function Kt(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function Yt(e){return e?e.slice(0,vr(e)+1).replace(ie,""):e}function Xt(e){return function(t){return e(t)}}function Qt(e,t){return At(t,(function(t){return e[t]}))}function er(e,t){return e.has(t)}function tr(e,t){for(var r=-1,n=e.length;++r<n&&Wt(t,e[r],0)>-1;);return r}function rr(e,t){for(var r=e.length;r--&&Wt(t,e[r],0)>-1;);return r}var nr=Gt({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),ar=Gt({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function ir(e){return"\\"+ct[e]}function ur(e){return nt.test(e)}function or(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function lr(e,t){return function(r){return e(t(r))}}function cr(e,t){for(var r=-1,n=e.length,a=0,u=[];++r<n;){var o=e[r];o!==t&&o!==i||(e[r]=i,u[a++]=r)}return u}function sr(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}function fr(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=[e,e]})),r}function dr(e){return ur(e)?function(e){var t=tt.lastIndex=0;for(;tt.test(e);)++t;return t}(e):Ft(e)}function pr(e){return ur(e)?function(e){return e.match(tt)||[]}(e):function(e){return e.split("")}(e)}function vr(e){for(var t=e.length;t--&&ue.test(e.charAt(t)););return t}var mr=Gt({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var hr=function e(t){var h,ue=(t=null==t?vt:hr.defaults(vt.Object(),t,hr.pick(vt,it))).Array,ke=t.Date,Ee=t.Error,Te=t.Function,Se=t.Math,Ce=t.Object,je=t.RegExp,Ie=t.String,Pe=t.TypeError,Me=ue.prototype,Re=Te.prototype,Oe=Ce.prototype,Ae=t["__core-js_shared__"],Le=Re.toString,Ne=Oe.hasOwnProperty,De=0,Be=(h=/[^.]+$/.exec(Ae&&Ae.keys&&Ae.keys.IE_PROTO||""))?"Symbol(src)_1."+h:"",Fe=Oe.toString,Ue=Le.call(Ce),qe=vt._,We=je("^"+Le.call(Ne).replace(ne,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ve=yt?t.Buffer:r,ze=t.Symbol,He=t.Uint8Array,$e=Ve?Ve.allocUnsafe:r,Ge=lr(Ce.getPrototypeOf,Ce),Je=Ce.create,Ze=Oe.propertyIsEnumerable,Ke=Me.splice,Ye=ze?ze.isConcatSpreadable:r,Xe=ze?ze.iterator:r,tt=ze?ze.toStringTag:r,nt=function(){try{var e=di(Ce,"defineProperty");return e({},"",{}),e}catch(e){}}(),ct=t.clearTimeout!==vt.clearTimeout&&t.clearTimeout,dt=ke&&ke.now!==vt.Date.now&&ke.now,pt=t.setTimeout!==vt.setTimeout&&t.setTimeout,mt=Se.ceil,ht=Se.floor,gt=Ce.getOwnPropertySymbols,bt=Ve?Ve.isBuffer:r,Ft=t.isFinite,Gt=Me.join,yr=lr(Ce.keys,Ce),gr=Se.max,br=Se.min,_r=ke.now,xr=t.parseInt,wr=Se.random,kr=Me.reverse,Er=di(t,"DataView"),Tr=di(t,"Map"),Sr=di(t,"Promise"),Cr=di(t,"Set"),jr=di(t,"WeakMap"),Ir=di(Ce,"create"),Pr=jr&&new jr,Mr={},Rr=Bi(Er),Or=Bi(Tr),Ar=Bi(Sr),Lr=Bi(Cr),Nr=Bi(jr),Dr=ze?ze.prototype:r,Br=Dr?Dr.valueOf:r,Fr=Dr?Dr.toString:r;function Ur(e){if(to(e)&&!zu(e)&&!(e instanceof zr)){if(e instanceof Vr)return e;if(Ne.call(e,"__wrapped__"))return Fi(e)}return new Vr(e)}var qr=function(){function e(){}return function(t){if(!eo(t))return{};if(Je)return Je(t);e.prototype=t;var n=new e;return e.prototype=r,n}}();function Wr(){}function Vr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}function zr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=v,this.__views__=[]}function Hr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function $r(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Gr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function Jr(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Gr;++t<r;)this.add(e[t])}function Zr(e){var t=this.__data__=new $r(e);this.size=t.size}function Kr(e,t){var r=zu(e),n=!r&&Vu(e),a=!r&&!n&&Ju(e),i=!r&&!n&&!a&&co(e),u=r||n||a||i,o=u?Kt(e.length,Ie):[],l=o.length;for(var c in e)!t&&!Ne.call(e,c)||u&&("length"==c||a&&("offset"==c||"parent"==c)||i&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||bi(c,l))||o.push(c);return o}function Yr(e){var t=e.length;return t?e[Zn(0,t-1)]:r}function Xr(e,t){return Li(Pa(e),ln(t,0,e.length))}function Qr(e){return Li(Pa(e))}function en(e,t,n){(n!==r&&!Uu(e[t],n)||n===r&&!(t in e))&&un(e,t,n)}function tn(e,t,n){var a=e[t];Ne.call(e,t)&&Uu(a,n)&&(n!==r||t in e)||un(e,t,n)}function rn(e,t){for(var r=e.length;r--;)if(Uu(e[r][0],t))return r;return-1}function nn(e,t,r,n){return pn(e,(function(e,a,i){t(n,e,r(e),i)})),n}function an(e,t){return e&&Ma(t,Ro(t),e)}function un(e,t,r){"__proto__"==t&&nt?nt(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}function on(e,t){for(var n=-1,a=t.length,i=ue(a),u=null==e;++n<a;)i[n]=u?r:Co(e,t[n]);return i}function ln(e,t,n){return e==e&&(n!==r&&(e=e<=n?e:n),t!==r&&(e=e>=t?e:t)),e}function cn(e,t,n,a,i,u){var o,l=1&t,c=2&t,s=4&t;if(n&&(o=i?n(e,a,i,u):n(e)),o!==r)return o;if(!eo(e))return e;var f=zu(e);if(f){if(o=function(e){var t=e.length,r=new e.constructor(t);t&&"string"==typeof e[0]&&Ne.call(e,"index")&&(r.index=e.index,r.input=e.input);return r}(e),!l)return Pa(e,o)}else{var d=mi(e),p=d==w||d==k;if(Ju(e))return Ea(e,l);if(d==S||d==y||p&&!i){if(o=c||p?{}:yi(e),!l)return c?function(e,t){return Ma(e,vi(e),t)}(e,function(e,t){return e&&Ma(t,Oo(t),e)}(o,e)):function(e,t){return Ma(e,pi(e),t)}(e,an(o,e))}else{if(!lt[d])return i?e:{};o=function(e,t,r){var n=e.constructor;switch(t){case O:return Ta(e);case b:case _:return new n(+e);case A:return function(e,t){var r=t?Ta(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case L:case N:case D:case B:case F:case U:case q:case W:case V:return Sa(e,r);case E:return new n;case T:case P:return new n(e);case j:return function(e){var t=new e.constructor(e.source,ve.exec(e));return t.lastIndex=e.lastIndex,t}(e);case I:return new n;case M:return a=e,Br?Ce(Br.call(a)):{}}var a}(e,d,l)}}u||(u=new Zr);var v=u.get(e);if(v)return v;u.set(e,o),uo(e)?e.forEach((function(r){o.add(cn(r,t,n,r,e,u))})):ro(e)&&e.forEach((function(r,a){o.set(a,cn(r,t,n,a,e,u))}));var m=f?r:(s?c?ii:ai:c?Oo:Ro)(e);return jt(m||e,(function(r,a){m&&(r=e[a=r]),tn(o,a,cn(r,t,n,a,e,u))})),o}function sn(e,t,n){var a=n.length;if(null==e)return!a;for(e=Ce(e);a--;){var i=n[a],u=t[i],o=e[i];if(o===r&&!(i in e)||!u(o))return!1}return!0}function fn(e,t,a){if("function"!=typeof e)throw new Pe(n);return Mi((function(){e.apply(r,a)}),t)}function dn(e,t,r,n){var a=-1,i=Rt,u=!0,o=e.length,l=[],c=t.length;if(!o)return l;r&&(t=At(t,Xt(r))),n?(i=Ot,u=!1):t.length>=200&&(i=er,u=!1,t=new Jr(t));e:for(;++a<o;){var s=e[a],f=null==r?s:r(s);if(s=n||0!==s?s:0,u&&f==f){for(var d=c;d--;)if(t[d]===f)continue e;l.push(s)}else i(t,f,n)||l.push(s)}return l}Ur.templateSettings={escape:Y,evaluate:X,interpolate:Q,variable:"",imports:{_:Ur}},Ur.prototype=Wr.prototype,Ur.prototype.constructor=Ur,Vr.prototype=qr(Wr.prototype),Vr.prototype.constructor=Vr,zr.prototype=qr(Wr.prototype),zr.prototype.constructor=zr,Hr.prototype.clear=function(){this.__data__=Ir?Ir(null):{},this.size=0},Hr.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Hr.prototype.get=function(e){var t=this.__data__;if(Ir){var n=t[e];return n===a?r:n}return Ne.call(t,e)?t[e]:r},Hr.prototype.has=function(e){var t=this.__data__;return Ir?t[e]!==r:Ne.call(t,e)},Hr.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Ir&&t===r?a:t,this},$r.prototype.clear=function(){this.__data__=[],this.size=0},$r.prototype.delete=function(e){var t=this.__data__,r=rn(t,e);return!(r<0)&&(r==t.length-1?t.pop():Ke.call(t,r,1),--this.size,!0)},$r.prototype.get=function(e){var t=this.__data__,n=rn(t,e);return n<0?r:t[n][1]},$r.prototype.has=function(e){return rn(this.__data__,e)>-1},$r.prototype.set=function(e,t){var r=this.__data__,n=rn(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},Gr.prototype.clear=function(){this.size=0,this.__data__={hash:new Hr,map:new(Tr||$r),string:new Hr}},Gr.prototype.delete=function(e){var t=si(this,e).delete(e);return this.size-=t?1:0,t},Gr.prototype.get=function(e){return si(this,e).get(e)},Gr.prototype.has=function(e){return si(this,e).has(e)},Gr.prototype.set=function(e,t){var r=si(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},Jr.prototype.add=Jr.prototype.push=function(e){return this.__data__.set(e,a),this},Jr.prototype.has=function(e){return this.__data__.has(e)},Zr.prototype.clear=function(){this.__data__=new $r,this.size=0},Zr.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Zr.prototype.get=function(e){return this.__data__.get(e)},Zr.prototype.has=function(e){return this.__data__.has(e)},Zr.prototype.set=function(e,t){var r=this.__data__;if(r instanceof $r){var n=r.__data__;if(!Tr||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Gr(n)}return r.set(e,t),this.size=r.size,this};var pn=Aa(xn),vn=Aa(wn,!0);function mn(e,t){var r=!0;return pn(e,(function(e,n,a){return r=!!t(e,n,a)})),r}function hn(e,t,n){for(var a=-1,i=e.length;++a<i;){var u=e[a],o=t(u);if(null!=o&&(l===r?o==o&&!lo(o):n(o,l)))var l=o,c=u}return c}function yn(e,t){var r=[];return pn(e,(function(e,n,a){t(e,n,a)&&r.push(e)})),r}function gn(e,t,r,n,a){var i=-1,u=e.length;for(r||(r=gi),a||(a=[]);++i<u;){var o=e[i];t>0&&r(o)?t>1?gn(o,t-1,r,n,a):Lt(a,o):n||(a[a.length]=o)}return a}var bn=La(),_n=La(!0);function xn(e,t){return e&&bn(e,t,Ro)}function wn(e,t){return e&&_n(e,t,Ro)}function kn(e,t){return Mt(t,(function(t){return Yu(e[t])}))}function En(e,t){for(var n=0,a=(t=_a(t,e)).length;null!=e&&n<a;)e=e[Di(t[n++])];return n&&n==a?e:r}function Tn(e,t,r){var n=t(e);return zu(e)?n:Lt(n,r(e))}function Sn(e){return null==e?e===r?"[object Undefined]":"[object Null]":tt&&tt in Ce(e)?function(e){var t=Ne.call(e,tt),n=e[tt];try{e[tt]=r;var a=!0}catch(e){}var i=Fe.call(e);a&&(t?e[tt]=n:delete e[tt]);return i}(e):function(e){return Fe.call(e)}(e)}function Cn(e,t){return e>t}function jn(e,t){return null!=e&&Ne.call(e,t)}function In(e,t){return null!=e&&t in Ce(e)}function Pn(e,t,n){for(var a=n?Ot:Rt,i=e[0].length,u=e.length,o=u,l=ue(u),c=1/0,s=[];o--;){var f=e[o];o&&t&&(f=At(f,Xt(t))),c=br(f.length,c),l[o]=!n&&(t||i>=120&&f.length>=120)?new Jr(o&&f):r}f=e[0];var d=-1,p=l[0];e:for(;++d<i&&s.length<c;){var v=f[d],m=t?t(v):v;if(v=n||0!==v?v:0,!(p?er(p,m):a(s,m,n))){for(o=u;--o;){var h=l[o];if(!(h?er(h,m):a(e[o],m,n)))continue e}p&&p.push(m),s.push(v)}}return s}function Mn(e,t,n){var a=null==(e=ji(e,t=_a(t,e)))?e:e[Di(Ki(t))];return null==a?r:St(a,e,n)}function Rn(e){return to(e)&&Sn(e)==y}function On(e,t,n,a,i){return e===t||(null==e||null==t||!to(e)&&!to(t)?e!=e&&t!=t:function(e,t,n,a,i,u){var o=zu(e),l=zu(t),c=o?g:mi(e),s=l?g:mi(t),f=(c=c==y?S:c)==S,d=(s=s==y?S:s)==S,p=c==s;if(p&&Ju(e)){if(!Ju(t))return!1;o=!0,f=!1}if(p&&!f)return u||(u=new Zr),o||co(e)?ri(e,t,n,a,i,u):function(e,t,r,n,a,i,u){switch(r){case A:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case O:return!(e.byteLength!=t.byteLength||!i(new He(e),new He(t)));case b:case _:case T:return Uu(+e,+t);case x:return e.name==t.name&&e.message==t.message;case j:case P:return e==t+"";case E:var o=or;case I:var l=1&n;if(o||(o=sr),e.size!=t.size&&!l)return!1;var c=u.get(e);if(c)return c==t;n|=2,u.set(e,t);var s=ri(o(e),o(t),n,a,i,u);return u.delete(e),s;case M:if(Br)return Br.call(e)==Br.call(t)}return!1}(e,t,c,n,a,i,u);if(!(1&n)){var v=f&&Ne.call(e,"__wrapped__"),m=d&&Ne.call(t,"__wrapped__");if(v||m){var h=v?e.value():e,w=m?t.value():t;return u||(u=new Zr),i(h,w,n,a,u)}}if(!p)return!1;return u||(u=new Zr),function(e,t,n,a,i,u){var o=1&n,l=ai(e),c=l.length,s=ai(t),f=s.length;if(c!=f&&!o)return!1;var d=c;for(;d--;){var p=l[d];if(!(o?p in t:Ne.call(t,p)))return!1}var v=u.get(e),m=u.get(t);if(v&&m)return v==t&&m==e;var h=!0;u.set(e,t),u.set(t,e);var y=o;for(;++d<c;){var g=e[p=l[d]],b=t[p];if(a)var _=o?a(b,g,p,t,e,u):a(g,b,p,e,t,u);if(!(_===r?g===b||i(g,b,n,a,u):_)){h=!1;break}y||(y="constructor"==p)}if(h&&!y){var x=e.constructor,w=t.constructor;x==w||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof w&&w instanceof w||(h=!1)}return u.delete(e),u.delete(t),h}(e,t,n,a,i,u)}(e,t,n,a,On,i))}function An(e,t,n,a){var i=n.length,u=i,o=!a;if(null==e)return!u;for(e=Ce(e);i--;){var l=n[i];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<u;){var c=(l=n[i])[0],s=e[c],f=l[1];if(o&&l[2]){if(s===r&&!(c in e))return!1}else{var d=new Zr;if(a)var p=a(s,f,c,e,t,d);if(!(p===r?On(f,s,3,a,d):p))return!1}}return!0}function Ln(e){return!(!eo(e)||(t=e,Be&&Be in t))&&(Yu(e)?We:ye).test(Bi(e));var t}function Nn(e){return"function"==typeof e?e:null==e?al:"object"==typeof e?zu(e)?Wn(e[0],e[1]):qn(e):pl(e)}function Dn(e){if(!Ei(e))return yr(e);var t=[];for(var r in Ce(e))Ne.call(e,r)&&"constructor"!=r&&t.push(r);return t}function Bn(e){if(!eo(e))return function(e){var t=[];if(null!=e)for(var r in Ce(e))t.push(r);return t}(e);var t=Ei(e),r=[];for(var n in e)("constructor"!=n||!t&&Ne.call(e,n))&&r.push(n);return r}function Fn(e,t){return e<t}function Un(e,t){var r=-1,n=$u(e)?ue(e.length):[];return pn(e,(function(e,a,i){n[++r]=t(e,a,i)})),n}function qn(e){var t=fi(e);return 1==t.length&&t[0][2]?Si(t[0][0],t[0][1]):function(r){return r===e||An(r,e,t)}}function Wn(e,t){return xi(e)&&Ti(t)?Si(Di(e),t):function(n){var a=Co(n,e);return a===r&&a===t?jo(n,e):On(t,a,3)}}function Vn(e,t,n,a,i){e!==t&&bn(t,(function(u,o){if(i||(i=new Zr),eo(u))!function(e,t,n,a,i,u,o){var l=Ii(e,n),c=Ii(t,n),s=o.get(c);if(s)return void en(e,n,s);var f=u?u(l,c,n+"",e,t,o):r,d=f===r;if(d){var p=zu(c),v=!p&&Ju(c),m=!p&&!v&&co(c);f=c,p||v||m?zu(l)?f=l:Gu(l)?f=Pa(l):v?(d=!1,f=Ea(c,!0)):m?(d=!1,f=Sa(c,!0)):f=[]:ao(c)||Vu(c)?(f=l,Vu(l)?f=go(l):eo(l)&&!Yu(l)||(f=yi(c))):d=!1}d&&(o.set(c,f),i(f,c,a,u,o),o.delete(c));en(e,n,f)}(e,t,o,n,Vn,a,i);else{var l=a?a(Ii(e,o),u,o+"",e,t,i):r;l===r&&(l=u),en(e,o,l)}}),Oo)}function zn(e,t){var n=e.length;if(n)return bi(t+=t<0?n:0,n)?e[t]:r}function Hn(e,t,r){t=t.length?At(t,(function(e){return zu(e)?function(t){return En(t,1===e.length?e[0]:e)}:e})):[al];var n=-1;t=At(t,Xt(ci()));var a=Un(e,(function(e,r,a){var i=At(t,(function(t){return t(e)}));return{criteria:i,index:++n,value:e}}));return function(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}(a,(function(e,t){return function(e,t,r){var n=-1,a=e.criteria,i=t.criteria,u=a.length,o=r.length;for(;++n<u;){var l=Ca(a[n],i[n]);if(l)return n>=o?l:l*("desc"==r[n]?-1:1)}return e.index-t.index}(e,t,r)}))}function $n(e,t,r){for(var n=-1,a=t.length,i={};++n<a;){var u=t[n],o=En(e,u);r(o,u)&&ea(i,_a(u,e),o)}return i}function Gn(e,t,r,n){var a=n?Vt:Wt,i=-1,u=t.length,o=e;for(e===t&&(t=Pa(t)),r&&(o=At(e,Xt(r)));++i<u;)for(var l=0,c=t[i],s=r?r(c):c;(l=a(o,s,l,n))>-1;)o!==e&&Ke.call(o,l,1),Ke.call(e,l,1);return e}function Jn(e,t){for(var r=e?t.length:0,n=r-1;r--;){var a=t[r];if(r==n||a!==i){var i=a;bi(a)?Ke.call(e,a,1):da(e,a)}}return e}function Zn(e,t){return e+ht(wr()*(t-e+1))}function Kn(e,t){var r="";if(!e||t<1||t>d)return r;do{t%2&&(r+=e),(t=ht(t/2))&&(e+=e)}while(t);return r}function Yn(e,t){return Ri(Ci(e,t,al),e+"")}function Xn(e){return Yr(qo(e))}function Qn(e,t){var r=qo(e);return Li(r,ln(t,0,r.length))}function ea(e,t,n,a){if(!eo(e))return e;for(var i=-1,u=(t=_a(t,e)).length,o=u-1,l=e;null!=l&&++i<u;){var c=Di(t[i]),s=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(i!=o){var f=l[c];(s=a?a(f,c,l):r)===r&&(s=eo(f)?f:bi(t[i+1])?[]:{})}tn(l,c,s),l=l[c]}return e}var ta=Pr?function(e,t){return Pr.set(e,t),e}:al,ra=nt?function(e,t){return nt(e,"toString",{configurable:!0,enumerable:!1,value:tl(t),writable:!0})}:al;function na(e){return Li(qo(e))}function aa(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(r=r>a?a:r)<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var i=ue(a);++n<a;)i[n]=e[n+t];return i}function ia(e,t){var r;return pn(e,(function(e,n,a){return!(r=t(e,n,a))})),!!r}function ua(e,t,r){var n=0,a=null==e?n:e.length;if("number"==typeof t&&t==t&&a<=2147483647){for(;n<a;){var i=n+a>>>1,u=e[i];null!==u&&!lo(u)&&(r?u<=t:u<t)?n=i+1:a=i}return a}return oa(e,t,al,r)}function oa(e,t,n,a){var i=0,u=null==e?0:e.length;if(0===u)return 0;for(var o=(t=n(t))!=t,l=null===t,c=lo(t),s=t===r;i<u;){var f=ht((i+u)/2),d=n(e[f]),p=d!==r,v=null===d,m=d==d,h=lo(d);if(o)var y=a||m;else y=s?m&&(a||p):l?m&&p&&(a||!v):c?m&&p&&!v&&(a||!h):!v&&!h&&(a?d<=t:d<t);y?i=f+1:u=f}return br(u,4294967294)}function la(e,t){for(var r=-1,n=e.length,a=0,i=[];++r<n;){var u=e[r],o=t?t(u):u;if(!r||!Uu(o,l)){var l=o;i[a++]=0===u?0:u}}return i}function ca(e){return"number"==typeof e?e:lo(e)?p:+e}function sa(e){if("string"==typeof e)return e;if(zu(e))return At(e,sa)+"";if(lo(e))return Fr?Fr.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function fa(e,t,r){var n=-1,a=Rt,i=e.length,u=!0,o=[],l=o;if(r)u=!1,a=Ot;else if(i>=200){var c=t?null:Ka(e);if(c)return sr(c);u=!1,a=er,l=new Jr}else l=t?[]:o;e:for(;++n<i;){var s=e[n],f=t?t(s):s;if(s=r||0!==s?s:0,u&&f==f){for(var d=l.length;d--;)if(l[d]===f)continue e;t&&l.push(f),o.push(s)}else a(l,f,r)||(l!==o&&l.push(f),o.push(s))}return o}function da(e,t){return null==(e=ji(e,t=_a(t,e)))||delete e[Di(Ki(t))]}function pa(e,t,r,n){return ea(e,t,r(En(e,t)),n)}function va(e,t,r,n){for(var a=e.length,i=n?a:-1;(n?i--:++i<a)&&t(e[i],i,e););return r?aa(e,n?0:i,n?i+1:a):aa(e,n?i+1:0,n?a:i)}function ma(e,t){var r=e;return r instanceof zr&&(r=r.value()),Nt(t,(function(e,t){return t.func.apply(t.thisArg,Lt([e],t.args))}),r)}function ha(e,t,r){var n=e.length;if(n<2)return n?fa(e[0]):[];for(var a=-1,i=ue(n);++a<n;)for(var u=e[a],o=-1;++o<n;)o!=a&&(i[a]=dn(i[a]||u,e[o],t,r));return fa(gn(i,1),t,r)}function ya(e,t,n){for(var a=-1,i=e.length,u=t.length,o={};++a<i;){var l=a<u?t[a]:r;n(o,e[a],l)}return o}function ga(e){return Gu(e)?e:[]}function ba(e){return"function"==typeof e?e:al}function _a(e,t){return zu(e)?e:xi(e,t)?[e]:Ni(bo(e))}var xa=Yn;function wa(e,t,n){var a=e.length;return n=n===r?a:n,!t&&n>=a?e:aa(e,t,n)}var ka=ct||function(e){return vt.clearTimeout(e)};function Ea(e,t){if(t)return e.slice();var r=e.length,n=$e?$e(r):new e.constructor(r);return e.copy(n),n}function Ta(e){var t=new e.constructor(e.byteLength);return new He(t).set(new He(e)),t}function Sa(e,t){var r=t?Ta(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}function Ca(e,t){if(e!==t){var n=e!==r,a=null===e,i=e==e,u=lo(e),o=t!==r,l=null===t,c=t==t,s=lo(t);if(!l&&!s&&!u&&e>t||u&&o&&c&&!l&&!s||a&&o&&c||!n&&c||!i)return 1;if(!a&&!u&&!s&&e<t||s&&n&&i&&!a&&!u||l&&n&&i||!o&&i||!c)return-1}return 0}function ja(e,t,r,n){for(var a=-1,i=e.length,u=r.length,o=-1,l=t.length,c=gr(i-u,0),s=ue(l+c),f=!n;++o<l;)s[o]=t[o];for(;++a<u;)(f||a<i)&&(s[r[a]]=e[a]);for(;c--;)s[o++]=e[a++];return s}function Ia(e,t,r,n){for(var a=-1,i=e.length,u=-1,o=r.length,l=-1,c=t.length,s=gr(i-o,0),f=ue(s+c),d=!n;++a<s;)f[a]=e[a];for(var p=a;++l<c;)f[p+l]=t[l];for(;++u<o;)(d||a<i)&&(f[p+r[u]]=e[a++]);return f}function Pa(e,t){var r=-1,n=e.length;for(t||(t=ue(n));++r<n;)t[r]=e[r];return t}function Ma(e,t,n,a){var i=!n;n||(n={});for(var u=-1,o=t.length;++u<o;){var l=t[u],c=a?a(n[l],e[l],l,n,e):r;c===r&&(c=e[l]),i?un(n,l,c):tn(n,l,c)}return n}function Ra(e,t){return function(r,n){var a=zu(r)?Ct:nn,i=t?t():{};return a(r,e,ci(n,2),i)}}function Oa(e){return Yn((function(t,n){var a=-1,i=n.length,u=i>1?n[i-1]:r,o=i>2?n[2]:r;for(u=e.length>3&&"function"==typeof u?(i--,u):r,o&&_i(n[0],n[1],o)&&(u=i<3?r:u,i=1),t=Ce(t);++a<i;){var l=n[a];l&&e(t,l,a,u)}return t}))}function Aa(e,t){return function(r,n){if(null==r)return r;if(!$u(r))return e(r,n);for(var a=r.length,i=t?a:-1,u=Ce(r);(t?i--:++i<a)&&!1!==n(u[i],i,u););return r}}function La(e){return function(t,r,n){for(var a=-1,i=Ce(t),u=n(t),o=u.length;o--;){var l=u[e?o:++a];if(!1===r(i[l],l,i))break}return t}}function Na(e){return function(t){var n=ur(t=bo(t))?pr(t):r,a=n?n[0]:t.charAt(0),i=n?wa(n,1).join(""):t.slice(1);return a[e]()+i}}function Da(e){return function(t){return Nt(Xo(zo(t).replace(Qe,"")),e,"")}}function Ba(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=qr(e.prototype),n=e.apply(r,t);return eo(n)?n:r}}function Fa(e){return function(t,n,a){var i=Ce(t);if(!$u(t)){var u=ci(n,3);t=Ro(t),n=function(e){return u(i[e],e,i)}}var o=e(t,n,a);return o>-1?i[u?t[o]:o]:r}}function Ua(e){return ni((function(t){var a=t.length,i=a,u=Vr.prototype.thru;for(e&&t.reverse();i--;){var o=t[i];if("function"!=typeof o)throw new Pe(n);if(u&&!l&&"wrapper"==oi(o))var l=new Vr([],!0)}for(i=l?i:a;++i<a;){var c=oi(o=t[i]),s="wrapper"==c?ui(o):r;l=s&&wi(s[0])&&424==s[1]&&!s[4].length&&1==s[9]?l[oi(s[0])].apply(l,s[3]):1==o.length&&wi(o)?l[c]():l.thru(o)}return function(){var e=arguments,r=e[0];if(l&&1==e.length&&zu(r))return l.plant(r).value();for(var n=0,i=a?t[n].apply(this,e):r;++n<a;)i=t[n].call(this,i);return i}}))}function qa(e,t,n,a,i,u,o,l,s,f){var d=t&c,p=1&t,v=2&t,m=24&t,h=512&t,y=v?r:Ba(e);return function c(){for(var g=arguments.length,b=ue(g),_=g;_--;)b[_]=arguments[_];if(m)var x=li(c),w=function(e,t){for(var r=e.length,n=0;r--;)e[r]===t&&++n;return n}(b,x);if(a&&(b=ja(b,a,i,m)),u&&(b=Ia(b,u,o,m)),g-=w,m&&g<f){var k=cr(b,x);return Ja(e,t,qa,c.placeholder,n,b,k,l,s,f-g)}var E=p?n:this,T=v?E[e]:e;return g=b.length,l?b=function(e,t){var n=e.length,a=br(t.length,n),i=Pa(e);for(;a--;){var u=t[a];e[a]=bi(u,n)?i[u]:r}return e}(b,l):h&&g>1&&b.reverse(),d&&s<g&&(b.length=s),this&&this!==vt&&this instanceof c&&(T=y||Ba(T)),T.apply(E,b)}}function Wa(e,t){return function(r,n){return function(e,t,r,n){return xn(e,(function(e,a,i){t(n,r(e),a,i)})),n}(r,e,t(n),{})}}function Va(e,t){return function(n,a){var i;if(n===r&&a===r)return t;if(n!==r&&(i=n),a!==r){if(i===r)return a;"string"==typeof n||"string"==typeof a?(n=sa(n),a=sa(a)):(n=ca(n),a=ca(a)),i=e(n,a)}return i}}function za(e){return ni((function(t){return t=At(t,Xt(ci())),Yn((function(r){var n=this;return e(t,(function(e){return St(e,n,r)}))}))}))}function Ha(e,t){var n=(t=t===r?" ":sa(t)).length;if(n<2)return n?Kn(t,e):t;var a=Kn(t,mt(e/dr(t)));return ur(t)?wa(pr(a),0,e).join(""):a.slice(0,e)}function $a(e){return function(t,n,a){return a&&"number"!=typeof a&&_i(t,n,a)&&(n=a=r),t=vo(t),n===r?(n=t,t=0):n=vo(n),function(e,t,r,n){for(var a=-1,i=gr(mt((t-e)/(r||1)),0),u=ue(i);i--;)u[n?i:++a]=e,e+=r;return u}(t,n,a=a===r?t<n?1:-1:vo(a),e)}}function Ga(e){return function(t,r){return"string"==typeof t&&"string"==typeof r||(t=yo(t),r=yo(r)),e(t,r)}}function Ja(e,t,n,a,i,u,c,s,f,d){var p=8&t;t|=p?o:l,4&(t&=~(p?l:o))||(t&=-4);var v=[e,t,i,p?u:r,p?c:r,p?r:u,p?r:c,s,f,d],m=n.apply(r,v);return wi(e)&&Pi(m,v),m.placeholder=a,Oi(m,e,t)}function Za(e){var t=Se[e];return function(e,r){if(e=yo(e),(r=null==r?0:br(mo(r),292))&&Ft(e)){var n=(bo(e)+"e").split("e");return+((n=(bo(t(n[0]+"e"+(+n[1]+r)))+"e").split("e"))[0]+"e"+(+n[1]-r))}return t(e)}}var Ka=Cr&&1/sr(new Cr([,-0]))[1]==f?function(e){return new Cr(e)}:cl;function Ya(e){return function(t){var r=mi(t);return r==E?or(t):r==I?fr(t):function(e,t){return At(t,(function(t){return[t,e[t]]}))}(t,e(t))}}function Xa(e,t,a,f,d,p,v,m){var h=2&t;if(!h&&"function"!=typeof e)throw new Pe(n);var y=f?f.length:0;if(y||(t&=-97,f=d=r),v=v===r?v:gr(mo(v),0),m=m===r?m:mo(m),y-=d?d.length:0,t&l){var g=f,b=d;f=d=r}var _=h?r:ui(e),x=[e,t,a,f,d,g,b,p,v,m];if(_&&function(e,t){var r=e[1],n=t[1],a=r|n,u=a<131,o=n==c&&8==r||n==c&&r==s&&e[7].length<=t[8]||384==n&&t[7].length<=t[8]&&8==r;if(!u&&!o)return e;1&n&&(e[2]=t[2],a|=1&r?0:4);var l=t[3];if(l){var f=e[3];e[3]=f?ja(f,l,t[4]):l,e[4]=f?cr(e[3],i):t[4]}(l=t[5])&&(f=e[5],e[5]=f?Ia(f,l,t[6]):l,e[6]=f?cr(e[5],i):t[6]);(l=t[7])&&(e[7]=l);n&c&&(e[8]=null==e[8]?t[8]:br(e[8],t[8]));null==e[9]&&(e[9]=t[9]);e[0]=t[0],e[1]=a}(x,_),e=x[0],t=x[1],a=x[2],f=x[3],d=x[4],!(m=x[9]=x[9]===r?h?0:e.length:gr(x[9]-y,0))&&24&t&&(t&=-25),t&&1!=t)w=8==t||t==u?function(e,t,n){var a=Ba(e);return function i(){for(var u=arguments.length,o=ue(u),l=u,c=li(i);l--;)o[l]=arguments[l];var s=u<3&&o[0]!==c&&o[u-1]!==c?[]:cr(o,c);return(u-=s.length)<n?Ja(e,t,qa,i.placeholder,r,o,s,r,r,n-u):St(this&&this!==vt&&this instanceof i?a:e,this,o)}}(e,t,m):t!=o&&33!=t||d.length?qa.apply(r,x):function(e,t,r,n){var a=1&t,i=Ba(e);return function t(){for(var u=-1,o=arguments.length,l=-1,c=n.length,s=ue(c+o),f=this&&this!==vt&&this instanceof t?i:e;++l<c;)s[l]=n[l];for(;o--;)s[l++]=arguments[++u];return St(f,a?r:this,s)}}(e,t,a,f);else var w=function(e,t,r){var n=1&t,a=Ba(e);return function t(){return(this&&this!==vt&&this instanceof t?a:e).apply(n?r:this,arguments)}}(e,t,a);return Oi((_?ta:Pi)(w,x),e,t)}function Qa(e,t,n,a){return e===r||Uu(e,Oe[n])&&!Ne.call(a,n)?t:e}function ei(e,t,n,a,i,u){return eo(e)&&eo(t)&&(u.set(t,e),Vn(e,t,r,ei,u),u.delete(t)),e}function ti(e){return ao(e)?r:e}function ri(e,t,n,a,i,u){var o=1&n,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var s=u.get(e),f=u.get(t);if(s&&f)return s==t&&f==e;var d=-1,p=!0,v=2&n?new Jr:r;for(u.set(e,t),u.set(t,e);++d<l;){var m=e[d],h=t[d];if(a)var y=o?a(h,m,d,t,e,u):a(m,h,d,e,t,u);if(y!==r){if(y)continue;p=!1;break}if(v){if(!Bt(t,(function(e,t){if(!er(v,t)&&(m===e||i(m,e,n,a,u)))return v.push(t)}))){p=!1;break}}else if(m!==h&&!i(m,h,n,a,u)){p=!1;break}}return u.delete(e),u.delete(t),p}function ni(e){return Ri(Ci(e,r,Hi),e+"")}function ai(e){return Tn(e,Ro,pi)}function ii(e){return Tn(e,Oo,vi)}var ui=Pr?function(e){return Pr.get(e)}:cl;function oi(e){for(var t=e.name+"",r=Mr[t],n=Ne.call(Mr,t)?r.length:0;n--;){var a=r[n],i=a.func;if(null==i||i==e)return a.name}return t}function li(e){return(Ne.call(Ur,"placeholder")?Ur:e).placeholder}function ci(){var e=Ur.iteratee||il;return e=e===il?Nn:e,arguments.length?e(arguments[0],arguments[1]):e}function si(e,t){var r,n,a=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?a["string"==typeof t?"string":"hash"]:a.map}function fi(e){for(var t=Ro(e),r=t.length;r--;){var n=t[r],a=e[n];t[r]=[n,a,Ti(a)]}return t}function di(e,t){var n=function(e,t){return null==e?r:e[t]}(e,t);return Ln(n)?n:r}var pi=gt?function(e){return null==e?[]:(e=Ce(e),Mt(gt(e),(function(t){return Ze.call(e,t)})))}:hl,vi=gt?function(e){for(var t=[];e;)Lt(t,pi(e)),e=Ge(e);return t}:hl,mi=Sn;function hi(e,t,r){for(var n=-1,a=(t=_a(t,e)).length,i=!1;++n<a;){var u=Di(t[n]);if(!(i=null!=e&&r(e,u)))break;e=e[u]}return i||++n!=a?i:!!(a=null==e?0:e.length)&&Qu(a)&&bi(u,a)&&(zu(e)||Vu(e))}function yi(e){return"function"!=typeof e.constructor||Ei(e)?{}:qr(Ge(e))}function gi(e){return zu(e)||Vu(e)||!!(Ye&&e&&e[Ye])}function bi(e,t){var r=typeof e;return!!(t=null==t?d:t)&&("number"==r||"symbol"!=r&&be.test(e))&&e>-1&&e%1==0&&e<t}function _i(e,t,r){if(!eo(r))return!1;var n=typeof t;return!!("number"==n?$u(r)&&bi(t,r.length):"string"==n&&t in r)&&Uu(r[t],e)}function xi(e,t){if(zu(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!lo(e))||(te.test(e)||!ee.test(e)||null!=t&&e in Ce(t))}function wi(e){var t=oi(e),r=Ur[t];if("function"!=typeof r||!(t in zr.prototype))return!1;if(e===r)return!0;var n=ui(r);return!!n&&e===n[0]}(Er&&mi(new Er(new ArrayBuffer(1)))!=A||Tr&&mi(new Tr)!=E||Sr&&mi(Sr.resolve())!=C||Cr&&mi(new Cr)!=I||jr&&mi(new jr)!=R)&&(mi=function(e){var t=Sn(e),n=t==S?e.constructor:r,a=n?Bi(n):"";if(a)switch(a){case Rr:return A;case Or:return E;case Ar:return C;case Lr:return I;case Nr:return R}return t});var ki=Ae?Yu:yl;function Ei(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Oe)}function Ti(e){return e==e&&!eo(e)}function Si(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==r||e in Ce(n)))}}function Ci(e,t,n){return t=gr(t===r?e.length-1:t,0),function(){for(var r=arguments,a=-1,i=gr(r.length-t,0),u=ue(i);++a<i;)u[a]=r[t+a];a=-1;for(var o=ue(t+1);++a<t;)o[a]=r[a];return o[t]=n(u),St(e,this,o)}}function ji(e,t){return t.length<2?e:En(e,aa(t,0,-1))}function Ii(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var Pi=Ai(ta),Mi=pt||function(e,t){return vt.setTimeout(e,t)},Ri=Ai(ra);function Oi(e,t,r){var n=t+"";return Ri(e,function(e,t){var r=t.length;if(!r)return e;var n=r-1;return t[n]=(r>1?"& ":"")+t[n],t=t.join(r>2?", ":" "),e.replace(oe,"{\n/* [wrapped with "+t+"] */\n")}(n,function(e,t){return jt(m,(function(r){var n="_."+r[0];t&r[1]&&!Rt(e,n)&&e.push(n)})),e.sort()}(function(e){var t=e.match(le);return t?t[1].split(ce):[]}(n),r)))}function Ai(e){var t=0,n=0;return function(){var a=_r(),i=16-(a-n);if(n=a,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(r,arguments)}}function Li(e,t){var n=-1,a=e.length,i=a-1;for(t=t===r?a:t;++n<t;){var u=Zn(n,i),o=e[u];e[u]=e[n],e[n]=o}return e.length=t,e}var Ni=function(e){var t=Au(e,(function(e){return 500===r.size&&r.clear(),e})),r=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(re,(function(e,r,n,a){t.push(n?a.replace(de,"$1"):r||e)})),t}));function Di(e){if("string"==typeof e||lo(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}function Bi(e){if(null!=e){try{return Le.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Fi(e){if(e instanceof zr)return e.clone();var t=new Vr(e.__wrapped__,e.__chain__);return t.__actions__=Pa(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}var Ui=Yn((function(e,t){return Gu(e)?dn(e,gn(t,1,Gu,!0)):[]})),qi=Yn((function(e,t){var n=Ki(t);return Gu(n)&&(n=r),Gu(e)?dn(e,gn(t,1,Gu,!0),ci(n,2)):[]})),Wi=Yn((function(e,t){var n=Ki(t);return Gu(n)&&(n=r),Gu(e)?dn(e,gn(t,1,Gu,!0),r,n):[]}));function Vi(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var a=null==r?0:mo(r);return a<0&&(a=gr(n+a,0)),qt(e,ci(t,3),a)}function zi(e,t,n){var a=null==e?0:e.length;if(!a)return-1;var i=a-1;return n!==r&&(i=mo(n),i=n<0?gr(a+i,0):br(i,a-1)),qt(e,ci(t,3),i,!0)}function Hi(e){return(null==e?0:e.length)?gn(e,1):[]}function $i(e){return e&&e.length?e[0]:r}var Gi=Yn((function(e){var t=At(e,ga);return t.length&&t[0]===e[0]?Pn(t):[]})),Ji=Yn((function(e){var t=Ki(e),n=At(e,ga);return t===Ki(n)?t=r:n.pop(),n.length&&n[0]===e[0]?Pn(n,ci(t,2)):[]})),Zi=Yn((function(e){var t=Ki(e),n=At(e,ga);return(t="function"==typeof t?t:r)&&n.pop(),n.length&&n[0]===e[0]?Pn(n,r,t):[]}));function Ki(e){var t=null==e?0:e.length;return t?e[t-1]:r}var Yi=Yn(Xi);function Xi(e,t){return e&&e.length&&t&&t.length?Gn(e,t):e}var Qi=ni((function(e,t){var r=null==e?0:e.length,n=on(e,t);return Jn(e,At(t,(function(e){return bi(e,r)?+e:e})).sort(Ca)),n}));function eu(e){return null==e?e:kr.call(e)}var tu=Yn((function(e){return fa(gn(e,1,Gu,!0))})),ru=Yn((function(e){var t=Ki(e);return Gu(t)&&(t=r),fa(gn(e,1,Gu,!0),ci(t,2))})),nu=Yn((function(e){var t=Ki(e);return t="function"==typeof t?t:r,fa(gn(e,1,Gu,!0),r,t)}));function au(e){if(!e||!e.length)return[];var t=0;return e=Mt(e,(function(e){if(Gu(e))return t=gr(e.length,t),!0})),Kt(t,(function(t){return At(e,$t(t))}))}function iu(e,t){if(!e||!e.length)return[];var n=au(e);return null==t?n:At(n,(function(e){return St(t,r,e)}))}var uu=Yn((function(e,t){return Gu(e)?dn(e,t):[]})),ou=Yn((function(e){return ha(Mt(e,Gu))})),lu=Yn((function(e){var t=Ki(e);return Gu(t)&&(t=r),ha(Mt(e,Gu),ci(t,2))})),cu=Yn((function(e){var t=Ki(e);return t="function"==typeof t?t:r,ha(Mt(e,Gu),r,t)})),su=Yn(au);var fu=Yn((function(e){var t=e.length,n=t>1?e[t-1]:r;return n="function"==typeof n?(e.pop(),n):r,iu(e,n)}));function du(e){var t=Ur(e);return t.__chain__=!0,t}function pu(e,t){return t(e)}var vu=ni((function(e){var t=e.length,n=t?e[0]:0,a=this.__wrapped__,i=function(t){return on(t,e)};return!(t>1||this.__actions__.length)&&a instanceof zr&&bi(n)?((a=a.slice(n,+n+(t?1:0))).__actions__.push({func:pu,args:[i],thisArg:r}),new Vr(a,this.__chain__).thru((function(e){return t&&!e.length&&e.push(r),e}))):this.thru(i)}));var mu=Ra((function(e,t,r){Ne.call(e,r)?++e[r]:un(e,r,1)}));var hu=Fa(Vi),yu=Fa(zi);function gu(e,t){return(zu(e)?jt:pn)(e,ci(t,3))}function bu(e,t){return(zu(e)?It:vn)(e,ci(t,3))}var _u=Ra((function(e,t,r){Ne.call(e,r)?e[r].push(t):un(e,r,[t])}));var xu=Yn((function(e,t,r){var n=-1,a="function"==typeof t,i=$u(e)?ue(e.length):[];return pn(e,(function(e){i[++n]=a?St(t,e,r):Mn(e,t,r)})),i})),wu=Ra((function(e,t,r){un(e,r,t)}));function ku(e,t){return(zu(e)?At:Un)(e,ci(t,3))}var Eu=Ra((function(e,t,r){e[r?0:1].push(t)}),(function(){return[[],[]]}));var Tu=Yn((function(e,t){if(null==e)return[];var r=t.length;return r>1&&_i(e,t[0],t[1])?t=[]:r>2&&_i(t[0],t[1],t[2])&&(t=[t[0]]),Hn(e,gn(t,1),[])})),Su=dt||function(){return vt.Date.now()};function Cu(e,t,n){return t=n?r:t,t=e&&null==t?e.length:t,Xa(e,c,r,r,r,r,t)}function ju(e,t){var a;if("function"!=typeof t)throw new Pe(n);return e=mo(e),function(){return--e>0&&(a=t.apply(this,arguments)),e<=1&&(t=r),a}}var Iu=Yn((function(e,t,r){var n=1;if(r.length){var a=cr(r,li(Iu));n|=o}return Xa(e,n,t,r,a)})),Pu=Yn((function(e,t,r){var n=3;if(r.length){var a=cr(r,li(Pu));n|=o}return Xa(t,n,e,r,a)}));function Mu(e,t,a){var i,u,o,l,c,s,f=0,d=!1,p=!1,v=!0;if("function"!=typeof e)throw new Pe(n);function m(t){var n=i,a=u;return i=u=r,f=t,l=e.apply(a,n)}function h(e){var n=e-s;return s===r||n>=t||n<0||p&&e-f>=o}function y(){var e=Su();if(h(e))return g(e);c=Mi(y,function(e){var r=t-(e-s);return p?br(r,o-(e-f)):r}(e))}function g(e){return c=r,v&&i?m(e):(i=u=r,l)}function b(){var e=Su(),n=h(e);if(i=arguments,u=this,s=e,n){if(c===r)return function(e){return f=e,c=Mi(y,t),d?m(e):l}(s);if(p)return ka(c),c=Mi(y,t),m(s)}return c===r&&(c=Mi(y,t)),l}return t=yo(t)||0,eo(a)&&(d=!!a.leading,o=(p="maxWait"in a)?gr(yo(a.maxWait)||0,t):o,v="trailing"in a?!!a.trailing:v),b.cancel=function(){c!==r&&ka(c),f=0,i=s=u=c=r},b.flush=function(){return c===r?l:g(Su())},b}var Ru=Yn((function(e,t){return fn(e,1,t)})),Ou=Yn((function(e,t,r){return fn(e,yo(t)||0,r)}));function Au(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new Pe(n);var r=function(){var n=arguments,a=t?t.apply(this,n):n[0],i=r.cache;if(i.has(a))return i.get(a);var u=e.apply(this,n);return r.cache=i.set(a,u)||i,u};return r.cache=new(Au.Cache||Gr),r}function Lu(e){if("function"!=typeof e)throw new Pe(n);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}Au.Cache=Gr;var Nu=xa((function(e,t){var r=(t=1==t.length&&zu(t[0])?At(t[0],Xt(ci())):At(gn(t,1),Xt(ci()))).length;return Yn((function(n){for(var a=-1,i=br(n.length,r);++a<i;)n[a]=t[a].call(this,n[a]);return St(e,this,n)}))})),Du=Yn((function(e,t){var n=cr(t,li(Du));return Xa(e,o,r,t,n)})),Bu=Yn((function(e,t){var n=cr(t,li(Bu));return Xa(e,l,r,t,n)})),Fu=ni((function(e,t){return Xa(e,s,r,r,r,t)}));function Uu(e,t){return e===t||e!=e&&t!=t}var qu=Ga(Cn),Wu=Ga((function(e,t){return e>=t})),Vu=Rn(function(){return arguments}())?Rn:function(e){return to(e)&&Ne.call(e,"callee")&&!Ze.call(e,"callee")},zu=ue.isArray,Hu=_t?Xt(_t):function(e){return to(e)&&Sn(e)==O};function $u(e){return null!=e&&Qu(e.length)&&!Yu(e)}function Gu(e){return to(e)&&$u(e)}var Ju=bt||yl,Zu=xt?Xt(xt):function(e){return to(e)&&Sn(e)==_};function Ku(e){if(!to(e))return!1;var t=Sn(e);return t==x||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!ao(e)}function Yu(e){if(!eo(e))return!1;var t=Sn(e);return t==w||t==k||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Xu(e){return"number"==typeof e&&e==mo(e)}function Qu(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=d}function eo(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function to(e){return null!=e&&"object"==typeof e}var ro=wt?Xt(wt):function(e){return to(e)&&mi(e)==E};function no(e){return"number"==typeof e||to(e)&&Sn(e)==T}function ao(e){if(!to(e)||Sn(e)!=S)return!1;var t=Ge(e);if(null===t)return!0;var r=Ne.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&Le.call(r)==Ue}var io=kt?Xt(kt):function(e){return to(e)&&Sn(e)==j};var uo=Et?Xt(Et):function(e){return to(e)&&mi(e)==I};function oo(e){return"string"==typeof e||!zu(e)&&to(e)&&Sn(e)==P}function lo(e){return"symbol"==typeof e||to(e)&&Sn(e)==M}var co=Tt?Xt(Tt):function(e){return to(e)&&Qu(e.length)&&!!ot[Sn(e)]};var so=Ga(Fn),fo=Ga((function(e,t){return e<=t}));function po(e){if(!e)return[];if($u(e))return oo(e)?pr(e):Pa(e);if(Xe&&e[Xe])return function(e){for(var t,r=[];!(t=e.next()).done;)r.push(t.value);return r}(e[Xe]());var t=mi(e);return(t==E?or:t==I?sr:qo)(e)}function vo(e){return e?(e=yo(e))===f||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0}function mo(e){var t=vo(e),r=t%1;return t==t?r?t-r:t:0}function ho(e){return e?ln(mo(e),0,v):0}function yo(e){if("number"==typeof e)return e;if(lo(e))return p;if(eo(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=eo(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Yt(e);var r=he.test(e);return r||ge.test(e)?ft(e.slice(2),r?2:8):me.test(e)?p:+e}function go(e){return Ma(e,Oo(e))}function bo(e){return null==e?"":sa(e)}var _o=Oa((function(e,t){if(Ei(t)||$u(t))Ma(t,Ro(t),e);else for(var r in t)Ne.call(t,r)&&tn(e,r,t[r])})),xo=Oa((function(e,t){Ma(t,Oo(t),e)})),wo=Oa((function(e,t,r,n){Ma(t,Oo(t),e,n)})),ko=Oa((function(e,t,r,n){Ma(t,Ro(t),e,n)})),Eo=ni(on);var To=Yn((function(e,t){e=Ce(e);var n=-1,a=t.length,i=a>2?t[2]:r;for(i&&_i(t[0],t[1],i)&&(a=1);++n<a;)for(var u=t[n],o=Oo(u),l=-1,c=o.length;++l<c;){var s=o[l],f=e[s];(f===r||Uu(f,Oe[s])&&!Ne.call(e,s))&&(e[s]=u[s])}return e})),So=Yn((function(e){return e.push(r,ei),St(Lo,r,e)}));function Co(e,t,n){var a=null==e?r:En(e,t);return a===r?n:a}function jo(e,t){return null!=e&&hi(e,t,In)}var Io=Wa((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),e[t]=r}),tl(al)),Po=Wa((function(e,t,r){null!=t&&"function"!=typeof t.toString&&(t=Fe.call(t)),Ne.call(e,t)?e[t].push(r):e[t]=[r]}),ci),Mo=Yn(Mn);function Ro(e){return $u(e)?Kr(e):Dn(e)}function Oo(e){return $u(e)?Kr(e,!0):Bn(e)}var Ao=Oa((function(e,t,r){Vn(e,t,r)})),Lo=Oa((function(e,t,r,n){Vn(e,t,r,n)})),No=ni((function(e,t){var r={};if(null==e)return r;var n=!1;t=At(t,(function(t){return t=_a(t,e),n||(n=t.length>1),t})),Ma(e,ii(e),r),n&&(r=cn(r,7,ti));for(var a=t.length;a--;)da(r,t[a]);return r}));var Do=ni((function(e,t){return null==e?{}:function(e,t){return $n(e,t,(function(t,r){return jo(e,r)}))}(e,t)}));function Bo(e,t){if(null==e)return{};var r=At(ii(e),(function(e){return[e]}));return t=ci(t),$n(e,r,(function(e,r){return t(e,r[0])}))}var Fo=Ya(Ro),Uo=Ya(Oo);function qo(e){return null==e?[]:Qt(e,Ro(e))}var Wo=Da((function(e,t,r){return t=t.toLowerCase(),e+(r?Vo(t):t)}));function Vo(e){return Yo(bo(e).toLowerCase())}function zo(e){return(e=bo(e))&&e.replace(_e,nr).replace(et,"")}var Ho=Da((function(e,t,r){return e+(r?"-":"")+t.toLowerCase()})),$o=Da((function(e,t,r){return e+(r?" ":"")+t.toLowerCase()})),Go=Na("toLowerCase");var Jo=Da((function(e,t,r){return e+(r?"_":"")+t.toLowerCase()}));var Zo=Da((function(e,t,r){return e+(r?" ":"")+Yo(t)}));var Ko=Da((function(e,t,r){return e+(r?" ":"")+t.toUpperCase()})),Yo=Na("toUpperCase");function Xo(e,t,n){return e=bo(e),(t=n?r:t)===r?function(e){return at.test(e)}(e)?function(e){return e.match(rt)||[]}(e):function(e){return e.match(se)||[]}(e):e.match(t)||[]}var Qo=Yn((function(e,t){try{return St(e,r,t)}catch(e){return Ku(e)?e:new Ee(e)}})),el=ni((function(e,t){return jt(t,(function(t){t=Di(t),un(e,t,Iu(e[t],e))})),e}));function tl(e){return function(){return e}}var rl=Ua(),nl=Ua(!0);function al(e){return e}function il(e){return Nn("function"==typeof e?e:cn(e,1))}var ul=Yn((function(e,t){return function(r){return Mn(r,e,t)}})),ol=Yn((function(e,t){return function(r){return Mn(e,r,t)}}));function ll(e,t,r){var n=Ro(t),a=kn(t,n);null!=r||eo(t)&&(a.length||!n.length)||(r=t,t=e,e=this,a=kn(t,Ro(t)));var i=!(eo(r)&&"chain"in r&&!r.chain),u=Yu(e);return jt(a,(function(r){var n=t[r];e[r]=n,u&&(e.prototype[r]=function(){var t=this.__chain__;if(i||t){var r=e(this.__wrapped__);return(r.__actions__=Pa(this.__actions__)).push({func:n,args:arguments,thisArg:e}),r.__chain__=t,r}return n.apply(e,Lt([this.value()],arguments))})})),e}function cl(){}var sl=za(At),fl=za(Pt),dl=za(Bt);function pl(e){return xi(e)?$t(Di(e)):function(e){return function(t){return En(t,e)}}(e)}var vl=$a(),ml=$a(!0);function hl(){return[]}function yl(){return!1}var gl=Va((function(e,t){return e+t}),0),bl=Za("ceil"),_l=Va((function(e,t){return e/t}),1),xl=Za("floor");var wl,kl=Va((function(e,t){return e*t}),1),El=Za("round"),Tl=Va((function(e,t){return e-t}),0);return Ur.after=function(e,t){if("function"!=typeof t)throw new Pe(n);return e=mo(e),function(){if(--e<1)return t.apply(this,arguments)}},Ur.ary=Cu,Ur.assign=_o,Ur.assignIn=xo,Ur.assignInWith=wo,Ur.assignWith=ko,Ur.at=Eo,Ur.before=ju,Ur.bind=Iu,Ur.bindAll=el,Ur.bindKey=Pu,Ur.castArray=function(){if(!arguments.length)return[];var e=arguments[0];return zu(e)?e:[e]},Ur.chain=du,Ur.chunk=function(e,t,n){t=(n?_i(e,t,n):t===r)?1:gr(mo(t),0);var a=null==e?0:e.length;if(!a||t<1)return[];for(var i=0,u=0,o=ue(mt(a/t));i<a;)o[u++]=aa(e,i,i+=t);return o},Ur.compact=function(e){for(var t=-1,r=null==e?0:e.length,n=0,a=[];++t<r;){var i=e[t];i&&(a[n++]=i)}return a},Ur.concat=function(){var e=arguments.length;if(!e)return[];for(var t=ue(e-1),r=arguments[0],n=e;n--;)t[n-1]=arguments[n];return Lt(zu(r)?Pa(r):[r],gn(t,1))},Ur.cond=function(e){var t=null==e?0:e.length,r=ci();return e=t?At(e,(function(e){if("function"!=typeof e[1])throw new Pe(n);return[r(e[0]),e[1]]})):[],Yn((function(r){for(var n=-1;++n<t;){var a=e[n];if(St(a[0],this,r))return St(a[1],this,r)}}))},Ur.conforms=function(e){return function(e){var t=Ro(e);return function(r){return sn(r,e,t)}}(cn(e,1))},Ur.constant=tl,Ur.countBy=mu,Ur.create=function(e,t){var r=qr(e);return null==t?r:an(r,t)},Ur.curry=function e(t,n,a){var i=Xa(t,8,r,r,r,r,r,n=a?r:n);return i.placeholder=e.placeholder,i},Ur.curryRight=function e(t,n,a){var i=Xa(t,u,r,r,r,r,r,n=a?r:n);return i.placeholder=e.placeholder,i},Ur.debounce=Mu,Ur.defaults=To,Ur.defaultsDeep=So,Ur.defer=Ru,Ur.delay=Ou,Ur.difference=Ui,Ur.differenceBy=qi,Ur.differenceWith=Wi,Ur.drop=function(e,t,n){var a=null==e?0:e.length;return a?aa(e,(t=n||t===r?1:mo(t))<0?0:t,a):[]},Ur.dropRight=function(e,t,n){var a=null==e?0:e.length;return a?aa(e,0,(t=a-(t=n||t===r?1:mo(t)))<0?0:t):[]},Ur.dropRightWhile=function(e,t){return e&&e.length?va(e,ci(t,3),!0,!0):[]},Ur.dropWhile=function(e,t){return e&&e.length?va(e,ci(t,3),!0):[]},Ur.fill=function(e,t,n,a){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&_i(e,t,n)&&(n=0,a=i),function(e,t,n,a){var i=e.length;for((n=mo(n))<0&&(n=-n>i?0:i+n),(a=a===r||a>i?i:mo(a))<0&&(a+=i),a=n>a?0:ho(a);n<a;)e[n++]=t;return e}(e,t,n,a)):[]},Ur.filter=function(e,t){return(zu(e)?Mt:yn)(e,ci(t,3))},Ur.flatMap=function(e,t){return gn(ku(e,t),1)},Ur.flatMapDeep=function(e,t){return gn(ku(e,t),f)},Ur.flatMapDepth=function(e,t,n){return n=n===r?1:mo(n),gn(ku(e,t),n)},Ur.flatten=Hi,Ur.flattenDeep=function(e){return(null==e?0:e.length)?gn(e,f):[]},Ur.flattenDepth=function(e,t){return(null==e?0:e.length)?gn(e,t=t===r?1:mo(t)):[]},Ur.flip=function(e){return Xa(e,512)},Ur.flow=rl,Ur.flowRight=nl,Ur.fromPairs=function(e){for(var t=-1,r=null==e?0:e.length,n={};++t<r;){var a=e[t];n[a[0]]=a[1]}return n},Ur.functions=function(e){return null==e?[]:kn(e,Ro(e))},Ur.functionsIn=function(e){return null==e?[]:kn(e,Oo(e))},Ur.groupBy=_u,Ur.initial=function(e){return(null==e?0:e.length)?aa(e,0,-1):[]},Ur.intersection=Gi,Ur.intersectionBy=Ji,Ur.intersectionWith=Zi,Ur.invert=Io,Ur.invertBy=Po,Ur.invokeMap=xu,Ur.iteratee=il,Ur.keyBy=wu,Ur.keys=Ro,Ur.keysIn=Oo,Ur.map=ku,Ur.mapKeys=function(e,t){var r={};return t=ci(t,3),xn(e,(function(e,n,a){un(r,t(e,n,a),e)})),r},Ur.mapValues=function(e,t){var r={};return t=ci(t,3),xn(e,(function(e,n,a){un(r,n,t(e,n,a))})),r},Ur.matches=function(e){return qn(cn(e,1))},Ur.matchesProperty=function(e,t){return Wn(e,cn(t,1))},Ur.memoize=Au,Ur.merge=Ao,Ur.mergeWith=Lo,Ur.method=ul,Ur.methodOf=ol,Ur.mixin=ll,Ur.negate=Lu,Ur.nthArg=function(e){return e=mo(e),Yn((function(t){return zn(t,e)}))},Ur.omit=No,Ur.omitBy=function(e,t){return Bo(e,Lu(ci(t)))},Ur.once=function(e){return ju(2,e)},Ur.orderBy=function(e,t,n,a){return null==e?[]:(zu(t)||(t=null==t?[]:[t]),zu(n=a?r:n)||(n=null==n?[]:[n]),Hn(e,t,n))},Ur.over=sl,Ur.overArgs=Nu,Ur.overEvery=fl,Ur.overSome=dl,Ur.partial=Du,Ur.partialRight=Bu,Ur.partition=Eu,Ur.pick=Do,Ur.pickBy=Bo,Ur.property=pl,Ur.propertyOf=function(e){return function(t){return null==e?r:En(e,t)}},Ur.pull=Yi,Ur.pullAll=Xi,Ur.pullAllBy=function(e,t,r){return e&&e.length&&t&&t.length?Gn(e,t,ci(r,2)):e},Ur.pullAllWith=function(e,t,n){return e&&e.length&&t&&t.length?Gn(e,t,r,n):e},Ur.pullAt=Qi,Ur.range=vl,Ur.rangeRight=ml,Ur.rearg=Fu,Ur.reject=function(e,t){return(zu(e)?Mt:yn)(e,Lu(ci(t,3)))},Ur.remove=function(e,t){var r=[];if(!e||!e.length)return r;var n=-1,a=[],i=e.length;for(t=ci(t,3);++n<i;){var u=e[n];t(u,n,e)&&(r.push(u),a.push(n))}return Jn(e,a),r},Ur.rest=function(e,t){if("function"!=typeof e)throw new Pe(n);return Yn(e,t=t===r?t:mo(t))},Ur.reverse=eu,Ur.sampleSize=function(e,t,n){return t=(n?_i(e,t,n):t===r)?1:mo(t),(zu(e)?Xr:Qn)(e,t)},Ur.set=function(e,t,r){return null==e?e:ea(e,t,r)},Ur.setWith=function(e,t,n,a){return a="function"==typeof a?a:r,null==e?e:ea(e,t,n,a)},Ur.shuffle=function(e){return(zu(e)?Qr:na)(e)},Ur.slice=function(e,t,n){var a=null==e?0:e.length;return a?(n&&"number"!=typeof n&&_i(e,t,n)?(t=0,n=a):(t=null==t?0:mo(t),n=n===r?a:mo(n)),aa(e,t,n)):[]},Ur.sortBy=Tu,Ur.sortedUniq=function(e){return e&&e.length?la(e):[]},Ur.sortedUniqBy=function(e,t){return e&&e.length?la(e,ci(t,2)):[]},Ur.split=function(e,t,n){return n&&"number"!=typeof n&&_i(e,t,n)&&(t=n=r),(n=n===r?v:n>>>0)?(e=bo(e))&&("string"==typeof t||null!=t&&!io(t))&&!(t=sa(t))&&ur(e)?wa(pr(e),0,n):e.split(t,n):[]},Ur.spread=function(e,t){if("function"!=typeof e)throw new Pe(n);return t=null==t?0:gr(mo(t),0),Yn((function(r){var n=r[t],a=wa(r,0,t);return n&&Lt(a,n),St(e,this,a)}))},Ur.tail=function(e){var t=null==e?0:e.length;return t?aa(e,1,t):[]},Ur.take=function(e,t,n){return e&&e.length?aa(e,0,(t=n||t===r?1:mo(t))<0?0:t):[]},Ur.takeRight=function(e,t,n){var a=null==e?0:e.length;return a?aa(e,(t=a-(t=n||t===r?1:mo(t)))<0?0:t,a):[]},Ur.takeRightWhile=function(e,t){return e&&e.length?va(e,ci(t,3),!1,!0):[]},Ur.takeWhile=function(e,t){return e&&e.length?va(e,ci(t,3)):[]},Ur.tap=function(e,t){return t(e),e},Ur.throttle=function(e,t,r){var a=!0,i=!0;if("function"!=typeof e)throw new Pe(n);return eo(r)&&(a="leading"in r?!!r.leading:a,i="trailing"in r?!!r.trailing:i),Mu(e,t,{leading:a,maxWait:t,trailing:i})},Ur.thru=pu,Ur.toArray=po,Ur.toPairs=Fo,Ur.toPairsIn=Uo,Ur.toPath=function(e){return zu(e)?At(e,Di):lo(e)?[e]:Pa(Ni(bo(e)))},Ur.toPlainObject=go,Ur.transform=function(e,t,r){var n=zu(e),a=n||Ju(e)||co(e);if(t=ci(t,4),null==r){var i=e&&e.constructor;r=a?n?new i:[]:eo(e)&&Yu(i)?qr(Ge(e)):{}}return(a?jt:xn)(e,(function(e,n,a){return t(r,e,n,a)})),r},Ur.unary=function(e){return Cu(e,1)},Ur.union=tu,Ur.unionBy=ru,Ur.unionWith=nu,Ur.uniq=function(e){return e&&e.length?fa(e):[]},Ur.uniqBy=function(e,t){return e&&e.length?fa(e,ci(t,2)):[]},Ur.uniqWith=function(e,t){return t="function"==typeof t?t:r,e&&e.length?fa(e,r,t):[]},Ur.unset=function(e,t){return null==e||da(e,t)},Ur.unzip=au,Ur.unzipWith=iu,Ur.update=function(e,t,r){return null==e?e:pa(e,t,ba(r))},Ur.updateWith=function(e,t,n,a){return a="function"==typeof a?a:r,null==e?e:pa(e,t,ba(n),a)},Ur.values=qo,Ur.valuesIn=function(e){return null==e?[]:Qt(e,Oo(e))},Ur.without=uu,Ur.words=Xo,Ur.wrap=function(e,t){return Du(ba(t),e)},Ur.xor=ou,Ur.xorBy=lu,Ur.xorWith=cu,Ur.zip=su,Ur.zipObject=function(e,t){return ya(e||[],t||[],tn)},Ur.zipObjectDeep=function(e,t){return ya(e||[],t||[],ea)},Ur.zipWith=fu,Ur.entries=Fo,Ur.entriesIn=Uo,Ur.extend=xo,Ur.extendWith=wo,ll(Ur,Ur),Ur.add=gl,Ur.attempt=Qo,Ur.camelCase=Wo,Ur.capitalize=Vo,Ur.ceil=bl,Ur.clamp=function(e,t,n){return n===r&&(n=t,t=r),n!==r&&(n=(n=yo(n))==n?n:0),t!==r&&(t=(t=yo(t))==t?t:0),ln(yo(e),t,n)},Ur.clone=function(e){return cn(e,4)},Ur.cloneDeep=function(e){return cn(e,5)},Ur.cloneDeepWith=function(e,t){return cn(e,5,t="function"==typeof t?t:r)},Ur.cloneWith=function(e,t){return cn(e,4,t="function"==typeof t?t:r)},Ur.conformsTo=function(e,t){return null==t||sn(e,t,Ro(t))},Ur.deburr=zo,Ur.defaultTo=function(e,t){return null==e||e!=e?t:e},Ur.divide=_l,Ur.endsWith=function(e,t,n){e=bo(e),t=sa(t);var a=e.length,i=n=n===r?a:ln(mo(n),0,a);return(n-=t.length)>=0&&e.slice(n,i)==t},Ur.eq=Uu,Ur.escape=function(e){return(e=bo(e))&&K.test(e)?e.replace(J,ar):e},Ur.escapeRegExp=function(e){return(e=bo(e))&&ae.test(e)?e.replace(ne,"\\$&"):e},Ur.every=function(e,t,n){var a=zu(e)?Pt:mn;return n&&_i(e,t,n)&&(t=r),a(e,ci(t,3))},Ur.find=hu,Ur.findIndex=Vi,Ur.findKey=function(e,t){return Ut(e,ci(t,3),xn)},Ur.findLast=yu,Ur.findLastIndex=zi,Ur.findLastKey=function(e,t){return Ut(e,ci(t,3),wn)},Ur.floor=xl,Ur.forEach=gu,Ur.forEachRight=bu,Ur.forIn=function(e,t){return null==e?e:bn(e,ci(t,3),Oo)},Ur.forInRight=function(e,t){return null==e?e:_n(e,ci(t,3),Oo)},Ur.forOwn=function(e,t){return e&&xn(e,ci(t,3))},Ur.forOwnRight=function(e,t){return e&&wn(e,ci(t,3))},Ur.get=Co,Ur.gt=qu,Ur.gte=Wu,Ur.has=function(e,t){return null!=e&&hi(e,t,jn)},Ur.hasIn=jo,Ur.head=$i,Ur.identity=al,Ur.includes=function(e,t,r,n){e=$u(e)?e:qo(e),r=r&&!n?mo(r):0;var a=e.length;return r<0&&(r=gr(a+r,0)),oo(e)?r<=a&&e.indexOf(t,r)>-1:!!a&&Wt(e,t,r)>-1},Ur.indexOf=function(e,t,r){var n=null==e?0:e.length;if(!n)return-1;var a=null==r?0:mo(r);return a<0&&(a=gr(n+a,0)),Wt(e,t,a)},Ur.inRange=function(e,t,n){return t=vo(t),n===r?(n=t,t=0):n=vo(n),function(e,t,r){return e>=br(t,r)&&e<gr(t,r)}(e=yo(e),t,n)},Ur.invoke=Mo,Ur.isArguments=Vu,Ur.isArray=zu,Ur.isArrayBuffer=Hu,Ur.isArrayLike=$u,Ur.isArrayLikeObject=Gu,Ur.isBoolean=function(e){return!0===e||!1===e||to(e)&&Sn(e)==b},Ur.isBuffer=Ju,Ur.isDate=Zu,Ur.isElement=function(e){return to(e)&&1===e.nodeType&&!ao(e)},Ur.isEmpty=function(e){if(null==e)return!0;if($u(e)&&(zu(e)||"string"==typeof e||"function"==typeof e.splice||Ju(e)||co(e)||Vu(e)))return!e.length;var t=mi(e);if(t==E||t==I)return!e.size;if(Ei(e))return!Dn(e).length;for(var r in e)if(Ne.call(e,r))return!1;return!0},Ur.isEqual=function(e,t){return On(e,t)},Ur.isEqualWith=function(e,t,n){var a=(n="function"==typeof n?n:r)?n(e,t):r;return a===r?On(e,t,r,n):!!a},Ur.isError=Ku,Ur.isFinite=function(e){return"number"==typeof e&&Ft(e)},Ur.isFunction=Yu,Ur.isInteger=Xu,Ur.isLength=Qu,Ur.isMap=ro,Ur.isMatch=function(e,t){return e===t||An(e,t,fi(t))},Ur.isMatchWith=function(e,t,n){return n="function"==typeof n?n:r,An(e,t,fi(t),n)},Ur.isNaN=function(e){return no(e)&&e!=+e},Ur.isNative=function(e){if(ki(e))throw new Ee("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ln(e)},Ur.isNil=function(e){return null==e},Ur.isNull=function(e){return null===e},Ur.isNumber=no,Ur.isObject=eo,Ur.isObjectLike=to,Ur.isPlainObject=ao,Ur.isRegExp=io,Ur.isSafeInteger=function(e){return Xu(e)&&e>=-9007199254740991&&e<=d},Ur.isSet=uo,Ur.isString=oo,Ur.isSymbol=lo,Ur.isTypedArray=co,Ur.isUndefined=function(e){return e===r},Ur.isWeakMap=function(e){return to(e)&&mi(e)==R},Ur.isWeakSet=function(e){return to(e)&&"[object WeakSet]"==Sn(e)},Ur.join=function(e,t){return null==e?"":Gt.call(e,t)},Ur.kebabCase=Ho,Ur.last=Ki,Ur.lastIndexOf=function(e,t,n){var a=null==e?0:e.length;if(!a)return-1;var i=a;return n!==r&&(i=(i=mo(n))<0?gr(a+i,0):br(i,a-1)),t==t?function(e,t,r){for(var n=r+1;n--;)if(e[n]===t)return n;return n}(e,t,i):qt(e,zt,i,!0)},Ur.lowerCase=$o,Ur.lowerFirst=Go,Ur.lt=so,Ur.lte=fo,Ur.max=function(e){return e&&e.length?hn(e,al,Cn):r},Ur.maxBy=function(e,t){return e&&e.length?hn(e,ci(t,2),Cn):r},Ur.mean=function(e){return Ht(e,al)},Ur.meanBy=function(e,t){return Ht(e,ci(t,2))},Ur.min=function(e){return e&&e.length?hn(e,al,Fn):r},Ur.minBy=function(e,t){return e&&e.length?hn(e,ci(t,2),Fn):r},Ur.stubArray=hl,Ur.stubFalse=yl,Ur.stubObject=function(){return{}},Ur.stubString=function(){return""},Ur.stubTrue=function(){return!0},Ur.multiply=kl,Ur.nth=function(e,t){return e&&e.length?zn(e,mo(t)):r},Ur.noConflict=function(){return vt._===this&&(vt._=qe),this},Ur.noop=cl,Ur.now=Su,Ur.pad=function(e,t,r){e=bo(e);var n=(t=mo(t))?dr(e):0;if(!t||n>=t)return e;var a=(t-n)/2;return Ha(ht(a),r)+e+Ha(mt(a),r)},Ur.padEnd=function(e,t,r){e=bo(e);var n=(t=mo(t))?dr(e):0;return t&&n<t?e+Ha(t-n,r):e},Ur.padStart=function(e,t,r){e=bo(e);var n=(t=mo(t))?dr(e):0;return t&&n<t?Ha(t-n,r)+e:e},Ur.parseInt=function(e,t,r){return r||null==t?t=0:t&&(t=+t),xr(bo(e).replace(ie,""),t||0)},Ur.random=function(e,t,n){if(n&&"boolean"!=typeof n&&_i(e,t,n)&&(t=n=r),n===r&&("boolean"==typeof t?(n=t,t=r):"boolean"==typeof e&&(n=e,e=r)),e===r&&t===r?(e=0,t=1):(e=vo(e),t===r?(t=e,e=0):t=vo(t)),e>t){var a=e;e=t,t=a}if(n||e%1||t%1){var i=wr();return br(e+i*(t-e+st("1e-"+((i+"").length-1))),t)}return Zn(e,t)},Ur.reduce=function(e,t,r){var n=zu(e)?Nt:Jt,a=arguments.length<3;return n(e,ci(t,4),r,a,pn)},Ur.reduceRight=function(e,t,r){var n=zu(e)?Dt:Jt,a=arguments.length<3;return n(e,ci(t,4),r,a,vn)},Ur.repeat=function(e,t,n){return t=(n?_i(e,t,n):t===r)?1:mo(t),Kn(bo(e),t)},Ur.replace=function(){var e=arguments,t=bo(e[0]);return e.length<3?t:t.replace(e[1],e[2])},Ur.result=function(e,t,n){var a=-1,i=(t=_a(t,e)).length;for(i||(i=1,e=r);++a<i;){var u=null==e?r:e[Di(t[a])];u===r&&(a=i,u=n),e=Yu(u)?u.call(e):u}return e},Ur.round=El,Ur.runInContext=e,Ur.sample=function(e){return(zu(e)?Yr:Xn)(e)},Ur.size=function(e){if(null==e)return 0;if($u(e))return oo(e)?dr(e):e.length;var t=mi(e);return t==E||t==I?e.size:Dn(e).length},Ur.snakeCase=Jo,Ur.some=function(e,t,n){var a=zu(e)?Bt:ia;return n&&_i(e,t,n)&&(t=r),a(e,ci(t,3))},Ur.sortedIndex=function(e,t){return ua(e,t)},Ur.sortedIndexBy=function(e,t,r){return oa(e,t,ci(r,2))},Ur.sortedIndexOf=function(e,t){var r=null==e?0:e.length;if(r){var n=ua(e,t);if(n<r&&Uu(e[n],t))return n}return-1},Ur.sortedLastIndex=function(e,t){return ua(e,t,!0)},Ur.sortedLastIndexBy=function(e,t,r){return oa(e,t,ci(r,2),!0)},Ur.sortedLastIndexOf=function(e,t){if(null==e?0:e.length){var r=ua(e,t,!0)-1;if(Uu(e[r],t))return r}return-1},Ur.startCase=Zo,Ur.startsWith=function(e,t,r){return e=bo(e),r=null==r?0:ln(mo(r),0,e.length),t=sa(t),e.slice(r,r+t.length)==t},Ur.subtract=Tl,Ur.sum=function(e){return e&&e.length?Zt(e,al):0},Ur.sumBy=function(e,t){return e&&e.length?Zt(e,ci(t,2)):0},Ur.template=function(e,t,n){var a=Ur.templateSettings;n&&_i(e,t,n)&&(t=r),e=bo(e),t=wo({},t,a,Qa);var i,u,o=wo({},t.imports,a.imports,Qa),l=Ro(o),c=Qt(o,l),s=0,f=t.interpolate||xe,d="__p += '",p=je((t.escape||xe).source+"|"+f.source+"|"+(f===Q?pe:xe).source+"|"+(t.evaluate||xe).source+"|$","g"),v="//# sourceURL="+(Ne.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ut+"]")+"\n";e.replace(p,(function(t,r,n,a,o,l){return n||(n=a),d+=e.slice(s,l).replace(we,ir),r&&(i=!0,d+="' +\n__e("+r+") +\n'"),o&&(u=!0,d+="';\n"+o+";\n__p += '"),n&&(d+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),s=l+t.length,t})),d+="';\n";var m=Ne.call(t,"variable")&&t.variable;if(m){if(fe.test(m))throw new Ee("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(u?d.replace(z,""):d).replace(H,"$1").replace($,"$1;"),d="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var h=Qo((function(){return Te(l,v+"return "+d).apply(r,c)}));if(h.source=d,Ku(h))throw h;return h},Ur.times=function(e,t){if((e=mo(e))<1||e>d)return[];var r=v,n=br(e,v);t=ci(t),e-=v;for(var a=Kt(n,t);++r<e;)t(r);return a},Ur.toFinite=vo,Ur.toInteger=mo,Ur.toLength=ho,Ur.toLower=function(e){return bo(e).toLowerCase()},Ur.toNumber=yo,Ur.toSafeInteger=function(e){return e?ln(mo(e),-9007199254740991,d):0===e?e:0},Ur.toString=bo,Ur.toUpper=function(e){return bo(e).toUpperCase()},Ur.trim=function(e,t,n){if((e=bo(e))&&(n||t===r))return Yt(e);if(!e||!(t=sa(t)))return e;var a=pr(e),i=pr(t);return wa(a,tr(a,i),rr(a,i)+1).join("")},Ur.trimEnd=function(e,t,n){if((e=bo(e))&&(n||t===r))return e.slice(0,vr(e)+1);if(!e||!(t=sa(t)))return e;var a=pr(e);return wa(a,0,rr(a,pr(t))+1).join("")},Ur.trimStart=function(e,t,n){if((e=bo(e))&&(n||t===r))return e.replace(ie,"");if(!e||!(t=sa(t)))return e;var a=pr(e);return wa(a,tr(a,pr(t))).join("")},Ur.truncate=function(e,t){var n=30,a="...";if(eo(t)){var i="separator"in t?t.separator:i;n="length"in t?mo(t.length):n,a="omission"in t?sa(t.omission):a}var u=(e=bo(e)).length;if(ur(e)){var o=pr(e);u=o.length}if(n>=u)return e;var l=n-dr(a);if(l<1)return a;var c=o?wa(o,0,l).join(""):e.slice(0,l);if(i===r)return c+a;if(o&&(l+=c.length-l),io(i)){if(e.slice(l).search(i)){var s,f=c;for(i.global||(i=je(i.source,bo(ve.exec(i))+"g")),i.lastIndex=0;s=i.exec(f);)var d=s.index;c=c.slice(0,d===r?l:d)}}else if(e.indexOf(sa(i),l)!=l){var p=c.lastIndexOf(i);p>-1&&(c=c.slice(0,p))}return c+a},Ur.unescape=function(e){return(e=bo(e))&&Z.test(e)?e.replace(G,mr):e},Ur.uniqueId=function(e){var t=++De;return bo(e)+t},Ur.upperCase=Ko,Ur.upperFirst=Yo,Ur.each=gu,Ur.eachRight=bu,Ur.first=$i,ll(Ur,(wl={},xn(Ur,(function(e,t){Ne.call(Ur.prototype,t)||(wl[t]=e)})),wl),{chain:!1}),Ur.VERSION="4.17.21",jt(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){Ur[e].placeholder=Ur})),jt(["drop","take"],(function(e,t){zr.prototype[e]=function(n){n=n===r?1:gr(mo(n),0);var a=this.__filtered__&&!t?new zr(this):this.clone();return a.__filtered__?a.__takeCount__=br(n,a.__takeCount__):a.__views__.push({size:br(n,v),type:e+(a.__dir__<0?"Right":"")}),a},zr.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),jt(["filter","map","takeWhile"],(function(e,t){var r=t+1,n=1==r||3==r;zr.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:ci(e,3),type:r}),t.__filtered__=t.__filtered__||n,t}})),jt(["head","last"],(function(e,t){var r="take"+(t?"Right":"");zr.prototype[e]=function(){return this[r](1).value()[0]}})),jt(["initial","tail"],(function(e,t){var r="drop"+(t?"":"Right");zr.prototype[e]=function(){return this.__filtered__?new zr(this):this[r](1)}})),zr.prototype.compact=function(){return this.filter(al)},zr.prototype.find=function(e){return this.filter(e).head()},zr.prototype.findLast=function(e){return this.reverse().find(e)},zr.prototype.invokeMap=Yn((function(e,t){return"function"==typeof e?new zr(this):this.map((function(r){return Mn(r,e,t)}))})),zr.prototype.reject=function(e){return this.filter(Lu(ci(e)))},zr.prototype.slice=function(e,t){e=mo(e);var n=this;return n.__filtered__&&(e>0||t<0)?new zr(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==r&&(n=(t=mo(t))<0?n.dropRight(-t):n.take(t-e)),n)},zr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},zr.prototype.toArray=function(){return this.take(v)},xn(zr.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),a=/^(?:head|last)$/.test(t),i=Ur[a?"take"+("last"==t?"Right":""):t],u=a||/^find/.test(t);i&&(Ur.prototype[t]=function(){var t=this.__wrapped__,o=a?[1]:arguments,l=t instanceof zr,c=o[0],s=l||zu(t),f=function(e){var t=i.apply(Ur,Lt([e],o));return a&&d?t[0]:t};s&&n&&"function"==typeof c&&1!=c.length&&(l=s=!1);var d=this.__chain__,p=!!this.__actions__.length,v=u&&!d,m=l&&!p;if(!u&&s){t=m?t:new zr(this);var h=e.apply(t,o);return h.__actions__.push({func:pu,args:[f],thisArg:r}),new Vr(h,d)}return v&&m?e.apply(this,o):(h=this.thru(f),v?a?h.value()[0]:h.value():h)})})),jt(["pop","push","shift","sort","splice","unshift"],(function(e){var t=Me[e],r=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",n=/^(?:pop|shift)$/.test(e);Ur.prototype[e]=function(){var e=arguments;if(n&&!this.__chain__){var a=this.value();return t.apply(zu(a)?a:[],e)}return this[r]((function(r){return t.apply(zu(r)?r:[],e)}))}})),xn(zr.prototype,(function(e,t){var r=Ur[t];if(r){var n=r.name+"";Ne.call(Mr,n)||(Mr[n]=[]),Mr[n].push({name:t,func:r})}})),Mr[qa(r,2).name]=[{name:"wrapper",func:r}],zr.prototype.clone=function(){var e=new zr(this.__wrapped__);return e.__actions__=Pa(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Pa(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Pa(this.__views__),e},zr.prototype.reverse=function(){if(this.__filtered__){var e=new zr(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e},zr.prototype.value=function(){var e=this.__wrapped__.value(),t=this.__dir__,r=zu(e),n=t<0,a=r?e.length:0,i=function(e,t,r){var n=-1,a=r.length;for(;++n<a;){var i=r[n],u=i.size;switch(i.type){case"drop":e+=u;break;case"dropRight":t-=u;break;case"take":t=br(t,e+u);break;case"takeRight":e=gr(e,t-u)}}return{start:e,end:t}}(0,a,this.__views__),u=i.start,o=i.end,l=o-u,c=n?o:u-1,s=this.__iteratees__,f=s.length,d=0,p=br(l,this.__takeCount__);if(!r||!n&&a==l&&p==l)return ma(e,this.__actions__);var v=[];e:for(;l--&&d<p;){for(var m=-1,h=e[c+=t];++m<f;){var y=s[m],g=y.iteratee,b=y.type,_=g(h);if(2==b)h=_;else if(!_){if(1==b)continue e;break e}}v[d++]=h}return v},Ur.prototype.at=vu,Ur.prototype.chain=function(){return du(this)},Ur.prototype.commit=function(){return new Vr(this.value(),this.__chain__)},Ur.prototype.next=function(){this.__values__===r&&(this.__values__=po(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?r:this.__values__[this.__index__++]}},Ur.prototype.plant=function(e){for(var t,n=this;n instanceof Wr;){var a=Fi(n);a.__index__=0,a.__values__=r,t?i.__wrapped__=a:t=a;var i=a;n=n.__wrapped__}return i.__wrapped__=e,t},Ur.prototype.reverse=function(){var e=this.__wrapped__;if(e instanceof zr){var t=e;return this.__actions__.length&&(t=new zr(this)),(t=t.reverse()).__actions__.push({func:pu,args:[eu],thisArg:r}),new Vr(t,this.__chain__)}return this.thru(eu)},Ur.prototype.toJSON=Ur.prototype.valueOf=Ur.prototype.value=function(){return ma(this.__wrapped__,this.__actions__)},Ur.prototype.first=Ur.prototype.head,Xe&&(Ur.prototype[Xe]=function(){return this}),Ur}();ht?((ht.exports=hr)._=hr,mt._=hr):vt._=hr}).call(h)}));var _r=function(e){var t=e.fileUrl,r=e.fileName,n=e.machineGenerated,a=e.fileExt;return s.default.createElement("button",{className:"ramp--transcript_downloader","data-testid":"transcript-downloader",onClick:function(e){e.preventDefault(),me(t,r,a,n)},href:"#","aria-label":"Transcript download button"},s.default.createElement("span",{className:"download-label"}))};function xr(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return wr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wr(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,u=!0,o=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return u=e.done,e},e:function(e){o=!0,i=e},f:function(){try{u||null==r.return||r.return()}finally{if(o)throw i}}}}function wr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}_r.propTypes={fileUrl:te.string,fileName:te.string,machineGenerated:te.bool,fileExt:te.string};var kr={webvtt:["text/vtt"],srt:["application/x-subrip","text/srt"],text:["text/plain"],json:["application/json"],docx:["application/vnd.openxmlformats-officedocument.wordprocessingml.document"]},Er=[{type:kr.json,ext:"json"},{type:kr.webvtt,ext:"vtt"},{type:kr.text,ext:"txt"},{type:kr.docx,ext:"docx"},{type:kr.srt,ext:"srt"}],Tr={invalidTimedText:-3,noSupport:-2,invalid:-1,noTranscript:0,timedText:1,plainText:2,docx:3},Sr={note:"NOTE",timedCue:"TIMED_CUE"};function Cr(e){return jr.apply(this,arguments)}function jr(){return jr=J(Y.mark((function e(t){var r,n,a=arguments;return Y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>1&&void 0!==a[1]?a[1]:"",e.next=3,fetch(t).then((function(e){if(e.headers.get("Content-Type").includes("application/json"))return e.json()})).then((function(e){var n=se(e)[0].getCanvases(),a=[];return(null==n?void 0:n.length)>0&&n.map((function(e,n){var i=ye(e.__jsonld.annotations,"supplementing"),u=[];if(i.length>0){var o=i[0].getBody()[0];if("TextualBody"===o.getProperty("type")){var l=xe(r.length>0?r:o.getLabel().getValue()?ke(o.getLabel().getValue()):"Canvas-".concat(n)),c=l.isMachineGen,s=l.labelText;u.push({url:void 0===o.id?t:o.id,title:s,isMachineGen:c,id:"".concat(s,"-").concat(n),format:""})}else i.forEach((function(e,t){var r=e.getBody()[0],a="",i="";null!=r.getLabel()&&r.getLabel().length>1?(a=ke(r.getLabel()[0]._value),i=ke(r.getLabel().getValue("none"))):a=null!=r.getLabel()&&1===r.getLabel().length?ke(r.getLabel().getValue()):"".concat(t);var o=r.id,l=we(o),c=xe(a),s=c.isMachineGen,f=c.labelText;""===i&&(i=f),1!==l&&3!==l||u.push({title:f,filename:i,url:o,isMachineGen:s,id:"".concat(f,"-").concat(n,"-").concat(t),format:r.getFormat()||""})}))}a.push({canvasId:n,items:u})})),a})).catch((function(e){return console.error("transcript-parser -> readSupplementingAnnotations() -> error fetching transcript resource at, ",t),[]}));case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),jr.apply(this,arguments)}function Ir(e){return Pr.apply(this,arguments)}function Pr(){return Pr=J(Y.mark((function e(t){var r,n,a;return Y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&null!=t&&0!=t.length){e.next=5;break}return console.error("No transcripts given as input"),e.abrupt("return",[]);case 5:return r=[],t.map((function(e){return r.push({canvasId:e.canvasId,items:[]})})),e.next=9,Promise.all(t.map(function(){var e=J(Y.mark((function e(t){var n,a,i;return Y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.canvasId,a=t.items,e.next=3,Promise.all(a.map(function(){var e=J(Y.mark((function e(t,a){var i,u,o,l,c,s,f,d;return Y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.title,u=t.url,e.next=3,Cr(u,i);case 3:if(o=e.sent,l=xe(i),c=l.isMachineGen,s=l.labelText,f=[],(null==o?void 0:o.length)>0&&(f=o.map((function(e){return e.items})).flat(),d=Mr(r.concat(o),"canvasId","items"),r=d),0!==o.length&&0!==f.length){e.next=11;break}return e.abrupt("return",{title:s,filename:s,url:u,isMachineGen:c,id:"".concat(s,"-").concat(n,"-").concat(a),format:""});case 11:return e.abrupt("return",null);case 12:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 3:return i=e.sent,e.abrupt("return",{canvasId:n,items:i.filter((function(e){return null!=e}))});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 9:return n=e.sent,a=Mr(r.concat(n),"canvasId","items"),e.abrupt("return",a);case 12:case"end":return e.stop()}}),e)}))),Pr.apply(this,arguments)}function Mr(e,t,r){return e.reduce((function(e,n){var a=e.filter((function(e){return e[t]==n[t]}));if((null==a?void 0:a.length)>0){var i=a[0];i[r]=i[r].concat(n[r])}else e.push(n);return e}),[])}function Rr(e,t,r){return Or.apply(this,arguments)}function Or(){return(Or=J(Y.mark((function e(r,n,a){var i,u,o,l,c,s,f,d,p,v,m,h,y,g,b,_;return Y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=[],u=r,void 0!==r){e.next=4;break}return e.abrupt("return",{tData:i,tUrl:u,tType:Tr.invalid});case 4:return o=null,l=null,e.next=8,fetch(r).then(pe).then((function(e){o=e.headers.get("Content-Type"),l=e})).catch((function(e){console.error("transcript-parser -> parseTranscriptData() -> fetching transcript -> ",e)}));case 8:if(null!=o){e.next=10;break}return e.abrupt("return",{tData:[],tUrl:u,tType:Tr.invalid});case 10:if(c=Er.filter((function(e){return e.type.includes(o.split(";")[0])})),s=Er.filter((function(e){return e.type.includes(a)})),f="",(null==s?void 0:s.length)>0?f=s[0].ext:c.length>0?f=c[0].ext:(d=r.split(".").reverse()[0],p=Er.filter((function(e){return e.ext===d})),f=p.length>0?d:""),void 0!==n){e.next=16;break}return e.abrupt("return",{tData:i,tUrl:u,tType:Tr.noTranscript});case 16:e.t0=f,e.next="json"===e.t0?19:"txt"===e.t0?29:"srt"===e.t0||"vtt"===e.t0?39:"docx"===e.t0?49:53;break;case 19:return e.next=21,l.json();case 21:if(m=e.sent,!t.parseManifest(m)){e.next=27;break}return e.abrupt("return",Dr(m,r,n));case 27:return h=Nr(m),e.abrupt("return",{tData:h.tData,tUrl:u,tType:h.tType,tFileExt:f});case 29:return e.next=31,l.text();case 31:if(v=e.sent,0!=v.split("\n").length){e.next=37;break}return e.abrupt("return",{tData:[],tUrl:r,tType:Tr.noTranscript});case 37:return y=v.replace(/\n/g,"<br />"),e.abrupt("return",{tData:[y],tUrl:r,tType:Tr.plainText,tFileExt:f});case 39:return e.next=41,l.text();case 41:if(v=e.sent,0!=v.split("\n").length){e.next=47;break}return e.abrupt("return",{tData:[],tUrl:r,tType:Tr.noTranscript});case 47:return g=Ur(v,"srt"===f),b=g.tData,_=g.tType,e.abrupt("return",{tData:b,tUrl:r,tType:_,tFileExt:f});case 49:return e.next=51,Ar(l);case 51:return i=e.sent,e.abrupt("return",{tData:[i],tUrl:r,tType:Tr.docx,tFileExt:f});case 53:return e.abrupt("return",{tData:[],tUrl:r,tType:Tr.noSupport});case 54:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ar(e){return Lr.apply(this,arguments)}function Lr(){return Lr=J(Y.mark((function e(t){var r,n,a;return Y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=null,e.next=3,t.blob();case 3:return n=e.sent,a=new File([n],name,{type:t.headers.get("content-type")}),e.next=7,m.default.convertToHtml({arrayBuffer:a}).then((function(e){r=e.value}));case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)}))),Lr.apply(this,arguments)}function Nr(e){if(0==e.length)return{tData:[],tType:Tr.noTranscript};var t,r=[],n=xr(e);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(a.speaker){var i,u=a.speaker,o=xr(a.spans);try{for(o.s();!(i=o.n()).done;){var l=i.value;l.speaker=u,r.push(l)}}catch(e){o.e(e)}finally{o.f()}}else{var c,s=xr(a.spans);try{for(s.s();!(c=s.n()).done;){var f=c.value;r.push(f)}}catch(e){s.e(e)}finally{s.f()}}}}catch(e){n.e(e)}finally{n.f()}return{tData:r,tType:Tr.timedText}}function Dr(e,t,r){var n=t,a=[];return(a=e.annotations?ye(e.annotations,"supplementing"):ge({manifest:e,canvasIndex:r,key:"annotations",motivation:"supplementing"})).length>0?"TextualBody"!=a[0].getBody()[0].getProperty("type")?function(e){return Br.apply(this,arguments)}(a[0]):{tData:Fr(a),tUrl:n,tType:Tr.timedText,tFileExt:"json"}:{tData:[],tUrl:n,tType:Tr.noTranscript}}function Br(){return(Br=J(Y.mark((function e(t){var r,n,a,i,u,o,l;return Y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=[],n="",a=t.getBody()[0],i=a.getProperty("id"),u=a.getProperty("type"),o=a.getFormat(),l="","Text"!==u){e.next=12;break}return e.next=10,fetch(i).then(pe).then((function(e){return e.text()})).then((function(e){if(kr.webvtt.includes(o)||kr.srt.includes(o)){var t=Ur(e,kr.srt.includes(o));r=t.tData,n=t.tType,l=Er.filter((function(e){return e.type.includes(o)}))[0].ext}else r=e.replace(/\n/g,"<br />"),n=Tr.plainText,l="txt"})).catch((function(e){throw console.error("transcript-parser -> parseExternalAnnotations() -> fetching external transcript -> ",e),e}));case 10:e.next=15;break;case 12:if("AnnotationPage"!==u){e.next=15;break}return e.next=15,fetch(i).then(pe).then((function(e){return e.json()})).then((function(e){var t=ye([e],"supplementing");r=Fr(t),n=Tr.timedText,l="json"})).catch((function(e){throw console.error("transcript-parser -> parseExternalAnnotations() -> fetching annotations -> ",e),e}));case 15:return e.abrupt("return",{tData:r,tUrl:i,tType:n,tFileExt:l});case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fr(e){var t=[];return e.map((function(e){if(null!=e.id){var r=e.getBody()[0],n=he(e.getProperty("target")),a=n.start,i=n.end;t.push({text:r.getProperty("value"),format:r.getFormat(),begin:parseFloat(a),end:parseFloat(i),tag:Sr.timedCue})}})),t}function Ur(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=[],n=[],a=e.split("\n"),i=a;if(!t){var u=function(e){var t=e.shift().trim();if(6==(null==t?void 0:t.length)&&"WEBVTT"===t){var r=function(e){var t=0,r=0,n=!1,a=[];e=e.filter((function(e){return!Number(e)}));for(var i=0;i<e.length;i++){var u=e[i];if(/^REGION$/.test(u.toUpperCase())||/^STYLE$/.test(u.toUpperCase())){for(i++;i<e.length&&("\r"==!e[i]||"\n"==!e[i]||"\r\n"==!e[i]);)i++;t=i}else if(/^NOTE$/.test(u.toUpperCase())){var o=u;for(i++;i<e.length&&("\r"==!e[i]||"\n"==!e[i]||"\r\n"==!e[i]);)o="".concat(o,"<br />").concat(e[i].trim()),i++;a.push({times:"",line:o,tag:Sr.note})}else{if(u.includes("--\x3e")){r=i;break}"string"==typeof u&&0!=u.trim().length&&(n=!0)}}return r>t&&!n?{valid:!0,cue_lines:e.slice(r),notes:a}:{valid:!1}}(e);return{valid:r.valid,cue_lines:r.cue_lines,notes:r.notes}}return{valid:!1,cue_lines:[],notes:[]}}(a),o=u.valid,l=u.cue_lines,c=u.notes;if(!o)return console.error("Invalid WebVTT file"),{tData:[],tType:Tr.invalidTimedText};i=l,n=c}var s=function(e){var t=e.filter((function(e){return e.length>0})),r=t.filter((function(e){return!/^[0-9]*[\r]/gm.test(e)}));return r}(i),f=function(e){var t,r=[];for(t=0;t<e.length;){var n=e[t],a={};if(n.includes("--\x3e")||/^NOTE/.test(n.toUpperCase())){var i=/^NOTE/.test(n.toUpperCase());for(a.times=i?"":n,a.tag=i?Sr.note:Sr.timedCue,a.line=i?n:"",t++;t<e.length&&!e[t].includes("--\x3e")&&!/^NOTE/.test(e[t].toUpperCase());)a.line+=e[t],t++;r.push(a)}}return r}(s);return f.unshift.apply(f,br(n)),f.map((function(e){var n=function(e,t){var r,n=e.times,a=e.line,i=e.tag;r=t?/([0-9]*:){1,2}([0-9]{2})(\.|\,)[0-9]{2,3}/g:/([0-9]*:){1,2}([0-9]{2})\.[0-9]{2,3}/g;switch(i){case Sr.note:return{begin:0,end:0,text:a,tag:i};case Sr.timedCue:var u=n.split(" --\x3e "),o=E(u,2),l=o[0],c=o[1];return c=c.split(" ")[0],l.match(r)&&c.match(r)?{begin:de(l),end:de(c),text:a,tag:i}:(console.error("Invalid timestamp in line with text; ",a),null);default:return null}}(e,t);n&&r.push(n)})),{tData:r,tType:Tr.timedText}}var qr=function(e){var t=e.selectTranscript,r=e.transcriptData,n=e.transcriptInfo,a=e.noTranscript,i=e.setAutoScroll,u=n.filename,o=n.id,l=n.tUrl,c=n.tFileExt,f=n.tType,d=n.isMachineGen,p=s.default.useState(!0),v=E(p,2),m=v[0],h=v[1];return r?s.default.createElement("div",{className:"ramp--transcript_selector","data-testid":"transcript-selector"},s.default.createElement("div",{className:"ramp--transcript_list"},s.default.createElement("select",{className:"transcript_list","data-testid":"transcript-select-option",value:o||"",onChange:function(e){t(e.target.value)},"aria-label":"Select transcripts","aria-expanded":!1,"aria-haspopup":"true"},r.map((function(e,t){return s.default.createElement("option",{value:e.id,label:e.title,key:t},e.title)})))),!a&&s.default.createElement(_r,{fileUrl:l,fileName:u,fileExt:c,machineGenerated:d}),d&&s.default.createElement("p",{className:"ramp--transcript_machine_generated","data-testid":"transcript-machinegen-msg"},"Machine-generated transcript may contain errors."),f===Tr.timedText&&s.default.createElement("div",{className:"ramp--transcript_auto_scroll_check","data-testid":"transcript-auto-scroll-check"},s.default.createElement("input",{type:"checkbox",id:"auto-scroll-check",name:"autoscrollcheck","aria-checked":m,checked:m,onChange:function(){var e=!m;h(e),i(e)}}),s.default.createElement("label",{htmlFor:"auto-scroll-check"},"Auto-scroll with media"))):null};function Wr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Vr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wr(Object(r),!0).forEach((function(t){I(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}qr.propTypes={selectTranscript:te.func.isRequired,transcriptData:te.array.isRequired,transcriptInfo:te.shape({title:te.string,id:te.string,tUrl:te.string,tFileExt:te.string,isMachineGen:te.bool}).isRequired,noTranscript:te.bool.isRequired,setAutoScroll:te.func.isRequired};var zr="No valid Transcript(s) found, please check again.",Hr="Transcript format is not supported, please check again.",$r=function(e){var t,r=e.playerID,n=e.manifestUrl,a=e.transcripts,i=void 0===a?[]:a,u=s.default.useState([]),o=E(u,2),l=o[0],c=o[1],f=s.default.useState([]),d=E(f,2),p=d[0],v=d[1],m=s.default.useState([]),h=E(m,2),y=h[0],g=h[1],b=s.default.useState({title:null,filename:null,id:null,tUrl:null,tType:null,tFileExt:null,isMachineGen:!1,tError:null}),_=E(b,2),x=_[0],w=_[1],k=s.default.useState(0),T=E(k,2),S=T[0],C=T[1],j=s.default.useState(!0),I=E(j,2),P=I[0],M=I[1],R=s.default.useState([]),O=E(R,2),A=O[0],L=O[1],N=s.default.useState([]),D=E(N,2),B=D[0],F=D[1],U=s.default.useRef(!0),q=s.default.useRef(!0),W=function(e){q.current=e},V=s.default.useRef(),z=function(e){V.current=e,C(e)},H=s.default.useRef([]),$=s.default.useRef(),G=s.default.useRef(),Z=function(e){G.current=e,g(e)},K=s.default.useRef();s.default.useEffect((function(){t=setInterval((function(){var e,t=document.getElementById(r);(t?(e=t.children[0],K.current=e):console.error("Cannot find player, '"+r+"' on page. Transcript synchronization is disabled."),K.current)&&(parseInt(K.current.dataset.canvasindex)!=V.current&&(Z([]),z(K.current.dataset.canvasindex),K.current.addEventListener("timeupdate",(function(e){if(null!=e&&null!=e.target){var t=e.target.currentTime;H.current.map((function(e){if(e){var r=parseFloat(e.getAttribute("starttime")),n=parseFloat(e.getAttribute("endtime"));t>=r&&t<=n?te(t,r,n,e):e.classList.remove("active")}}))}}))))}),500)}),[]),s.default.useEffect((function(){return function(){v([]),Z([]),w({}),z(),M(!0),L([]),F([]),K=null,U.current=!0,clearInterval(t)}}),[]),s.default.useEffect(J(Y.mark((function e(){var t;return Y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],!((null==i?void 0:i.length)>0)){e.next=7;break}return e.next=4,Ir(i);case 4:t=e.sent,e.next=11;break;case 7:if(!n){e.next=11;break}return e.next=10,Cr(n);case 10:t=e.sent;case 11:c(t),Q(t);case 13:case"end":return e.stop()}}),e)}))),[]),s.default.useEffect((function(){if((null==l?void 0:l.length)>0&&null!=V.current){var e=l.filter((function(e){return e.canvasId==V.current}))[0];v(e.items),ee(e.items[0])}}),[V.current]);var X,Q=function(e){var t,r,n,a=function(e){return e.filter((function(e){return e.canvasId==S}))};if(!(null!=e&&e.length)>0||!(null!==(t=a(e))&&void 0!==t&&t.length)>0||!(null!==(n=e,r=a(n)[0].items)&&void 0!==r&&r.length)>0)W(!0),Z([]),w({tType:Tr.noTranscript,id:"",tError:zr});else{W(!1);var i=a(e)[0];v(i.items),ee(i.items[0])}M(!1)},ee=function(){var e=J(Y.mark((function e(t){var r,n,a,i,u,o,l,c,s,f,d,p,v;return Y.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&null!=t){e.next=5;break}return W(!0),M(!1),w({tType:Tr.noTranscript,id:"",tError:zr}),e.abrupt("return");case 5:if(W(!1),n=(r=t).id,a=r.title,i=r.filename,u=r.url,o=r.isMachineGen,l=r.format,!((null==(c=B.filter((function(e){return e.id==n&&e.canvasId==V.current})))?void 0:c.length)>0)){e.next=14;break}s=c[0],f=s.tData,d=s.tFileExt,p=s.tType,v=s.tError,Z(f),w({title:a,filename:i,id:n,isMachineGen:o,tType:p,tUrl:u,tFileExt:d,tError:v}),e.next=16;break;case 14:return e.next=16,Promise.resolve(Rr(u,V.current,l)).then((function(e){if(null!=e){var r=e.tData,u=e.tUrl,l=e.tType,c=e.tFileExt,s="";l===Tr.invalid?s="Invalid URL for transcript, please check again.":l===Tr.noTranscript?s=zr:l===Tr.noSupport?s=Hr:l===Tr.invalidTimedText&&(s="Invalid WebVTT file, please check again."),Z(r),w({title:a,filename:i,id:n,isMachineGen:o,tType:l,tUrl:u,tFileExt:c,tError:s}),t=Vr(Vr({},t),{},{tType:l,tData:r,tFileExt:c,canvasId:V.current,tError:s}),F([].concat(br(B),[t]))}}));case 16:M(!1);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),te=function(e,t,r,n){n&&t&&r&&(e>=t&&e<=r?n.classList.add("active"):n.classList.remove("active"),U.current&&Te(n,$,!0))},re=function(e){"keydown"!==e.type||" "!==e.key&&"Enter"!==e.key||ne(e)},ne=function(e){e.preventDefault(),K.current&&(K.current.currentTime=e.currentTarget.getAttribute("starttime")),H.current.map((function(e){e&&e.classList.contains("active")&&e.classList.remove("active")})),e.currentTarget.classList.add("active")},ae=function(e){!function(e){U.current=e}(e)},ie=function(e){return e.speaker?"<u>".concat(e.speaker,":</u> ").concat(e.text):e.text};return s.default.useEffect((function(){if(G.current){L([]);var e=[];switch(x.tType){case Tr.docx:e.push(s.default.createElement("div",{"data-testid":"transcript_docs",dangerouslySetInnerHTML:{__html:y[0]}}));break;case Tr.timedText:y.length>0&&y.map((function(t,r){var n;t.tag===Sr.note?n=s.default.createElement("span",{className:"ramp--transcript_text","data-testid":"transcript_text",key:"ttext_".concat(r),dangerouslySetInnerHTML:{__html:ie(t)}}):t.tag===Sr.timedCue&&(n=s.default.createElement("a",{className:"ramp--transcript_item","data-testid":"transcript_item",key:"t_".concat(r),ref:function(e){return H.current[r]=e},onClick:ne,onKeyDown:re,starttime:t.begin,endtime:t.end,href:"#",role:"listitem"},t.begin&&s.default.createElement("span",{className:"ramp--transcript_time","data-testid":"transcript_time",key:"ttime_".concat(r)},"[",fe(t.begin,!0),"]"),s.default.createElement("span",{className:"ramp--transcript_text","data-testid":"transcript_text",key:"ttext_".concat(r),dangerouslySetInnerHTML:{__html:ie(t)}}))),e.push(n)}));break;case Tr.plainText:e.push(s.default.createElement("div",{"data-testid":"transcript_plain-text",key:0,dangerouslySetInnerHTML:{__html:y}}));break;case Tr.noSupport:case Tr.invalid:case Tr.noTranscript:default:e.push(s.default.createElement("p",{key:"no-transcript",id:"no-transcript","data-testid":"no-transcript",role:"note"},x.tError))}L(e)}}),[V.current,G.current,x.tType]),P?s.default.createElement("div",{className:"lds-spinner"},s.default.createElement("div",null),s.default.createElement("div",null),s.default.createElement("div",null),s.default.createElement("div",null),s.default.createElement("div",null),s.default.createElement("div",null),s.default.createElement("div",null),s.default.createElement("div",null),s.default.createElement("div",null),s.default.createElement("div",null),s.default.createElement("div",null),s.default.createElement("div",null)):s.default.createElement("div",{className:"ramp--transcript_nav","data-testid":"transcript_nav",key:x.title},!q.current&&s.default.createElement("div",{className:"transcript_menu"},s.default.createElement(qr,{selectTranscript:function(e){L([]);var t=p.filter((function(t){return t.id===e}));ee(t[0])},transcriptData:p,transcriptInfo:x,noTranscript:(null===(X=x.tError)||void 0===X?void 0:X.length)>0&&x.tError!=Hr,setAutoScroll:function(e){return ae(e)}})),s.default.createElement("div",{className:"transcript_content ".concat(G.current?"":"static"),ref:$,"data-testid":"transcript_content_".concat(x.tType),role:"list","aria-label":"Attached Transcript content"},(null==A?void 0:A.length)>0?A.map((function(e){return e})):s.default.createElement("div",{className:"lds-spinner"},s.default.createElement("div",null),s.default.createElement("div",null),s.default.createElement("div",null),s.default.createElement("div",null),s.default.createElement("div",null),s.default.createElement("div",null),s.default.createElement("div",null),s.default.createElement("div",null),s.default.createElement("div",null),s.default.createElement("div",null),s.default.createElement("div",null),s.default.createElement("div",null))))};$r.propTypes={playerID:te.string.isRequired,manifestUrl:te.string,transcripts:te.arrayOf(te.shape({canvasId:te.number.isRequired,items:te.arrayOf(te.shape({title:te.string,url:te.string}))}))};var Gr=function(e){var r=e.displayOnlyCanvasMetadata,n=void 0!==r&&r,a=e.displayAllMetadata,i=void 0!==a&&a,u=e.displayTitle,o=void 0===u||u,l=e.showHeading,c=void 0===l||l,f=e.itemHeading,d=void 0===f?"Item Details":f,p=e.sectionHeaading,v=void 0===p?"Section Details":p,m=D(),h=m.manifest,y=m.canvasIndex,g=s.default.useState(),b=E(g,2),_=b[0],x=b[1],w=s.default.useState(),k=E(w,2);k[0];var T=k[1],S=s.default.useState(),C=E(S,2),j=C[0],I=C[1],P=s.default.useState(),M=E(P,2),R=M[0],O=M[1],A=s.default.useState(),L=E(A,2),N=L[0],B=L[1],F=s.default.useState(),U=E(F,2),q=U[0],W=U[1],V=s.default.useState(),z=E(V,2),H=z[0],$=z[1],G=s.default.useRef();s.default.useEffect((function(){if(h){var e,r=n||i;B(r);var a=!n||i;O(a);var u=function(e,r){try{var n=[],a={canvasMetadata:n,manifestMetadata:[]},i=t.parseManifest(e);if(r){var u=se(e)[0].getCanvases();for(var o in u){var l=parseInt(o),c=Ue(u[l],"Canvas");n.push({canvasindex:l,metadata:Fe(u[l].getMetadata(),"Canvas"),rights:c})}a.canvasMetadata=n}var s=Fe(i.getMetadata(),"Manifest"),f=Ue(i,"Manifest");return a.manifestMetadata=s,a.rights=f,a}catch(e){throw console.error("iiif-parser -> getMetadata() -> cannot parse manifest, ",e),new Error(ae)}}(h,r);if(r&&(c=u.canvasMetadata,T(c),G.current=c,J()),a){var l=u.manifestMetadata;o||(l=l.filter((function(e){return"title"!=e.label.toLowerCase()}))),x(l)}(null===(e=u.rights)||void 0===e?void 0:e.length)>0&&W(u.rights)}var c}),[h]),s.default.useEffect((function(){y>=0&&N&&J()}),[y]);var J=function(){var e=G.current.filter((function(e){return e.canvasindex===y}))[0];if(null!=e){var t=e.metadata,r=e.rights;o||null==t||(t=t.filter((function(e){return"title"!=e.label.toLowerCase()}))),I(t),null!=r&&(null==r?void 0:r.length)>0&&$(r)}},Z=function(){return(null==j?void 0:j.length)>0||(null==_?void 0:_.length)>0},K=function(e){var t=[];return(null==e?void 0:e.length)>0&&e.map((function(e,r){t.push(s.default.createElement(s.default.Fragment,{key:r},s.default.createElement("dt",null,e.label),s.default.createElement("dd",{dangerouslySetInnerHTML:{__html:e.value}})))})),t};return s.default.createElement("div",{"data-testid":"metadata-display",className:"ramp--metadata-display"},c&&s.default.createElement("div",{className:"ramp--metadata-display-title","data-testid":"metadata-display-title"},s.default.createElement("h4",null,"Details")),Z()&&s.default.createElement("div",{className:"ramp--metadata-display-content"},R&&(null==_?void 0:_.length)>0&&s.default.createElement(s.default.Fragment,null,i&&s.default.createElement("span",null,d),K(_),(null==q?void 0:q.length)>0&&s.default.createElement("span",{className:"ramp--metadata-rights-heading","data-testid":"manifest-rights"},"Rights"),K(q)),N&&(null==j?void 0:j.length)>0&&s.default.createElement(s.default.Fragment,null,i&&s.default.createElement("span",null,v),K(j),(null==H?void 0:H.length)>0&&s.default.createElement("span",{className:"ramp--metadata-rights-heading","data-testid":"canvas-rights"},"Rights"),K(H))),!Z()&&s.default.createElement("div",{"data-testid":"metadata-display-message",className:"ramp--metadata-display-message"},s.default.createElement("p",null,"No valid Metadata is in the Manifest/Canvas(es)")))};Gr.propTypes={displayOnlyCanvasMetadata:te.bool,displayAllMetadata:te.bool,displayTitle:te.bool,showHeading:te.bool,itemHeading:te.string,sectionHeaading:te.string};var Jr=function(e){var t=e.label,r=void 0===t?"Autoplay":t,n=e.showLabel,a=void 0===n||n,i=D().autoAdvance,u=B();return s.default.createElement("div",{"data-testid":"auto-advance",className:"ramp--auto-advance"},a&&s.default.createElement("span",{className:"ramp--auto-advance-label","data-testid":"auto-advance-label",htmlFor:"auto-advance-toggle",id:"auto-advance-toggle-label"},r),s.default.createElement("label",{className:"ramp--auto-advance-toggle","aria-labelledby":"auto-advance-toggle-label"},s.default.createElement("input",{"data-testid":"auto-advance-toggle",name:"auto-advance-toggle",type:"checkbox",checked:i,"aria-label":r,onChange:function(e){return u({autoAdvance:e.target.checked,type:"setAutoAdvance"})}}),s.default.createElement("span",{className:"slider round"})))};Jr.propTypes={label:te.string,showLabel:te.bool};var Zr=function(){return s.default.createElement("svg",{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",style:{fill:"white",height:"1rem",width:"1rem",scale:.8}},s.default.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M21.1213 2.70705C19.9497 1.53548 18.0503 1.53547 16.8787 2.70705L15.1989  4.38685L7.29289 12.2928C7.16473 12.421 7.07382 12.5816 7.02986 12.7574L6.02986  16.7574C5.94466 17.0982 6.04451 17.4587 6.29289 17.707C6.54127 17.9554 6.90176  18.0553 7.24254 17.9701L11.2425 16.9701C11.4184 16.9261 11.5789 16.8352 11.7071  16.707L19.5556 8.85857L21.2929 7.12126C22.4645 5.94969 22.4645 4.05019 21.2929  2.87862L21.1213 2.70705ZM18.2929 4.12126C18.6834 3.73074 19.3166 3.73074 19.7071  4.12126L19.8787 4.29283C20.2692 4.68336 20.2692 5.31653 19.8787 5.70705L18.8622  6.72357L17.3068 5.10738L18.2929 4.12126ZM15.8923 6.52185L17.4477 8.13804L10.4888  15.097L8.37437 15.6256L8.90296 13.5112L15.8923 6.52185ZM4 7.99994C4 7.44766 4.44772  6.99994 5 6.99994H10C10.5523 6.99994 11 6.55223 11 5.99994C11 5.44766 10.5523  4.99994 10 4.99994H5C3.34315 4.99994 2 6.34309 2 7.99994V18.9999C2 20.6568 3.34315  21.9999 5 21.9999H16C17.6569 21.9999 19 20.6568 19 18.9999V13.9999C19 13.4477  18.5523 12.9999 18 12.9999C17.4477 12.9999 17 13.4477 17 13.9999V18.9999C17  19.5522 16.5523 19.9999 16 19.9999H5C4.44772 19.9999 4 19.5522 4 18.9999V7.99994Z",fill:"#fffff"}))},Kr=function(){return s.default.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",stroke:"#ffffff",style:{height:"1rem",width:"1rem",scale:.8}},s.default.createElement("g",{strokeWidth:"0",strokeLinecap:"round",strokeLinejoin:"round"},s.default.createElement("path",{d:"M10 12V17",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),s.default.createElement("path",{d:"M14 12V17",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),s.default.createElement("path",{d:"M4 7H20",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),s.default.createElement("path",{d:"M6 10V18C6 19.6569 7.34315 21 9 21H15C16.6569 21 18 19.6569 18 18V10",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),s.default.createElement("path",{d:"M9 5C9 3.89543 9.89543 3 11 3H13C14.1046 3 15 3.89543 15 5V7H9V5Z",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))},Yr=function(){return s.default.createElement("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{height:"1rem",width:"1rem",scale:.8}},s.default.createElement("g",{strokeWidth:"0",strokeLinecap:"round",strokeLinejoin:"round"},s.default.createElement("path",{id:"Vector",d:"M6 12L10.2426 16.2426L18.727 7.75732",stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))},Xr=function(){return s.default.createElement("svg",{fill:"#ffffff",viewBox:"0 0 32 32",version:"1.1",xmlns:"http://www.w3.org/2000/svg",style:{height:"1rem",width:"1rem",scale:.8}},s.default.createElement("g",{strokeWidth:"0",strokeLinecap:"round",strokeLinejoin:"round"},s.default.createElement("path",{d:"M19.587 16.001l6.096 6.096c0.396 0.396 0.396 1.039 0 1.435l-2.151 2.151c-0.396  0.396-1.038 0.396-1.435 0l-6.097-6.096-6.097 6.096c-0.396 0.396-1.038  0.396-1.434 0l-2.152-2.151c-0.396-0.396-0.396-1.038  0-1.435l6.097-6.096-6.097-6.097c-0.396-0.396-0.396-1.039 0-1.435l2.153-2.151c0.396-0.396  1.038-0.396 1.434 0l6.096 6.097 6.097-6.097c0.396-0.396 1.038-0.396 1.435 0l2.151 2.152c0.396  0.396 0.396 1.038 0 1.435l-6.096 6.096z"})))},Qr=function(e){var r=e.newMarkerEndpoint,n=e.canvasId,a=e.handleCreate,i=e.getCurrentTime,u=e.csrfToken,o=s.default.useState(!1),l=E(o,2),c=l[0],f=l[1],d=s.default.useState(!1),p=E(d,2),v=p[0],m=p[1],h=s.default.useState(!1),y=E(h,2),g=y[0],b=y[1],_=s.default.useState(""),x=E(_,2),w=x[0],k=x[1],T=s.default.useState(),S=E(T,2),C=S[0],j=S[1],I=function(e){j(e);var t=Ee(e);m(t)};return s.default.createElement("div",{className:"ramp-markers-display__new-marker"},s.default.createElement("button",{type:"submit",onClick:function(){var e=fe(i(),!0,!0);I(e),f(!0)},className:"ramp--markers-display__edit-button","data-testid":"create-new-marker-button"},"Add New Marker"),c&&s.default.createElement("form",{className:"ramp--markers-display__new-marker-form",method:"post",onSubmit:function(e){e.preventDefault();var i=e.target,o=new FormData(i),l=Object.fromEntries(o.entries()),c=l.label,s=l.time,d={type:"Annotation",motivation:"highlighting",body:{type:"TextualBody",format:"text/html",value:c},target:"".concat(n,"#t=").concat(de(s))},p={method:"POST",credentials:"same-origin",headers:{Accept:"application/json"},body:JSON.stringify(d)};void 0!==u&&(p.headers["X-CSRF-Token"]=u),fetch(r,p).then((function(e){if(201!=e.status)throw new Error;return e.json()})).then((function(e){var r,n=Ve((r=e,new t.Annotation(r)));n&&a(n),f(!1)})).catch((function(e){console.error("CreateMarker -> handleCreateMarker() -> failed to create annotation; ",e),b(!0),k("Marker creation failed.")}))},"data-testid":"create-new-marker-form"},s.default.createElement("table",{className:"create-marker-form-table"},s.default.createElement("tbody",null,s.default.createElement("tr",null,s.default.createElement("td",null,s.default.createElement("label",{htmlFor:"new-marker-title"},"Title:"),s.default.createElement("input",{id:"new-marker-title","data-testid":"create-marker-title",type:"text",className:"ramp--markers-display__create-marker",name:"label"})),s.default.createElement("td",null,s.default.createElement("label",{htmlFor:"new-marker-time"},"Time:"),s.default.createElement("input",{id:"new-marker-time","data-testid":"create-marker-timestamp",type:"text",className:"ramp--markers-display__create-marker ".concat(v?"time-valid":"time-invalid"),name:"time",value:C,onChange:function(e){return I(e.target.value)}})),s.default.createElement("td",null,s.default.createElement("div",{className:"marker-actions"},g&&s.default.createElement("p",{className:"ramp--markers-display__error-message"},w),s.default.createElement("button",{type:"submit",className:"ramp--markers-display__edit-button","data-testid":"edit-save-button",disabled:!v},s.default.createElement(Yr,null)," Save"),s.default.createElement("button",{className:"ramp--markers-display__edit-button-danger","data-testid":"edit-cancel-button",onClick:function(){f(!1),m(!1),k(""),b(!1)}},s.default.createElement(Xr,null)," Cancel"))))))))};Qr.propTypes={newMarkerEndpoint:te.string.isRequired,canvasId:te.string,handleCreate:te.func.isRequired,getCurrentTime:te.func.isRequired};var en=function(e){var t=e.marker,r=e.handleSubmit,n=e.handleMarkerClick,a=e.handleDelete,i=e.hasAnnotationService,u=e.isEditing,o=e.toggleIsEditing,l=e.csrfToken,c=s.default.useState(!1),f=E(c,2),d=f[0],p=f[1],v=s.default.useState(!0),m=E(v,2),h=m[0],y=m[1],g=s.default.useState(),b=E(g,2),_=b[0],x=b[1],w=s.default.useState(!1),k=E(w,2),T=k[0],S=k[1],C=s.default.useState(!1),j=E(C,2),I=j[0],P=j[1],M=s.default.useState(""),R=E(M,2),O=R[0],A=R[1];s.default.useEffect((function(){return{}}),[]),s.default.useEffect((function(){N(t.value),F(t.timeStr)}),[t]);var L=s.default.useRef(t.value),N=function(e){L.current=e},D=s.default.useRef(de(t.timeStr)),B=s.default.useRef(t.timeStr),F=function(e){B.current=e,D.current=de(e)},U=function(){P(!1),A("")},q=function(){S(!1),p(!1),o(!1)};return d?s.default.createElement("tr",null,s.default.createElement("td",null,s.default.createElement("input",{id:"label","data-testid":"edit-label",defaultValue:L.current,type:"text",className:"ramp--markers-display__edit-marker",onChange:function(e){return N(e.target.value)},name:"label"})),s.default.createElement("td",null,s.default.createElement("input",{className:"ramp--markers-display__edit-marker ".concat(h?"time-valid":"time-invalid"),id:"time","data-testid":"edit-timestamp",defaultValue:B.current,type:"text",onChange:function(e){return function(e){var t=Ee(e);y(t),F(e)}(e.target.value)},name:"time"})),s.default.createElement("td",null,s.default.createElement("div",{className:"marker-actions"},I&&s.default.createElement("p",{className:"ramp--markers-display__error-message"},O),s.default.createElement("button",{type:"submit",onClick:function(){var e={type:"Annotation",motivation:"highlighting",body:{type:"TextualBody",format:"text/html",value:L.current},id:t.id,target:"".concat(t.canvasId,"#t=").concat(de(B.current))},n={method:"PUT",credentials:"same-origin",headers:{Accept:"application/json"},body:JSON.stringify(e)};void 0!==l&&(n.headers["X-CSRF-Token"]=l),fetch(t.id,n).then((function(e){if(201!=e.status)throw new Error;r(L.current,B.current,t.id),U(),q()})).catch((function(e){console.error("MarkerRow -> handleEditSubmit -> failed to update annotation; ",e),P(!0),A("Marker update failed")}))},disabled:!h,className:"ramp--markers-display__edit-button","data-testid":"edit-save-button"},s.default.createElement(Yr,null)," Save"),s.default.createElement("button",{className:"ramp--markers-display__edit-button-danger","data-testid":"edit-cancel-button",onClick:function(){F(_.time),N(_.label),x({}),U(),q()}},s.default.createElement(Xr,null)," Cancel")))):T?s.default.createElement("tr",null,s.default.createElement("td",null,s.default.createElement("a",{href:"".concat(t.canvasId,"#t=").concat(D.current,","),onClick:function(e){return n(e)},"data-offset":D.current},L.current)),s.default.createElement("td",null,B.current),s.default.createElement("td",null,s.default.createElement("div",{className:"marker-actions"},s.default.createElement("p",null,"Are you sure?"),s.default.createElement("button",{type:"submit",className:"ramp--markers-display__edit-button-danger","data-testid":"delete-confirm-button",onClick:function(){var e={method:"DELETE",credentials:"same-origin",headers:{Accept:"application/json"}};void 0!==l&&(e.headers["X-CSRF-Token"]=l),fetch(t.id,e).then((function(e){if(200!=e.status)throw new Error;a(t.id),U(),q()})).catch((function(e){console.error("MarkerRow -> submitDelete() -> failed to delete annotation; ",e),q(),P(!0),A("Marker delete failed."),setTimeout((function(){U()}),1500)}))}},s.default.createElement(Yr,null)," Yes"),s.default.createElement("button",{className:"ramp--markers-display__edit-button","data-testid":"delete-cancel-button",onClick:q},s.default.createElement(Xr,null)," Cancel")))):s.default.createElement("tr",null,s.default.createElement("td",null,s.default.createElement("a",{href:"".concat(t.canvasId,"#t=").concat(D.current,","),onClick:function(e){return n(e)},"data-offset":D.current},L.current)),s.default.createElement("td",null,B.current),i&&s.default.createElement("td",null,s.default.createElement("div",{className:"marker-actions"},I&&s.default.createElement("p",{className:"ramp--markers-display__error-message"},O),s.default.createElement("button",{onClick:function(){x({time:B.current,label:L.current}),p(!0),o(!0)},className:"ramp--markers-display__edit-button","data-testid":"edit-button",disabled:u},s.default.createElement(Zr,null)," Edit"),s.default.createElement("button",{className:"ramp--markers-display__edit-button-danger","data-testid":"delete-button",disabled:u,onClick:function(){S(!0),o(!0)}},s.default.createElement(Kr,null)," Delete"))))};en.propTypes={marker:te.object.isRequired,handleSubmit:te.func.isRequired,handleMarkerClick:te.func.isRequired,handleDelete:te.func.isRequired,hasAnnotationService:te.bool.isRequired,isEditing:te.bool.isRequired,toggleIsEditing:te.func.isRequired};var tn=function(e){var t,r=e.showHeading,n=void 0===r||r,i=e.headingText,u=void 0===i?"Markers":i,o=D(),l=o.manifest,c=o.canvasIndex,f=o.playlist,d=$().player,p=B(),v=f.isEditing,m=f.hasAnnotationService,h=f.annotationServiceId,y=s.default.useState([]),g=E(y,2);g[0];var b=g[1],_=a.useErrorBoundary().showBoundary,x=s.default.useRef(),w=s.default.useRef([]),k=function(e){b.apply(void 0,br(e)),w.current=e},T=null===(t=document.getElementsByName("csrf-token")[0])||void 0===t?void 0:t.content;s.default.useEffect((function(){if(l)try{var e=function(e){try{var t=se(e)[0].getCanvases(),r=[];return t&&t.map((function(e,t){var n=ye(e.__jsonld.annotations,"highlighting");if(n&&0!==n.length){if(n.length>0){var a=[];n.map((function(e){var t=Ve(e);t&&a.push(t)})),r.push({canvasMarkers:a,canvasIndex:t})}}else r.push({canvasMarkers:[],canvasIndex:t})})),r}catch(e){throw e}}(l);p({markers:e,type:"setPlaylistMarkers"});var t=Re(l);null!=t&&(null==t?void 0:t.length)>0&&(x.current=t[c].canvasId)}catch(e){_(e)}}),[l]),s.default.useEffect((function(){var e;if((null===(e=f.markers)||void 0===e?void 0:e.length)>0){var t=f.markers.filter((function(e){return e.canvasIndex===c}))[0].canvasMarkers;k(t)}if(l)try{var r=Re(l);null!=r&&(null==r?void 0:r.length)>0&&(x.current=r[c].canvasId)}catch(e){_(e)}}),[c,f.markers]);var S=function(e,t,r){var n=w.current.map((function(n){return n.id===r&&(n.value=e,n.timeStr=t,n.time=de(t)),n}));k(n),p({updatedMarkers:n,type:"setPlaylistMarkers"})},C=function(e){var t=w.current.filter((function(t){return t.id!=e}));k(t),p({updatedMarkers:t,type:"setPlaylistMarkers"})},j=function(e){e.preventDefault();var t=parseFloat(e.target.dataset.offset);d.currentTime(t)},I=function(e){p({isEditing:e,type:"setIsEditing"})};return s.default.createElement("div",{className:"ramp--markers-display","data-testid":"markers-display"},n&&s.default.createElement("div",{className:"ramp--markers-display__title","data-testid":"markers-display-title"},s.default.createElement("h4",null,u)),m&&s.default.createElement(Qr,{newMarkerEndpoint:h,canvasId:x.current,handleCreate:function(e){k([].concat(br(w.current),[e])),p({updatedMarkers:w.current,type:"setPlaylistMarkers"})},getCurrentTime:function(){return d?d.currentTime():0},csrfToken:T}),w.current.length>0&&s.default.createElement("table",{className:"ramp--markers-display_table","data-testid":"markers-display-table"},s.default.createElement("thead",null,s.default.createElement("tr",null,s.default.createElement("th",null,"Name"),s.default.createElement("th",null,"Time"),m&&s.default.createElement("th",null,"Actions"))),s.default.createElement("tbody",null,w.current.map((function(e,t){return s.default.createElement(en,{key:t,marker:e,handleSubmit:S,handleMarkerClick:j,handleDelete:C,hasAnnotationService:m,isEditing:v,toggleIsEditing:I,csrfToken:T})})))))};tn.propTypes={showHeading:te.bool,headingText:te.string};var rn="Play",nn="Pause",an="Replay",un="Duration",on="LIVE",ln="Loaded",cn="Progress",sn="Fullscreen",fn="Mute",dn="Unmute",pn="Subtitles",vn="Captions",mn="Chapters",hn="Descriptions",yn="Close",gn="Text",bn="White",_n="Black",xn="Green",wn="Blue",kn="Yellow",En="Magenta",Tn="Cyan",Sn="Background",Cn="Window",jn="Transparent",In="Opaque",Pn="None",Mn="Raised",Rn="Depressed",On="Uniform",An="Dropshadow",Ln="Casual",Nn="Script",Dn="Reset",Bn="Done",Fn={"Audio Player":"Audio Player","Video Player":"Video Player",Play:rn,Pause:nn,Replay:an,"Current Time":"Current Time",Duration:un,"Remaining Time":"Remaining Time","Stream Type":"Stream Type",LIVE:on,"Seek to live, currently behind live":"Seek to live, currently behind live","Seek to live, currently playing live":"Seek to live, currently playing live",Loaded:ln,Progress:cn,"Progress Bar":"Progress Bar","progress bar timing: currentTime={1} duration={2}":"{1} of {2}",Fullscreen:sn,"Non-Fullscreen":"Exit Fullscreen",Mute:fn,Unmute:dn,"Playback Rate":"Playback Rate",Subtitles:pn,"subtitles off":"subtitles off",Captions:vn,"captions off":"captions off",Chapters:mn,Descriptions:hn,"descriptions off":"descriptions off","Audio Track":"Audio Track","Volume Level":"Volume Level","You aborted the media playback":"You aborted the media playback","A network error caused the media download to fail part-way.":"A network error caused the media download to fail part-way.","The media could not be loaded, either because the server or network failed or because the format is not supported.":"The media could not be loaded, either because the server or network failed or because the format is not supported.","The media playback was aborted due to a corruption problem or because the media used features your browser did not support.":"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.","No compatible source was found for this media.":"No compatible source was found for this media.","The media is encrypted and we do not have the keys to decrypt it.":"The media is encrypted and we do not have the keys to decrypt it.","Play Video":"Play Video",Close:yn,"Close Modal Dialog":"Close Modal Dialog","Modal Window":"Modal Window","This is a modal window":"This is a modal window","This modal can be closed by pressing the Escape key or activating the close button.":"This modal can be closed by pressing the Escape key or activating the close button.",", opens captions settings dialog":", opens captions settings dialog",", opens subtitles settings dialog":", opens subtitles settings dialog",", opens descriptions settings dialog":", opens descriptions settings dialog",", selected":", selected","captions settings":"captions settings","subtitles settings":"subtitles settings","descriptions settings":"descriptions settings",Text:gn,White:bn,Black:_n,Red:"Red",Green:xn,Blue:wn,Yellow:kn,Magenta:En,Cyan:Tn,Background:Sn,Window:Cn,Transparent:jn,"Semi-Transparent":"Semi-Transparent",Opaque:In,"Font Size":"Font Size","Text Edge Style":"Text Edge Style",None:Pn,Raised:Mn,Depressed:Rn,Uniform:On,Dropshadow:An,"Font Family":"Font Family","Proportional Sans-Serif":"Proportional Sans-Serif","Monospace Sans-Serif":"Monospace Sans-Serif","Proportional Serif":"Proportional Serif","Monospace Serif":"Monospace Serif",Casual:Ln,Script:Nn,"Small Caps":"Small Caps",Reset:Dn,"restore all settings to the default values":"restore all settings to the default values",Done:Bn,"Caption Settings Dialog":"Caption Settings Dialog","Beginning of dialog window. Escape will cancel and close the window.":"Beginning of dialog window. Escape will cancel and close the window.","End of dialog window.":"End of dialog window.","{1} is loading.":"{1} is loading.","Exit Picture-in-Picture":"Exit Picture-in-Picture","Picture-in-Picture":"Picture-in-Picture","No content":"No content"},Un=Object.freeze({__proto__:null,Play:rn,Pause:nn,Replay:an,Duration:un,LIVE:on,Loaded:ln,Progress:cn,Fullscreen:sn,Mute:fn,Unmute:dn,Subtitles:pn,Captions:vn,Chapters:mn,Descriptions:hn,Close:yn,Text:gn,White:bn,Black:_n,Red:"Red",Green:xn,Blue:wn,Yellow:kn,Magenta:En,Cyan:Tn,Background:Sn,Window:Cn,Transparent:jn,Opaque:In,None:Pn,Raised:Mn,Depressed:Rn,Uniform:On,Dropshadow:An,Casual:Ln,Script:Nn,Reset:Dn,Done:Bn,default:Fn});exports.AutoAdvanceToggle=Jr,exports.IIIFPlayer=Ge,exports.MarkersDisplay=tn,exports.MediaPlayer=lr,exports.MetadataDisplay=Gr,exports.StructuredNavigation=mr,exports.SupplementalFiles=function(e){var t=e.itemHeading,r=void 0===t?"Item files":t,n=e.sectionHeading,i=void 0===n?"Section files":n,u=e.showHeading,o=void 0===u||u,l=D().manifest,c=s.default.useState(),f=E(c,2),d=f[0],p=f[1],v=s.default.useState(),m=E(v,2),h=m[0],y=m[1],g=s.default.useState(!1),b=E(g,2),_=b[0],x=b[1],w=a.useErrorBoundary().showBoundary;s.default.useEffect((function(){if(l)try{var e=Be(l);p(e.manifest);var t=e.canvas;y(t);var r=t.reduce((function(e,t){return e+t.files.length}),0);x(r>0)}catch(e){w(e)}}),[l]);var k=function(){return!!(_||(null==d?void 0:d.length)>0)},T=function(e,t){e.preventDefault(),me(t.id,t.filename,t.fileExt,t.isMachineGen)};return s.default.createElement("div",{"data-testid":"supplemental-files",className:"ramp--supplemental-files"},o&&s.default.createElement("div",{className:"ramp--supplemental-files-heading","data-testid":"supplemental-files-heading"},s.default.createElement("h4",null,"Files")),k()&&s.default.createElement("div",{className:"ramp--supplemental-files-display-content","data-testid":"supplemental-files-display-content"},Array.isArray(d)&&d.length>0&&s.default.createElement(s.default.Fragment,null,s.default.createElement("h4",null,r),s.default.createElement("dl",{key:"item-files"},d.map((function(e,t){return s.default.createElement(s.default.Fragment,{key:t},s.default.createElement("dd",{key:"item-file-".concat(t)},s.default.createElement("a",{href:e.id,key:t,onClick:function(t){return T(t,e)}},e.label)))})))),Array.isArray(h)&&_&&s.default.createElement(s.default.Fragment,null,s.default.createElement("h4",null,i),h.map((function(e,t){var r=e.files;return r.length>0&&s.default.createElement("dl",{key:"section-".concat(t,"-label")},s.default.createElement("dt",{key:e.label},e.label),r.map((function(e,r){return s.default.createElement("dd",{key:"section-".concat(t,"-file-").concat(r)},s.default.createElement("a",{href:e.id,key:r,onClick:function(t){return T(t,e)}},e.label))})))})))),!k()&&s.default.createElement("div",{"data-testid":"supplemental-files-empty",className:"ramp--supplemental-files-empty"},s.default.createElement("p",null,"No Supplemental file(s) in Manifest")))},exports.Transcript=$r;
